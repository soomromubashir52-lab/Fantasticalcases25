;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b37da3ae-cc97-9a1e-efd0-c01ad1683bd1")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,664961,e=>{"use strict";var t=e.i(750854),i=e.i(389959),r=e.i(15053),n=e.i(134628),a=e.i(441329),T=e.i(479407);function s(){let e=(0,t.useRouter)(),s=(0,a.isInBonsaiWebview)(e)&&(0,a.doesBonsaiWebviewSupportFeature)(e,"supportsUpsellBridge"),o=(0,i.useCallback)(e=>{if(!s)return;let t={messageType:n.BridgeMessageType.UPSELL_REQUEST_OPEN,showcasedFeature:e};(0,T.sendMessage)(t,(0,r.v4)())},[s]);return s?{showUpsell:o}:null}e.s(["default",()=>s])},737250,e=>{"use strict";var t=e.i(389959),i=e.i(830675),r=e.i(222342),n=e.i(344188),a=e.i(282453);let T="email-verification-resend-timestamp";function s(){let[e,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(0),{showConfirm:E,showError:p}=(0,r.default)();return(0,t.useEffect)(()=>{try{let e=a.default.get(T,"number");if(e){let t=Date.now()-e;t<6e4?(s(!0),l(Math.ceil((6e4-t)/1e3))):a.default.remove(T)}}catch(e){i.captureException(e)}},[]),(0,t.useEffect)(()=>{if(!e||o<=0)return;let t=setInterval(()=>{l(e=>{let r=e-1;if(r<=0){s(!1);try{a.default.remove(T)}catch(e){i.captureException(e)}return clearInterval(t),0}return r})},1e3);return()=>clearInterval(t)},[e,o]),{resendVerification:(0,t.useCallback)(async()=>{if(!e)try{await (0,n.postJson)("/data/user/resend_verification",{}),E("Verification email sent"),s(!0),l(60);try{a.default.set(T,Date.now())}catch(e){i.captureException(e)}}catch(t){let{message:e}=t;p(`Failed to resend verification email: ${e}`),i.captureException(t)}},[e,E,p]),isInCooldown:e,cooldownTimeRemaining:o}}e.s(["useEmailVerificationResend",()=>s])},891628,e=>{"use strict";var t=e.i(389959),i=e.i(973245),r=e.i(304277);e.i(566901);let n={},a=i.gql`
    query PollEmailVerification {
  currentUser {
    id
    isVerified
  }
}
    `;e.s(["default",0,e=>{let i,T=(0,t.useRef)(e?.onEmailVerified),s=(0,t.useRef)(e?.onError),o=(0,t.useCallback)(()=>{T.current&&T.current()},[]),l=(0,t.useCallback)(e=>{s.current&&s.current(e)},[]),{loading:E,data:p,error:u,startPolling:y,stopPolling:c}=(i={...n,...void 0},r.useQuery(a,i));return(0,t.useEffect)(()=>(y(2e3),()=>c()),[y,c]),(0,t.useEffect)(()=>{if(u){c(),l&&l(u);return}p&&p.currentUser?.isVerified&&(c(),o&&o())},[p,u,c,l,o]),{loading:E,error:u,isVerified:p?.currentUser?.isVerified}}],891628)},837596,e=>{"use strict";var t=e.i(973245),i=e.i(304277);e.i(566901);let r={},n=t.gql`
    query EmailVerificationContent {
  currentUser {
    id
    email
  }
}
    `;function a(e){let t={...r,...e};return i.useQuery(n,t)}e.s(["useEmailVerificationContentQuery",()=>a])},82464,e=>{"use strict";var t=e.i(276385);e.i(221042);var i=e.i(837596),r=e.i(269848),n=e.i(11029),a=e.i(737250);e.i(344188);var T=e.i(446530),s=e.i(173703),o=e.i(613355),l=e.i(140487),E=e.i(960178),p=e.i(751273),u=e.i(625484);let y=(0,T.cssRecord)({cooldownText:[o.rcss.p(8)]}),c=({title:e="Please verify your email address",subtitle:T}={})=>{let{loading:c,data:S}=(0,i.useEmailVerificationContentQuery)(),{resendVerification:_,isInCooldown:d,cooldownTimeRemaining:O}=(0,a.useEmailVerificationResend)();return(0,t.jsxs)(u.View,{gap:24,align:"center","data-cy":"email-verification-widget",children:[(0,t.jsxs)(u.View,{gap:8,align:"center",children:[(0,t.jsx)(E.Header,{level:2,variant:"headerDefault",css:o.rcss.textAlign.center,children:e}),T?(0,t.jsx)(E.Text,{css:o.rcss.textAlign.center,variant:"small",children:T}):null]}),(0,t.jsxs)(E.Text,{css:o.rcss.textAlign.center,children:["We sent an email to"," ",c?(0,t.jsx)(r.default,{}):(0,t.jsx)(E.Text,{style:{textDecoration:"underline",textUnderlineOffset:"3px"},children:S?.currentUser?.email}),"."]}),(0,t.jsxs)(u.View,{row:!0,gap:8,children:[(0,t.jsxs)(s.ShadesSurface,{children:[(0,t.jsx)(p.Tooltip,{tooltip:`You can resend in ${O} seconds`,placement:"bottom",isDisabled:!d,children:(0,t.jsx)(l.Button,{iconLeft:(0,t.jsx)(n.default,{}),onClick:_,text:"Resend email",variant:"outlined",disabled:d})}),d?(0,t.jsxs)(E.Text,{variant:"small",color:"dimmer",css:y.cooldownText,children:["You can resend in ",O," seconds"]}):null]}),!1]}),(0,t.jsx)(E.Text,{css:o.rcss.textAlign.center,variant:"small",textWrap:"balance",children:"Don't see an email? Check your spam or other filtered folders."})]})};var S=e.i(891628),_=e.i(222342);e.s(["default",0,({onEmailVerified:e,...i})=>{let{showConfirm:r,showError:n}=(0,_.default)();return(0,S.default)({onEmailVerified:()=>{r("Email verified!"),e?.()},onError:e=>{n(e.message)}}),(0,t.jsx)(c,{...i})}],82464)},537010,82048,e=>{"use strict";var t=e.i(276385),i=e.i(389959);let r=(0,i.createContext)({isGooglePlayStoreTWA:!1});function n({children:e}){let[n,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{a("u">typeof document&&document.referrer.includes("android-app://"))},[n]),(0,t.jsx)(r.Provider,{value:{isGooglePlayStoreTWA:n},children:e})}e.s(["GooglePlayContext",0,r,"GooglePlayContextProvider",()=>n],82048),e.s([],537010)},952521,e=>{"use strict";var t=e.i(389959),i=e.i(969664);function r(e,r){let{data:n,loading:a}=(0,i.useTourServiceToursSeenQuery)({variables:{tours:e}}),[T,{loading:s}]=(0,i.useTourServiceDismissTourMutation)({variables:{name:e},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:e,seen:!0}},onCompleted:r}),[o,{loading:l}]=(0,i.useTourServiceDismissTourMutation)({variables:{name:e},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:e,seen:!1}}}),E=!!n?.currentUser?.toursSeen[0].seen;return(0,t.useMemo)(()=>({isLoading:a,isDone:E,setAsDone:T,unsetAsDone:o,isMutating:s||l}),[a,E,T,o,s,l])}function n(e){let{isLoading:t,isDone:i,setAsDone:n,unsetAsDone:a}=r(e);return{isLoading:t,isDone:i,setAsDone:n,unsetAsDone:a}}e.s(["useDismissibleElement",()=>n,"useMemoedDismissibleElement",()=>r])},969664,e=>{"use strict";var t=e.i(973245),i=e.i(304277),r=e.i(566901),n=e.i(951262);let a={},T=t.gql`
    fragment TourServiceTour on TourSeen {
  id
  seen
}
    `,s=t.gql`
    query TourServiceToursSeen($tours: [String!]!) {
  currentUser {
    id
    toursSeen(tours: $tours) {
      id
      ...TourServiceTour
    }
  }
}
    ${T}`;function o(e){let t={...a,...e};return i.useQuery(s,t)}function l(e){let t={...a,...e};return r.useLazyQuery(s,t)}let E=t.gql`
    mutation TourServiceDismissTour($name: String!) {
  markTourAsSeen2(input: {name: $name}) {
    __typename
    ... on TourSeen {
      id
      ...TourServiceTour
    }
    ... on UserError {
      message
    }
    ... on UnauthorizedError {
      message
    }
  }
}
    ${T}`;function p(e){let t={...a,...e};return n.useMutation(E,t)}e.s(["useTourServiceDismissTourMutation",()=>p,"useTourServiceToursSeenLazyQuery",()=>l,"useTourServiceToursSeenQuery",()=>o])},613141,e=>{"use strict";e.i(222252);var t=e.i(389959),i=e.i(218678),r=e.i(750172),n=e.i(315557),a=e.i(442121);function T(e,T){var s=(0,t.useRef)(!1),o=(0,a.useApolloClient)(null==T?void 0:T.client);(0,n.verifyDocumentType)(e,n.DocumentType.Subscription);var l=(0,t.useState)({loading:!(null==T?void 0:T.skip),error:void 0,data:void 0,variables:null==T?void 0:T.variables}),E=l[0],p=l[1];!s.current&&(s.current=!0,(null==T?void 0:T.onSubscriptionData)&&i.invariant.warn(T.onData?"'useSubscription' supports only the 'onSubscriptionData' or 'onData' option, but not both. Only the 'onData' option will be used.":"'onSubscriptionData' is deprecated and will be removed in a future major version. Please use the 'onData' option instead."),(null==T?void 0:T.onSubscriptionComplete)&&i.invariant.warn(T.onComplete?"'useSubscription' supports only the 'onSubscriptionComplete' or 'onComplete' option, but not both. Only the 'onComplete' option will be used.":"'onSubscriptionComplete' is deprecated and will be removed in a future major version. Please use the 'onComplete' option instead."));var u=(0,t.useState)(function(){return(null==T?void 0:T.skip)?null:o.subscribe({query:e,variables:null==T?void 0:T.variables,fetchPolicy:null==T?void 0:T.fetchPolicy,context:null==T?void 0:T.context})}),y=u[0],c=u[1],S=(0,t.useRef)(!1);(0,t.useEffect)(function(){return function(){S.current=!0}},[]);var _=(0,t.useRef)({client:o,subscription:e,options:T});return(0,t.useEffect)(function(){var t,i,n,a,s=null==T?void 0:T.shouldResubscribe;"function"==typeof s&&(s=!!s(T)),(null==T?void 0:T.skip)?(!(null==T?void 0:T.skip)!=!(null==(t=_.current.options)?void 0:t.skip)||S.current)&&(p({loading:!1,data:void 0,error:void 0,variables:null==T?void 0:T.variables}),c(null),S.current=!1):(!1!==s&&(o!==_.current.client||e!==_.current.subscription||(null==T?void 0:T.fetchPolicy)!==(null==(i=_.current.options)?void 0:i.fetchPolicy)||!(null==T?void 0:T.skip)!=!(null==(n=_.current.options)?void 0:n.skip)||!(0,r.equal)(null==T?void 0:T.variables,null==(a=_.current.options)?void 0:a.variables))||S.current)&&(p({loading:!0,data:void 0,error:void 0,variables:null==T?void 0:T.variables}),c(o.subscribe({query:e,variables:null==T?void 0:T.variables,fetchPolicy:null==T?void 0:T.fetchPolicy,context:null==T?void 0:T.context})),S.current=!1),Object.assign(_.current,{client:o,subscription:e,options:T})},[o,e,T,S.current]),(0,t.useEffect)(function(){if(y){var e=!1,t=y.subscribe({next:function(t){if(!e){var i,r,n={loading:!1,data:t.data,error:void 0,variables:null==T?void 0:T.variables};p(n),(null==(i=_.current.options)?void 0:i.onData)?_.current.options.onData({client:o,data:n}):(null==(r=_.current.options)?void 0:r.onSubscriptionData)&&_.current.options.onSubscriptionData({client:o,subscriptionData:n})}},error:function(t){var i,r;e||(p({loading:!1,data:void 0,error:t,variables:null==T?void 0:T.variables}),null==(r=null==(i=_.current.options)?void 0:i.onError)||r.call(i,t))},complete:function(){var t,i;!e&&((null==(t=_.current.options)?void 0:t.onComplete)?_.current.options.onComplete():(null==(i=_.current.options)?void 0:i.onSubscriptionComplete)&&_.current.options.onSubscriptionComplete())}});return function(){e=!0,setTimeout(function(){t.unsubscribe()})}}},[y]),E}e.s(["useSubscription",()=>T])},442966,e=>{"use strict";var t=e.i(276385),i=e.i(116235);function r(e){return(0,t.jsx)(i.default,{...e,children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M13.376 1.253c.21-.02.422.012.616.096l.095.046.091.053c.178.115.323.274.423.46l.045.096.038.099a1.25 1.25 0 0 1 .01.755l-1.92 6.02c-.003.011-.007.023-.012.034a.253.253 0 0 0 .03.23.25.25 0 0 0 .206.108H20l.123.004a1.752 1.752 0 0 1 1.24 2.849.73.73 0 0 1-.045.05l-9.9 10.199v-.001a1.25 1.25 0 0 1-2.122-1.18l.01-.03 1.92-6.019.012-.035a.251.251 0 0 0-.12-.309.255.255 0 0 0-.056-.02l-.06-.008H4a1.752 1.752 0 0 1-1.363-2.852l.045-.05 9.9-10.2a1.25 1.25 0 0 1 .689-.38l.104-.015Zm-9.582 11.6a.252.252 0 0 0-.023.255.25.25 0 0 0 .227.142h7.001l.21.013a1.75 1.75 0 0 1 1.53 1.518c.034.269.003.54-.086.795l.002.001-1.591 4.986 9.14-9.418a.249.249 0 0 0 .047-.116.252.252 0 0 0-.115-.24.249.249 0 0 0-.064-.03l-.07-.009H13a1.753 1.753 0 0 1-1.74-1.531 1.752 1.752 0 0 1 .086-.797l1.588-4.985-9.14 9.417Z",clipRule:"evenodd"})})}e.s(["default",()=>r])},179104,e=>{"use strict";let t=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");e.s(["nanoid",()=>t],179104)},820228,e=>{"use strict";var t=e.i(276385),i=e.i(116235);function r(e){return(0,t.jsx)(i.default,{...e,children:(0,t.jsx)("path",{d:"M21 11.25a.75.75 0 0 1 .75.75A9.75 9.75 0 0 1 12 21.75h-.003a10.501 10.501 0 0 1-7.259-2.951l-.988-.988V21a.75.75 0 0 1-1.5 0v-5a.755.755 0 0 1 .055-.282l.004-.01c.011-.027.027-.053.042-.078a.748.748 0 0 1 .119-.16.745.745 0 0 1 .16-.12c.026-.014.05-.03.078-.041l.01-.004c.03-.013.062-.02.094-.029.013-.003.025-.009.039-.011.005-.002.01-.002.016-.003A.755.755 0 0 1 3 15.25h5a.75.75 0 0 1 0 1.5H4.81l.971.97a9 9 0 0 0 6.22 2.529A8.25 8.25 0 0 0 20.25 12a.75.75 0 0 1 .75-.75ZM12.51 2.264a10.501 10.501 0 0 1 6.379 2.593l.373.344.988.988V3a.75.75 0 0 1 1.5 0v5a.754.754 0 0 1-.058.286c-.012.03-.028.056-.044.083a.742.742 0 0 1-.118.161.744.744 0 0 1-.16.118c-.028.016-.055.032-.084.044-.032.014-.065.022-.099.03-.013.004-.025.01-.039.012l-.016.003A.751.751 0 0 1 21 8.75h-5a.75.75 0 0 1 0-1.5h3.19l-.971-.97-.32-.295a9 9 0 0 0-5.901-2.235A8.25 8.25 0 0 0 3.75 12a.75.75 0 0 1-1.5 0A9.75 9.75 0 0 1 12 2.25h.003l.507.014Z"})})}e.s(["default",()=>r])},479407,134628,e=>{"use strict";var t,i,r,n,a=e.i(15053),T=e.i(960933),s=e.i(862927),o=((t={}).ERROR="ERROR",t.ACK="ACK",t.RESET="RESET",t.DEBUG="DEBUG",t.TEXT_EDITOR_CLOSED="TEXT_EDITOR_CLOSED",t.TEXT_EDITOR_STATE="WORKSPACE_STATE",t.TEXT_EDITOR_STATE_REQUEST="WORKSPACE_STATE_REQUEST",t.WORKSPACE_STATE="WORKSPACE_STATE1",t.WORKSPACE_STATE_REQUEST="WORKSPACE_STATE_REQUEST1",t.REQUEST_SET_SELECTION="REQUEST_SET_SELECTION",t.REQUEST_REPLACE_SELECTION="REQUEST_REPLACE_SELECTION",t.REQUEST_SET_TEXT="REQUEST_SET_TEXT",t.REQUEST_INSERT_TEXT="REQUEST_INSERT_TEXT",t.REQUEST_PASTE_TEXT="REQUEST_PASTE_TEXT",t.TEXT_EDITOR_REQUEST_ACTION="TEXT_EDITOR_REQUEST_ACTION",t.WORKSPACE_REQUEST_ACTION="WORKSPACE_REQUEST_ACTION",t.SET_KEYBOARD_STATE="SET_KEYBOARD_STATE",t.WORKSPACE_REQUEST_OPEN_PANE="WORKSPACE_REQUEST_OPEN_PANE",t.SHELL_INSERT_INPUT="SHELL_INSERT_INPUT",t.SHELL_COMMAND="SHELL_COMMAND",t.SHELL_PASTE_TEXT="SHELL_PASTE_TEXT",t.GIT_REFRESH_GITHUB_CONNECTION="GIT_REFRESH_GITHUB_CONNECTION",t.UPSELL_REQUEST_OPEN="UPSELL_REQUEST_OPEN",t.SHOW_FORK_TEMPLATE="SHOW_FORK_TEMPLATE",t.REQUEST_PERMISSION="REQUEST_PERMISSION",t.REQUEST_PERMISSION_RESULT="REQUEST_PERMISSION_RESULT",t.SPEECH_TO_TEXT_RESULT="SPEECH_TO_TEXT_RESULT",t.REQUEST_SPEECH_TO_TEXT_ACTION="REQUEST_SPEECH_TO_TEXT_ACTION",t.REQUEST_PANE_ACTION="REQUEST_PANE_ACTION",t.PANE_RESPONSE="PANE_RESPONSE",t.REQUEST_STORE_REVIEW_PROMPT="REQUEST_STORE_REVIEW_PROMPT",t.DOWNLOAD_FILE="DOWNLOAD_FILE",t.REFETCH_REPL_DATA="REFETCH_REPL_DATA",t.TOUR="TOUR",t.SHOW_PAYMENT_FLOW="SHOW_PAYMENT_FLOW",t.PAYING_STATUS_CHANGED="PAYING_STATUS_CHANGED",t.OWNER_CONTEXT_CHANGED="OWNER_CONTEXT_CHANGED",t.SHOW_REPL_INFO="SHOW_REPL_INFO",t.EXIT_WORKSPACE="EXIT_WORKSPACE",t.OPEN_EXPO_LAUNCH="OPEN_EXPO_LAUNCH",t.CLOSE_EXPO_LAUNCH="CLOSE_EXPO_LAUNCH",t.APP_ACTIVITY_STATE="APP_ACTIVITY_STATE",t),l=((i={}).FROM_NATIVE="FROM_NATIVE",i.TO_NATIVE="TO_NATIVE",i),E=((r={}).OPEN_FILETREE="OPEN_FILETREE",r.OPEN_NEW_PANE="OPEN_NEW_PANE",r.TOGGLE_DRAWER="TOGGLE_DRAWER",r.TOGGLE_ALLPANES="TOGGLE_ALLPANES",r.TOGGLE_RUN_STATE="TOGGLE_RUN_STATE",r),p=((n={}).REQUEST_UNDO="REQUEST_UNDO",n.REQUEST_REDO="REQUEST_REDO",n.REQUEST_BLUR="REQUEST_BLUR",n.REQUEST_FOCUS="REQUEST_FOCUS",n.REQUEST_INDENT_SELECTION="REQUEST_INDENT_SELECTION",n.REQUEST_DEDENT_SELECTION="REQUEST_DEDENT_SELECTION",n.REQUEST_TOGGLE_COMMENT="REQUEST_TOGGLE_COMMENT",n.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION="REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION",n);let u=T.Type.Object({location:T.Type.Number(),length:T.Type.Number()}),y=T.Type.Object({messageType:T.Type.Literal("ERROR")}),c=T.Type.Object({messageType:T.Type.Literal("ACK")}),S=T.Type.Object({messageType:T.Type.Literal("RESET")}),_=T.Type.Object({messageType:T.Type.Literal("TEXT_EDITOR_CLOSED"),filePath:T.Type.String()}),d=T.Type.Object({messageType:T.Type.Literal("WORKSPACE_STATE"),filePath:T.Type.String(),text:T.Type.String(),selections:T.Type.Array(u),hasFocus:T.Type.Boolean(),revisionId:T.Type.String(),hasGhostwriterSuggestion:T.Type.Boolean()}),O=T.Type.Object({messageType:T.Type.Literal("WORKSPACE_STATE_REQUEST"),filePath:T.Type.String()}),R=T.Type.Union([T.Type.Literal("OFFLINE"),T.Type.Literal("IDLE"),T.Type.Literal("RUNNING"),T.Type.Literal("STOPPING"),T.Type.Literal("BEFORE_RUN")]),g=T.Type.Object({messageType:T.Type.Literal("WORKSPACE_STATE1"),isDrawerOpen:T.Type.Boolean(),isShowingAllPanes:T.Type.Boolean(),isSaving:T.Type.Boolean(),isOffline:T.Type.Boolean(),runState:R,activePaneType:T.Type.Union([T.Type.Null(),T.Type.String()]),activePaneFilePath:T.Type.Union([T.Type.Null(),T.Type.String()]),isInAgentMode:T.Type.Optional(T.Type.Boolean()),insets:T.Type.Optional(T.Type.Object({top:T.Type.Number(),bottom:T.Type.Number()})),headerColor:T.Type.Optional(T.Type.String()),allPanesVisibleHeaderColor:T.Type.Optional(T.Type.String())});function A(e){return s.Value.Check(g,e)}let L=T.Type.Object({messageType:T.Type.Literal("WORKSPACE_STATE_REQUEST1")}),b=T.Type.Object({messageType:T.Type.Literal("REQUEST_REPLACE_SELECTION"),filePath:T.Type.String(),text:T.Type.String(),revisionId:T.Type.String()});function m(e){return s.Value.Check(b,e)}let v=T.Type.Object({messageType:T.Type.Literal("REQUEST_SET_SELECTION"),filePath:T.Type.String(),selections:T.Type.Array(u),revisionId:T.Type.String()});function N(e){return s.Value.Check(v,e)}let P=T.Type.Object({messageType:T.Type.Literal("REQUEST_SET_TEXT"),filePath:T.Type.String(),text:T.Type.String(),selections:T.Type.Array(u),revisionId:T.Type.String()});function f(e){return s.Value.Check(P,e)}let U=T.Type.Object({messageType:T.Type.Literal("REQUEST_INSERT_TEXT"),filePath:T.Type.String(),text:T.Type.String(),insertionRange:u,selections:T.Type.Array(u),revisionId:T.Type.String()});function C(e){return s.Value.Check(U,e)}let I=T.Type.Object({messageType:T.Type.Literal("REQUEST_PASTE_TEXT"),text:T.Type.String(),filePath:T.Type.String(),revisionId:T.Type.String()});function h(e){return s.Value.Check(I,e)}let j=T.Type.Object({messageType:T.Type.Literal("TEXT_EDITOR_REQUEST_ACTION"),action:T.Type.Enum(p),revisionId:T.Type.String(),filePath:T.Type.String()});function D(e){return s.Value.Check(j,e)}let Q=T.Type.Object({messageType:T.Type.Literal("WORKSPACE_REQUEST_ACTION"),action:T.Type.Enum(E)}),w=T.Type.Object({messageType:T.Type.Literal("SET_KEYBOARD_STATE"),isShown:T.Type.Boolean(),height:T.Type.Number()}),M=T.Type.Object({messageType:T.Type.Literal("WORKSPACE_REQUEST_OPEN_PANE"),paneType:T.Type.Union([T.Type.Literal("ghostwriterChat"),T.Type.Literal("deployments")])}),H=T.Type.Object({messageType:T.Type.Literal("SHELL_INSERT_INPUT"),input:T.Type.String()}),x=T.Type.Literal("unknown"),W=T.Type.Object({messageType:T.Type.Literal("SHELL_COMMAND"),command:x}),B=T.Type.Object({messageType:T.Type.Literal("SHELL_PASTE_TEXT"),text:T.Type.String()}),V=T.Type.Object({messageType:T.Type.Literal("GIT_REFRESH_GITHUB_CONNECTION")}),G=T.Type.Object({messageType:T.Type.Literal("UPSELL_REQUEST_OPEN"),showcasedFeature:T.Type.Optional(T.Type.Union([T.Type.Literal("ghostwriter")]))}),X=T.Type.Object({messageType:T.Type.Literal("SHOW_FORK_TEMPLATE"),templateReplId:T.Type.String(),originAiSessionId:T.Type.Optional(T.Type.String()),initialPrompt:T.Type.String(),enterInAgentMode:T.Type.Boolean(),replName:T.Type.Optional(T.Type.String())}),k=T.Type.Union([T.Type.Literal("audioRecording")]),F=T.Type.Object({messageType:T.Type.Literal("REQUEST_PERMISSION"),permission:k}),K=T.Type.Object({messageType:T.Type.Literal("REQUEST_PERMISSION_RESULT"),grantResult:T.Type.Object({permission:k,granted:T.Type.Boolean()})}),q=T.Type.Object({messageType:T.Type.Literal("SPEECH_TO_TEXT_RESULT"),result:T.Type.Union([T.Type.Object({event:T.Type.Literal("start")}),T.Type.Object({event:T.Type.Literal("end")}),T.Type.Object({event:T.Type.Literal("update"),transcript:T.Type.String()}),T.Type.Object({event:T.Type.Literal("error"),error:T.Type.Union([T.Type.Literal("aborted"),T.Type.Literal("language-not-supported"),T.Type.Literal("network"),T.Type.Literal("no-speech"),T.Type.Literal("not-allowed"),T.Type.Literal("busy"),T.Type.Literal("unknown")])})])}),Y=T.Type.Object({messageType:T.Type.Literal("REQUEST_SPEECH_TO_TEXT_ACTION"),action:T.Type.Union([T.Type.Literal("startTranscription"),T.Type.Literal("stopTranscription")])}),$=T.Type.Object({paneType:T.Type.Literal("webview"),action:T.Type.Union([T.Type.Object({type:T.Type.Literal("refresh")}),T.Type.Object({type:T.Type.Literal("navigate"),base:T.Type.String(),url:T.Type.Optional(T.Type.String()),path:T.Type.Optional(T.Type.String()),port:T.Type.Optional(T.Type.Integer())}),T.Type.Object({type:T.Type.Literal("setInsets"),insets:T.Type.Object({top:T.Type.Number()})}),T.Type.Object({type:T.Type.Literal("setVisibility"),isVisible:T.Type.Boolean()})])}),Z=T.Type.Object({messageType:T.Type.Literal("REQUEST_PANE_ACTION"),paneAction:T.Type.Union([$])}),z=T.Type.Object({paneType:T.Type.Literal("webview"),response:T.Type.Union([T.Type.Object({type:T.Type.Literal("navigation"),path:T.Type.String(),base:T.Type.Optional(T.Type.String()),port:T.Type.Optional(T.Type.Integer())}),T.Type.Object({type:T.Type.Literal("logs"),logType:T.Type.String(),method:T.Type.String(),message:T.Type.Array(T.Type.Any())}),T.Type.Object({type:T.Type.Literal("screenshot"),dataUri:T.Type.String({pattern:"^data:image/png;base64,[A-Za-z0-9+/=]+$"})})])}),J=T.Type.Object({messageType:T.Type.Literal("PANE_RESPONSE"),paneResponse:T.Type.Union([z])}),ee=T.Type.Object({messageType:T.Type.Literal("REQUEST_STORE_REVIEW_PROMPT"),source:T.Type.Union([T.Type.Literal("deployProgress"),T.Type.Literal("corePurchaseSuccess")])}),et=T.Type.Object({messageType:T.Type.Literal("DOWNLOAD_FILE"),fileName:T.Type.String(),fileContent:T.Type.String({contentEncoding:"base64"})}),ei=T.Type.Object({messageType:T.Type.Literal("REFETCH_REPL_DATA")}),er=T.Type.Object({messageType:T.Type.Literal("TOUR"),tour:T.Type.Union([T.Type.Object({type:T.Type.Literal("agent"),action:T.Type.Union([T.Type.Literal("show"),T.Type.Literal("complete")])})])}),en=T.Type.Object({messageType:T.Type.Literal("SHOW_PAYMENT_FLOW"),flow:T.Type.Union([T.Type.Object({type:T.Type.Literal("setup"),source:T.Type.String()}),T.Type.Object({type:T.Type.Literal("setUsageLimits")})])}),ea=T.Type.Object({messageType:T.Type.Literal("PAYING_STATUS_CHANGED")}),eT=T.Type.Object({messageType:T.Type.Literal("OWNER_CONTEXT_CHANGED"),orgId:T.Type.Optional(T.Type.String())}),es=T.Type.Object({messageType:T.Type.Literal("SHOW_REPL_INFO")}),eo=T.Type.Object({messageType:T.Type.Literal("EXIT_WORKSPACE")}),el=T.Type.Object({messageType:T.Type.Literal("OPEN_EXPO_LAUNCH"),url:T.Type.String()}),eE=T.Type.Object({messageType:T.Type.Literal("CLOSE_EXPO_LAUNCH")}),ep=T.Type.Object({messageType:T.Type.Literal("DEBUG"),debugMessage:T.Type.String()}),eu=T.Type.Union([T.Type.Literal("active"),T.Type.Literal("inactive"),T.Type.Literal("background"),T.Type.Literal("unknown"),T.Type.Literal("extension")]),ey=T.Type.Object({messageType:T.Type.Literal("APP_ACTIVITY_STATE"),state:eu}),ec=T.Type.Union([y,c,S,ep,_,d,O,g,L,v,b,P,U,I,j,Q,w,H,W,B,V,M,G,X,F,K,q,Y,Z,J,ee,et,ei,er,en,ea,eT,es,eo,el,eE,ey]),eS=T.Type.Object({protocolVersion:T.Type.String(),messageDirection:T.Type.Enum(l),messageId:T.Type.String(),payload:ec});function e_(e){return s.Value.Check(eS,e)}e.s(["BridgeMessageDirection",()=>l,"BridgeMessageType",()=>o,"BridgeTextEditorAction",()=>p,"BridgeWorkspaceAction",()=>E,"isBridgeMessage",()=>e_,"isBridgePayloadRequestInsertText",()=>C,"isBridgePayloadRequestPasteText",()=>h,"isBridgePayloadRequestReplaceSelection",()=>m,"isBridgePayloadRequestSetSelection",()=>N,"isBridgePayloadRequestSetText",()=>f,"isBridgePayloadRequestTextEditorAction",()=>D,"isBridgePayloadWorkspaceState",()=>A,"nativeBridgeProtocolVersion",0,"1"],134628);var ed=e.i(664152);function eO(e){let t=e.data;if(!e_(t)||t.messageDirection!==l.FROM_NATIVE)return null;if("1"!==t.protocolVersion)throw Error(`Invalid protocolVersion: ${t.protocolVersion} != 1`);return t}function eR(e,t){let i=eO(e);if(null==i)return;let r=i.payload.messageType;switch(r){case o.TEXT_EDITOR_STATE_REQUEST:case o.REQUEST_SET_SELECTION:case o.REQUEST_REPLACE_SELECTION:case o.REQUEST_SET_TEXT:case o.REQUEST_INSERT_TEXT:case o.REQUEST_PASTE_TEXT:case o.TEXT_EDITOR_REQUEST_ACTION:t({type:r,bridgeMessage:i})}}function eg(e,t){let i=eO(e);if(null==i)return;let r=i.payload.messageType;r===o.GIT_REFRESH_GITHUB_CONNECTION&&t({type:r,bridgeMessage:i})}function eA(e,t){let i=eO(e);if(null==i)return;let r=i.payload.messageType;r===o.PANE_RESPONSE&&t({type:r,paneResponse:i.payload.paneResponse})}function eL(e,t){let i=eO(e);if(null==i)return;let r=i.payload.messageType;r===o.TOUR&&t({type:r,tour:i.payload.tour})}function eb(e,t){let i=eO(e);if(null==i)return;let r=i.payload.messageType;switch(r){case o.SET_KEYBOARD_STATE:t({type:r,keyboardState:i.payload});break;case o.WORKSPACE_REQUEST_ACTION:t({type:r,action:i.payload.action});break;case o.WORKSPACE_REQUEST_OPEN_PANE:t({type:r,id:i.messageId,paneType:i.payload.paneType})}}function em(e,t){let i=eO(e);if(!i)return;let r=i.payload.messageType;r===o.PAYING_STATUS_CHANGED&&t({type:r})}function ev(e,t){let i=eO(e);i&&i.payload.messageType===o.OWNER_CONTEXT_CHANGED&&t(i.payload)}function eN(e,t){let i=eO(e);if(!i)return;let r=i.payload.messageType;r===o.APP_ACTIVITY_STATE&&t({type:r,state:i.payload.state})}let eP=!1,ef=null,eU=[];function eC(e,t){let i={protocolVersion:"1",messageDirection:l.TO_NATIVE,messageId:t,payload:e};if("ReactNativeWebView"in window&&null!=window.ReactNativeWebView&&window.ReactNativeWebView.postMessage)try{window.ReactNativeWebView.postMessage(JSON.stringify(i)),eP=!0,ef=Date.now(),eU.length>0&&(ed.logger.info("Bonsai webview crash recovered",{bridgeMessage:i,bridgeLastCrashMissedMessages:eU}),eU=[])}catch(t){let e={errorMessage:t instanceof Error?t.message:String(t),errorStack:t instanceof Error?t.stack:void 0,bridgeMessage:i,bridgeWasEverAvailable:eP,bridgeLastSuccessTime:ef,bridgeLastCrashMissedMessages:eU,bonsaiWebviewCrash:!0};ed.logger.error("Bonsai webview crash",e),(0,ed.datadogRumError)(t,e),eU.length<10||eU.shift(),eU.push(i)}else window.postMessage(i,window.origin),ed.logger.info("Bonsai webview bridge unavailable",{bridgeMessage:i,bridgeWasEverAvailable:eP,bridgeLastSuccessTime:ef,bonsaiWebviewUnavailable:!0})}function eI(e){let t=e??(0,a.v4)();eC({messageType:o.ERROR},t)}function eh(e=(0,a.v4)()){eC({messageType:o.ACK},e)}e.s(["bonsaiActiveStateBridgeMessageHandler",()=>eN,"gitBridgeMessageHandler",()=>eg,"ownerContextChangedBridgeMessageHandler",()=>ev,"paneResponseBridgeMessageHandler",()=>eA,"payingStatusChangedBridgeMessageHandler",()=>em,"sendAckMessage",()=>eh,"sendErrorMessage",()=>eI,"sendMessage",()=>eC,"textEditorBridgeMessageHandler",()=>eR,"tourBridgeMessageHandler",()=>eL,"workspaceBridgeMessageHandler",()=>eb],479407)}]);

//# debugId=b37da3ae-cc97-9a1e-efd0-c01ad1683bd1
//# sourceMappingURL=e1bebf447bb11804.js.map