;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="5ed1a71b-6e84-4529-9ecc-517d901c3cbc")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,670413,e=>{"use strict";var t,r=e.i(569910),n=((t={}).ALT_KEY="ALT_KEY",t.SHIFT_KEY="SHIFT_KEY",t.CMD_OR_CTRL_KEY="CMD_OR_CTRL_KEY",t.RETURN_OR_ENTER_KEY="RETURN_OR_ENTER_KEY",t);function i(e,t){switch(e){case"ALT_KEY":return t?"⌥":"Alt";case"SHIFT_KEY":return t?"⇧":"Shift";case"CMD_OR_CTRL_KEY":return t?"⌘":"Ctrl";case"RETURN_OR_ENTER_KEY":return t?"Return":"Enter";default:(0,r.default)(e)}}e.s(["KeyChar",()=>n,"getCmdOrCtrl",0,e=>window.navigator.userAgent.includes("Macintosh")?e.metaKey||e?.key==="Meta":e.ctrlKey||e?.key==="Control","getKeyCharTextForPlatform",()=>i])},290308,(e,t,r)=>{t.exports=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}},529810,574831,e=>{"use strict";var t=e.i(389959);let r=(0,t.createContext)(null);function n(){let e=(0,t.useContext)(r);if(!e)throw Error("Expected services in context");return e}e.s(["default",0,r],574831),e.s(["default",()=>n],529810)},296223,e=>{"use strict";var t=e.i(276385),r=e.i(389959),n=e.i(36654),i=e.i(269848),o=e.i(416298),a=e.i(205104),s=e.i(613355),l=e.i(91720),u=e.i(136540),c=e.i(396776),d=e.i(960178),p=e.i(625484);function h(e,t){let r=t;return"audio/wave"===r&&(r="audio/wav"),`data:${r};base64,${e}`}function f({fs:e,filePath:o}){let[l,c]=(0,r.useState)(null),[p,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let t=e.watchFile(o,{onChange:e=>{c(e.toString("base64")),h(!1)},onError:()=>{c(null),h(!1)},onMoveOrDelete:()=>{c(null),h(!1)}});return()=>{t(),h(!0),c(null)}},[e,o]);let f=(0,a.getMediaMime)(o);"audio/wave"===f&&(f="audio/wav");let m=l?`data:${f};base64,${l}`:"";return p?(0,t.jsx)(i.default,{}):l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{src:m,fileName:(0,a.getFileName)(o),mime:(0,a.getMediaMime)(o)}),(0,t.jsx)(u.IconButton,{alt:"Download",css:[s.rcss.position.absolute,s.rcss.bottom(8),s.rcss.right(8),s.rcss.p(16)],children:(0,t.jsx)("a",{href:`data:text/plain;base64,${l}`,download:(0,a.getFileName)(o),css:[s.rcss.color.foregroundDimmer],children:(0,t.jsx)(n.default,{})})})]}):(0,t.jsx)(d.Text,{multiline:!1,children:"Failed to load media file"})}let y=({src:e,fileName:r,mime:n=""})=>n.startsWith("video/")?(0,t.jsx)("video",{src:e,css:{maxHeight:"100%",maxWidth:"100%"},controls:!0,title:r}):n.startsWith("image/")?(0,t.jsx)("img",{alt:"Preview",src:e,css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}}):n.startsWith("audio/")?(0,t.jsx)("audio",{src:e,css:{maxHeight:"100%",maxWidth:"100%"},controls:!0,title:r}):"application/pdf"===n?(0,t.jsx)("object",{data:e,type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,t.jsxs)(p.View,{gap:16,align:"end",children:[(0,t.jsx)(c.StatusBanner,{colorway:"warning",icon:(0,t.jsx)(o.default,{}),text:"Your browser doesn't support displaying PDFs inside of Replit."}),(0,t.jsx)(l.ButtonLink,{href:e,referrerPolicy:"no-referrer",target:"_blank",text:"View PDF in new tab",size:"small",variant:"outlined",colorway:"primary",noNextLink:!0})]})}):(0,t.jsx)(d.Text,{multiline:!1,children:"File type not supported."});e.s(["Viewer",0,y,"default",()=>f,"getMediaSrc",()=>h])},701085,e=>{"use strict";var t,r,n,i=e.i(960933),o=e.i(862927);e.i(977195);var a=e.i(590467),s=e.i(282453),l=e.i(858248),u=e.i(709485);let c="reachability",d="reachability_targets";var p=((t=p||{})[t.Unknown=-1]="Unknown",t[t.Reachable=1]="Reachable",t[t.Unreachable=0]="Unreachable",t),h=((r=h||{}).ReplitDotCom="https://replit.com/data/__reachability",r.ReplitDotApp="https://reachability.replit.app/",r.ReplitDevJaneway="https://dotdevproxy.janeway.replit.dev/__reachability",r.ReplitDevKirk="https://dotdevproxy.kirk.replit.dev/__reachability",r.ReplitDevPicard="https://dotdevproxy.picard.replit.dev/__reachability",r.ReplitDevPike="https://dotdevproxy.pike.replit.dev/__reachability",r.ReplitDevRiker="https://dotdevproxy.riker.replit.dev/__reachability",r.ReplitDevSisko="https://dotdevproxy.sisko.replit.dev/__reachability",r.ReplitDevSpock="https://dotdevproxy.spock.replit.dev/__reachability",r.ReplitDevWesley="https://dotdevproxy.wesley.replit.dev/__reachability",r.ReplitDevWorf="https://dotdevproxy.worf.replit.dev/__reachability",r.ReplitDevArcher="https://dotdevproxy.archer.replit.dev/__reachability",r.ReplCoJaneway="https://dotdevproxy.janeway.repl.co/__reachability",r.ReplCoKirk="https://dotdevproxy.kirk.repl.co/__reachability",r.ReplCoPicard="https://dotdevproxy.picard.repl.co/__reachability",r.ReplCoPike="https://dotdevproxy.pike.repl.co/__reachability",r.ReplCoRiker="https://dotdevproxy.riker.repl.co/__reachability",r.ReplCoSisko="https://dotdevproxy.sisko.repl.co/__reachability",r.ReplCoSpock="https://dotdevproxy.spock.repl.co/__reachability",r.ReplCoWesley="https://dotdevproxy.wesley.repl.co/__reachability",r.ReplCoWorf="https://dotdevproxy.worf.repl.co/__reachability",r.ReplCoArcher="https://dotdevproxy.archer.repl.co/__reachability",r),f=((n=f||{})["replit.com"]="https://replit.com/data/__reachability",n["replit.app"]="https://reachability.replit.app/",n["janeway.replit.dev"]="https://dotdevproxy.janeway.replit.dev/__reachability",n["kirk.replit.dev"]="https://dotdevproxy.kirk.replit.dev/__reachability",n["picard.replit.dev"]="https://dotdevproxy.picard.replit.dev/__reachability",n["pike.replit.dev"]="https://dotdevproxy.pike.replit.dev/__reachability",n["riker.replit.dev"]="https://dotdevproxy.riker.replit.dev/__reachability",n["sisko.replit.dev"]="https://dotdevproxy.sisko.replit.dev/__reachability",n["spock.replit.dev"]="https://dotdevproxy.spock.replit.dev/__reachability",n["wesley.replit.dev"]="https://dotdevproxy.wesley.replit.dev/__reachability",n["worf.replit.dev"]="https://dotdevproxy.worf.replit.dev/__reachability",n["archer.replit.dev"]="https://dotdevproxy.archer.replit.dev/__reachability",n["janeway.repl.co"]="https://dotdevproxy.janeway.repl.co/__reachability",n["kirk.repl.co"]="https://dotdevproxy.kirk.repl.co/__reachability",n["picard.repl.co"]="https://dotdevproxy.picard.repl.co/__reachability",n["pike.repl.co"]="https://dotdevproxy.pike.repl.co/__reachability",n["riker.repl.co"]="https://dotdevproxy.riker.repl.co/__reachability",n["sisko.repl.co"]="https://dotdevproxy.sisko.repl.co/__reachability",n["spock.repl.co"]="https://dotdevproxy.spock.repl.co/__reachability",n["wesley.repl.co"]="https://dotdevproxy.wesley.repl.co/__reachability",n["worf.repl.co"]="https://dotdevproxy.worf.repl.co/__reachability",n["archer.repl.co"]="https://dotdevproxy.archer.repl.co/__reachability",n);let y=i.Type.Record(i.Type.Enum(h),i.Type.Enum(p,{default:-1}));async function m(){(0,a.isBrowserOnline)()||await new Promise(e=>{window.addEventListener("online",()=>{e(void 0)},{once:!0})})}async function v(e,t=1){let r,n,i=async r=>t<3?(await new Promise(e=>setTimeout(e,t*Math.random()*3e4)),v(e,t+1)):((0,l.track)(u.events.REACHABILITY_CHECKED,{success:!1,destination:e,error:r}),0);try{r=await fetch(e,{credentials:"omit",redirect:"error",referrerPolicy:"no-referrer",cache:"no-store"})}catch(e){return i(e.message)}if(200!==r.status)return i(`unexpected status: ${r.status}`);try{n=await r.text()}catch(e){return i(`failed to read body: ${e.message}`)}return"reachable"!==n.trim()?i(`unexpected body: ${n}`):((0,l.track)(u.events.REACHABILITY_CHECKED,{success:!0,destination:e}),1)}async function g(){if(!s.default.available()||"https://replit.com"!==window.location.origin)return;await new Promise(e=>setTimeout(e,3e4));let e=s.default.get(d,y),t=s.default.get(c,"number");if(e&&t&&new Date().getTime()-t<864e5)return;await m();let r=o.Value.Create(y);for(let e of Object.values(h))r[e]=await v(e);s.default.set(d,r),s.default.set(c,new Date().getTime())}function x(){if(!s.default.available())return o.Value.Create(y);let e=s.default.get(d,y);return o.Value.Cast(y,e)}function E(e){let t=-1;if(e){let r,n=e?new URL(e).hostname:void 0,i=n&&n?.split(".").length>=3?(r=n.split(".")).length>=6&&"teams"===r[r.length-3]?`${r[r.length-5]}.${r.slice(-2).join(".")}`:r.slice(-3).join("."):n,o=i?f[i]:void 0;t=o?x()[o]:-1}else t=x()["https://dotdevproxy.kirk.replit.dev/__reachability"];return 1===t||-1===t}e.s(["default",()=>g,"isDotDevReachable",()=>E])},736451,e=>{"use strict";var t=e.i(389959),r=e.i(781230);let n="(prefers-reduced-motion: no-preference)",i=()=>!window.matchMedia||!window.matchMedia(n).matches;function o(){let[e,o]=(0,t.useState)(i),a=(0,r.useIsSSR)();return(0,t.useEffect)(()=>{if(!window.matchMedia)return;let e=window.matchMedia(n),t=e=>{o(!e.matches)};if(e?.addEventListener)return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}},[]),!!a||e}e.s(["usePrefersReducedMotion",()=>o])},481088,e=>{"use strict";var t=e.i(276385),r=e.i(389959),n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=function(e){var t=e.animate,i=void 0===t||t,o=e.animateBegin,a=e.backgroundColor,s=void 0===a?"#f5f6f7":a,l=e.backgroundOpacity,u=void 0===l?1:l,c=e.baseUrl,d=void 0===c?"":c,p=e.children,h=e.foregroundColor,f=e.foregroundOpacity,y=e.gradientRatio,m=void 0===y?2:y,v=e.gradientDirection,g=e.uniqueKey,x=e.interval,E=e.rtl,b=e.speed,w=e.style,_=e.title,S=void 0===_?"Loading...":_,k=e.beforeMask,C=void 0===k?null:k,I=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}(e,["animate","animateBegin","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","gradientDirection","uniqueKey","interval","rtl","speed","style","title","beforeMask"]),R=g||Math.random().toString(36).substring(6),T=R+"-diff",O=R+"-animated-diff",L=R+"-aria",j="0; "+(void 0===x?.25:x)+"; 1",D=(void 0===b?1.2:b)+"s";return(0,r.createElement)("svg",n({"aria-labelledby":L,role:"img",style:n(n({},void 0===w?{}:w),void 0!==E&&E?{transform:"scaleX(-1)"}:null)},I),S?(0,r.createElement)("title",{id:L},S):null,C&&(0,r.isValidElement)(C)?C:null,(0,r.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+d+"#"+T+")",style:{fill:"url("+d+"#"+O+")"}}),(0,r.createElement)("defs",null,(0,r.createElement)("clipPath",{id:T},p),(0,r.createElement)("linearGradient",{id:O,gradientTransform:"top-bottom"===(void 0===v?"left-right":v)?"rotate(90)":void 0},(0,r.createElement)("stop",{offset:"0%",stopColor:s,stopOpacity:u},i&&(0,r.createElement)("animate",{attributeName:"offset",values:-m+"; "+-m+"; 1",keyTimes:j,dur:D,repeatCount:"indefinite",begin:o})),(0,r.createElement)("stop",{offset:"50%",stopColor:void 0===h?"#eee":h,stopOpacity:void 0===f?1:f},i&&(0,r.createElement)("animate",{attributeName:"offset",values:-m/2+"; "+-m/2+"; "+(1+m/2),keyTimes:j,dur:D,repeatCount:"indefinite",begin:o})),(0,r.createElement)("stop",{offset:"100%",stopColor:s,stopOpacity:u},i&&(0,r.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+m),keyTimes:j,dur:D,repeatCount:"indefinite",begin:o})))))},o=function(e){return e.children?(0,r.createElement)(i,n({},e)):(0,r.createElement)(a,n({},e))},a=function(e){return(0,r.createElement)(o,n({viewBox:"0 0 476 124"},e),(0,r.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,r.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,r.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,r.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,r.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,r.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},s=e.i(736451);e.s(["default",0,({children:e,...r})=>{let n=!(0,s.usePrefersReducedMotion)()&&!1!==r.animate;return(0,t.jsx)(o,{...r,animate:n,children:e})}],481088)},253344,e=>{"use strict";var t=e.i(960933);function r(e){return e}function n(e){return e}function i(e){return e}Symbol("extensionId"),Symbol("installationId"),Symbol("extensionCommandId"),t.Type.Record(t.Type.String(),t.Type.Object({extensionId:t.Type.String(),fileHandlerId:t.Type.String()})),e.s(["asExtensionCommandId",()=>i,"asExtensionId",()=>r,"asInstallationId",()=>n])},634707,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=function(e,t){return -1!==e.indexOf(t)},t.exports=r.default,t.exports.default=r.default},319122,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,n.default)(e),!e||/[\s<>]/.test(e)||0===e.indexOf("mailto:")||(t=(0,l.default)(t,d)).validate_length&&e.length>t.max_allowed_length||!t.allow_fragments&&(0,o.default)(e,"#")||!t.allow_query_components&&((0,o.default)(e,"?")||(0,o.default)(e,"&")))return!1;var r,u,h,f,y,m,v,g,x=(e=(v=(e=(v=e.split("#")).shift()).split("?")).shift()).match(/^([a-z][a-z0-9+\-.]*):/i),E=!1,b=function(n){return E=!0,r=n.toLowerCase(),(!t.require_valid_protocol||-1!==t.protocols.indexOf(r))&&e.substring(x[0].length)};if(x){var w=x[1],_=e.substring(x[0].length);if("//"===_.slice(0,2)){if(!1===(e=b(w)))return!1}else{var S=_.indexOf("/"),k=-1===S?_:_.substring(0,S),C=k.indexOf("@");if(-1!==C){var I=k.substring(0,C);if(/^[a-zA-Z0-9\-_.%:]*$/.test(I)){if(t.require_protocol)return!1}else if(!1===(e=b(w)))return!1}else if(/^[0-9]/.test(_)){if(t.require_protocol)return!1}else if(!1===(e=b(w)))return!1}}else if(t.require_protocol)return!1;if("//"===e.slice(0,2)){if(!E&&!t.allow_protocol_relative_urls)return!1;e=e.slice(2)}if(""===e)return!1;if(""===(e=(v=e.split("/")).shift())&&!t.require_host)return!0;if((v=e.split("@")).length>1){if(t.disallow_auth||""===v[0]||(u=v.shift()).indexOf(":")>=0&&u.split(":").length>2)return!1;var R,T=function(e){if(Array.isArray(e))return e}(R=u.split(":"))||function(e,t){var r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{o=(r=r.call(e)).next,!1;for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(R,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,2):void 0}}(R,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),O=T[0],L=T[1];if(""===O&&""===L)return!1}f=v.join("@"),m=null,g=null;var j=f.match(p);if(j?(h="",g=j[1],m=j[2]||null):(h=(v=f.split(":")).shift(),v.length&&(m=v.join(":"))),null!==m&&m.length>0){if(y=parseInt(m,10),!/^[0-9]+$/.test(m)||y<=0||y>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?(0,i.default)(h,t.host_whitelist):""===h&&!t.require_host||(!!(0,s.default)(h)||!!(0,a.default)(h,t)||!!g&&!!(0,s.default)(g,6))&&(h=h||g,!(t.host_blacklist&&(0,i.default)(h,t.host_blacklist)))};var n=u(e.r(669996)),i=u(e.r(35073)),o=u(e.r(634707)),a=u(e.r(919872)),s=u(e.r(97982)),l=u(e.r(718435));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},p=/^\[([^\]]+)\](?::([0-9]+))?$/;t.exports=r.default,t.exports.default=r.default},257888,(e,t,r)=>{t.exports=function(e){var t;if("string"!=typeof e||""===e)return!1;for(;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},884244,(e,t,r)=>{var n=e.r(257888),i={"{":"}","(":")","[":"]"},o=function(e){if("!"===e[0])return!0;for(var t=0,r=-2,n=-2,o=-2,a=-2,s=-2;t<e.length;){if("*"===e[t]||"?"===e[t+1]&&/[\].+)]/.test(e[t])||-1!==n&&"["===e[t]&&"]"!==e[t+1]&&(n<t&&(n=e.indexOf("]",t)),n>t)&&(-1===s||s>n||-1===(s=e.indexOf("\\",t))||s>n)||-1!==o&&"{"===e[t]&&"}"!==e[t+1]&&(o=e.indexOf("}",t))>t&&(-1===(s=e.indexOf("\\",t))||s>o)||-1!==a&&"("===e[t]&&"?"===e[t+1]&&/[:!=]/.test(e[t+2])&&")"!==e[t+3]&&(a=e.indexOf(")",t))>t&&(-1===(s=e.indexOf("\\",t))||s>a)||-1!==r&&"("===e[t]&&"|"!==e[t+1]&&(r<t&&(r=e.indexOf("|",t)),-1!==r&&")"!==e[r+1]&&(a=e.indexOf(")",r))>r)&&(-1===(s=e.indexOf("\\",r))||s>a))return!0;if("\\"===e[t]){var l=e[t+1];t+=2;var u=i[l];if(u){var c=e.indexOf(u,t);-1!==c&&(t=c+1)}if("!"===e[t])return!0}else t++}return!1},a=function(e){if("!"===e[0])return!0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return!0;if("\\"===e[t]){var r=e[t+1];t+=2;var n=i[r];if(n){var o=e.indexOf(n,t);-1!==o&&(t=o+1)}if("!"===e[t])return!0}else t++}return!1};t.exports=function(e,t){if("string"!=typeof e||""===e)return!1;if(n(e))return!0;var r=o;return t&&!1===t.strict&&(r=a),r(e)}},9293,198769,316953,e=>{"use strict";var t=e.i(960933),r=e.i(862927),n=e.i(686040),i=e.i(884244),o=e.i(84466),a=e.i(319122);let s=[{key:"read",friendlyName:"Read files",description:"Read any file in your App"},{key:"write-exec",friendlyName:"Write & Execute",description:"Write to any file in your App and execute any code"},{key:"repldb:read",friendlyName:"ReplDB Read",description:"Read any key, or list all keys under any prefix in the repldb belonging to your App"},{key:"repldb:write",friendlyName:"ReplDB Write",description:"Write or delete any key in the repldb belonging to your App"},{key:"experimental-api",friendlyName:"Experimental APIs",description:"Use experimental APIs that may be unstable, change in behavior, or be removed entirely"}],l=s.map(e=>e.key);e.s(["scopeNames",0,l,"scopes",0,s],198769);var u=e.i(837399);let c=t.Type.String({minLength:1,maxLength:64}),d=t.Type.Object({path:t.Type.String({minLength:1}),label:t.Type.String({minLength:1})}),p=t.Type.Object({image:(0,u.Nullish)(t.Type.String({minLength:1})),title:t.Type.String({minLength:1,maxLength:60}),body:t.Type.String({minLength:1,maxLength:512})}),h=t.Type.Object({glob:t.Type.String({minLength:1}),handler:t.Type.String({minLength:1}),name:(0,u.Nullish)(t.Type.String({minLength:1})),icon:(0,u.Nullish)(t.Type.String({minLength:1}))}),f=t.Type.Object({handler:t.Type.String({minLength:1}),name:(0,u.Nullish)(t.Type.String({minLength:1})),icon:(0,u.Nullish)(t.Type.String({minLength:1}))}),y=t.Type.Union(l.map(e=>t.Type.Literal(e))),m=t.Type.Object({name:y,reason:t.Type.String()}),v=t.Type.Object({page:t.Type.String()}),g=t.Type.Object({name:t.Type.String({minLength:1,maxLength:60}),description:t.Type.String({minLength:1,maxLength:255}),scopes:(0,u.Nullish)(t.Type.Array(m)),longDescription:(0,u.Nullish)(t.Type.String({minLength:1})),icon:(0,u.Nullish)(t.Type.String({minLength:1})),tags:(0,u.Nullish)(t.Type.Array(c,{maxItems:16})),coverImages:(0,u.Nullish)(t.Type.Array(d,{maxItems:16})),fileHandlers:(0,u.Nullish)(t.Type.Array(h,{maxItems:4})),tools:(0,u.Nullish)(t.Type.Array(f,{maxItems:4})),website:(0,u.Nullish)(t.Type.String()),authorEmail:(0,u.Nullish)(t.Type.String()),background:(0,u.Nullish)(v),features:(0,u.Nullish)(t.Type.Array(p,{minItems:1,maxItems:10}))});function x(e){let t=(t,r,n)=>({manifest:null,error:new u.TypeboxError([{type:r,schema:g,path:t,value:e,message:n,errors:[]}])});if(r.Value.Check(g,e)){if(e.website&&!(0,a.default)(e.website))return t("website",n.ValueErrorType.StringFormat,"website must be a valid url");if(e.authorEmail&&!(0,o.default)(e.authorEmail))return t("authorEmail",n.ValueErrorType.StringFormat,"authorEmail must be a valid email");let r=e.fileHandlers??[];for(let[e,o]of r.entries())if(!(0,i.default)(o.glob))return t(`fileHandlers[${e}].glob`,n.ValueErrorType.StringFormat,"glob must be a valid glob pattern");if(r&&r.length>1){for(let[e,i]of r.entries())if(!(i.icon&&i.name))return t(`fileHandlers[${e}]`,n.ValueErrorType.ObjectRequiredProperty,"When at least two fileHandlers are provided, they must all specify a name and icon")}let s=e.tools??[];if(s&&s.length>1){for(let[e,r]of s.entries())if(!(r.icon&&r.name))return t(`tool[${e}]`,n.ValueErrorType.ObjectRequiredProperty,"When at least two tools are provided, they must all specify a name and icon")}return{manifest:e,error:null}}return{manifest:null,error:(0,u.validationErrors)(g,e)}}function E(e){let t=x(e);if(t.manifest)return t.manifest;throw t.error}function b(e={}){return{name:e.name??"Unnamed Extension",description:e.description??"(no description)"}}function w(e,t){return!!e.scopes&&void 0!==e.scopes.find(e=>e.name===t)}function _(e){let t;if(!e)throw Error("Expected baseUrl");try{t=new URL(e)}catch(e){throw Error("baseUrl failed to parse as URL")}if("https:"!==t.protocol)throw Error("baseUrl must use https");return t.href.replace(/\/$/,"")}function S(e){return k(e,"extension.json")}function k(e,t){return new URL(t,_(e)).href}e.s(["asManifest",()=>E,"createDefaultManifest",()=>b,"hasScope",()=>w,"parseManifestOrError",()=>x],316953),e.s(["getAssetUrl",()=>k,"getManifestUrl",()=>S,"getValidBaseUrlOrThrow",()=>_],9293)},692043,e=>{"use strict";var t=e.i(973245);let r=t.gql`
    fragment TopLevelExtensionUser on User {
  __typename
  id
  username
  displayName
  image
  url
}
    `,n=t.gql`
    fragment TopLevelExtensionManifest on ExtensionManifest {
  __typename
  name
  description
  scopes {
    name
    reason
  }
  icon
  tags
  fileHandlers {
    glob
    handler
    name
    icon
  }
  tools {
    handler
    name
    icon
  }
  background {
    page
  }
}
    `,i=t.gql`
    fragment TopLevelExtension on Extension {
  __typename
  id
  url
  name
  description
  user {
    id
    ...TopLevelExtensionUser
  }
  manifest {
    ... on ExtensionManifest {
      ...TopLevelExtensionManifest
    }
    ... on ExtensionManifestError {
      message
    }
  }
  installCount
  isBlessed
  isListed
  isFeatured
  isDisabled
  enableInternalApi
}
    ${r}
${n}`,o=t.gql`
    fragment TopLevelExtensionInstallation on ExtensionInstallation {
  __typename
  id
  repl {
    id
  }
  user {
    id
  }
  extension {
    id
    ...TopLevelExtension
  }
  installer {
    id
  }
}
    ${i}`,a=t.gql`
    query ExtensionSystemUserContext {
  currentUser {
    id
    isAdmin: hasRole(role: ADMIN)
    isStaff: hasRole(role: REPLIT_STAFF)
  }
}
    `,s=t.gql`
    query ExtensionInstallationById($installationId: String!) {
  extensionInstallationById(id: $installationId) {
    __typename
    ... on ExtensionInstallation {
      ...TopLevelExtensionInstallation
    }
    ... on NotFoundError {
      message
    }
  }
}
    ${o}`,l=t.gql`
    query ExtensionInstallationsInRepl($replId: String!) {
  extensionInstallations(replId: $replId) {
    __typename
    ... on ExtensionInstallationList {
      installations {
        ...TopLevelExtensionInstallation
      }
    }
    ... on NotFoundError {
      message
    }
  }
}
    ${o}`,u=t.gql`
    mutation InstallExtension($extensionId: String!, $replId: String) {
  installExtension(extensionId: $extensionId, replId: $replId) {
    __typename
    ... on ExtensionInstallation {
      ...TopLevelExtensionInstallation
      extension {
        id
        installation(replId: $replId) {
          ...TopLevelExtensionInstallation
        }
      }
    }
    ... on UserError {
      message
    }
    ... on UnauthorizedError {
      message
    }
  }
}
    ${o}`,c=t.gql`
    mutation UninstallExtension($installationId: String!, $replId: String) {
  uninstallExtension(installationId: $installationId) {
    __typename
    ... on ExtensionInstallation {
      ...TopLevelExtensionInstallation
      extension {
        id
        installation(replId: $replId) {
          ...TopLevelExtensionInstallation
        }
      }
    }
    ... on NotFoundError {
      message
    }
    ... on UserError {
      message
    }
  }
}
    ${o}`;e.s(["ExtensionInstallationByIdDocument",0,s,"ExtensionInstallationsInReplDocument",0,l,"ExtensionSystemUserContextDocument",0,a,"InstallExtensionDocument",0,u,"TopLevelExtensionFragmentDoc",0,i,"TopLevelExtensionInstallationFragmentDoc",0,o,"UninstallExtensionDocument",0,c])},567807,915793,e=>{"use strict";e.i(221042);var t=/\s/,r=/[a-zA-Z_$][a-zA-Z0-9_$]*/,n=RegExp("^"+r.source+"$"),i=/^NaN|(?:[-+]?(?:(?:Infinity)|(?:0[xX][a-fA-F0-9]+)|(?:0[bB][01]+)|(?:0[oO][0-7]+)|(?:(?:(?:[1-9]\d*|0)?\.\d+|(?:[1-9]\d*|0)\.\d*|(?:[1-9]\d*|0))(?:[E|e][+|-]?\d+)?)))/;function o(e,t){return new c(e,t).value}function a(){}var s=function(e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);function r(){this.constructor=n}function n(t,r,n){var i=e.call(this,t)||this;return i.pos=r,i.loc=n,i}return n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r),n}(Error),l={b:"\b",n:"\n",f:"\f",r:"\r",t:"	",v:"\v",0:"\0"},u=/^[a-fA-F0-9]+$/,c=function(){function e(e,t){if(this.str=e,this.index=0,this.onComment=t&&t.onComment||a,this.onValue=t&&t.onValue||a,this.value=this.readValue(),this.allowWhitespaceOrComment(),this.index<this.str.length)throw Error("Unexpected character '"+this.peek()+"'")}return e.prototype.allowWhitespaceOrComment=function(){for(;this.index<this.str.length&&t.test(this.str[this.index]);)this.index++;var e=this.index;if(this.eat("/")){if(this.eat("/")){var r=this.readUntil(/(?:\r\n|\n|\r)/);this.onComment({start:e,end:this.index,type:"Comment",text:r,block:!1}),this.eat("\n")}else if(this.eat("*")){var r=this.readUntil(/\*\//);this.onComment({start:e,end:this.index,type:"Comment",text:r,block:!0}),this.eat("*/",!0)}this.allowWhitespaceOrComment()}},e.prototype.error=function(e,t){void 0===t&&(t=this.index);var r=function(e,t,r){var n,i,o,a,s,l,u;if("number"==typeof r)throw Error("locate takes a { startIndex, offsetLine, offsetColumn } object as the third argument");return(void 0===(n=r)&&(n={}),i=n.offsetLine||0,o=n.offsetColumn||0,a=e.split("\n"),s=0,l=a.map(function(e,t){var r=s+e.length+1,n={start:s,end:r,line:t};return s=r,n}),u=0,function(t,r){"string"==typeof t&&(t=e.indexOf(t,r||0));for(var n,a,s,c,d=l[u],p=t>=d.end?1:-1;d;){if(n=d,a=t,n.start<=a&&a<n.end)return s=d,c=t,{line:i+s.line,column:o+c-s.start,character:c};u+=p,d=l[u]}})(t,r&&r.startIndex)}(this.str,t,{offsetLine:1});throw new s(e,t,r)},e.prototype.eat=function(e,t){return this.str.slice(this.index,this.index+e.length)===e?(this.index+=e.length,e):(t&&this.error("Expected '"+e+"' instead of '"+this.str[this.index]+"'"),null)},e.prototype.peek=function(){return this.str[this.index]},e.prototype.read=function(e){var t=e.exec(this.str.slice(this.index));return t&&0===t.index?(this.index+=t[0].length,t[0]):null},e.prototype.readUntil=function(e){this.index>=this.str.length&&this.error("Unexpected end of input");var t=this.index,r=e.exec(this.str.slice(t));if(r){var n=this.index;return this.index=n+r.index,this.str.slice(n,this.index)}return this.index=this.str.length,this.str.slice(t)},e.prototype.readArray=function(){var e=this.index;if(!this.eat("["))return null;var t={start:e,end:null,type:"ArrayExpression",elements:[]};for(this.allowWhitespaceOrComment();"]"!==this.peek()&&(t.elements.push(this.readValue()),this.allowWhitespaceOrComment(),this.eat(","));)this.allowWhitespaceOrComment();return this.eat("]")||this.error("Expected ']' instead of '"+this.str[this.index]+"'"),t.end=this.index,t},e.prototype.readBoolean=function(){var e=this.index,t=this.read(/^(true|false)/);if(t)return{start:e,end:this.index,type:"Literal",raw:t,value:"true"===t}},e.prototype.readNull=function(){var e=this.index;if(this.eat("null"))return{start:e,end:this.index,type:"Literal",raw:"null",value:null}},e.prototype.readLiteral=function(){return this.readBoolean()||this.readNumber()||this.readString()||this.readNull()},e.prototype.readNumber=function(){var e=this.index,t=this.read(i);if(t){var r=t[0],n=+("-"===r||"+"===r?t.slice(1):t);return"-"===r&&(n=-n),{start:e,end:this.index,type:"Literal",raw:t,value:n}}},e.prototype.readObject=function(){var e=this.index;if(this.eat("{")){var t={start:e,end:null,type:"ObjectExpression",properties:[]};for(this.allowWhitespaceOrComment();"}"!==this.peek()&&(t.properties.push(this.readProperty()),this.allowWhitespaceOrComment(),this.eat(","));)this.allowWhitespaceOrComment();return this.eat("}",!0),t.end=this.index,t}},e.prototype.readProperty=function(){this.allowWhitespaceOrComment();var e={start:this.index,end:null,type:"Property",key:this.readPropertyKey(),value:this.readValue()};return e.end=this.index,e},e.prototype.readIdentifier=function(){var e=this.index,t=this.read(r);if(t)return{start:e,end:this.index,type:"Identifier",name:t}},e.prototype.readPropertyKey=function(){var e=this.readString()||this.readIdentifier();return e||this.error("Bad identifier as unquoted key"),"Literal"===e.type&&(e.name=String(e.value)),this.allowWhitespaceOrComment(),this.eat(":",!0),e},e.prototype.readString=function(){var e=this.index,t=this.eat("'")||this.eat('"');if(t){for(var r=!1,n="";this.index<this.str.length;){var i=this.str[this.index++];if(r){if(r=!1,"\n"===i)continue;if("\r"===i){"\n"===this.str[this.index]&&(this.index+=1);continue}if("x"===i||"u"===i){var o=this.index,a=this.index+="x"===i?2:4,s=this.str.slice(o,a);u.test(s)||this.error("Invalid "+("x"===i?"hexadecimal":"Unicode")+" escape sequence",o),n+=String.fromCharCode(parseInt(s,16))}else n+=l[i]||i}else if("\\"===i)r=!0;else if(i===t){var a=this.index;return{start:e,end:a,type:"Literal",raw:this.str.slice(e,a),value:n}}else"\n"===i&&this.error("Bad string",this.index-1),n+=i}this.error("Unexpected end of input")}},e.prototype.readValue=function(){this.allowWhitespaceOrComment();var e=this.readArray()||this.readObject()||this.readLiteral();if(e)return this.onValue(e),e;this.error("Unexpected EOF")},e}();function d(e){return function e(t){if("Literal"===t.type)return t.value;if("ArrayExpression"===t.type)return t.elements.map(e);if("ObjectExpression"===t.type){var r={};return t.properties.forEach(function(t){r[t.key.name]=e(t.value)}),r}}(o(e))}var p={"'":"'",'"':'"',"\\":"\\","\b":"b","\f":"f","\n":"n","\r":"r","	":"t","\v":"v","\0":"0","\u2028":"u2028","\u2029":"u2029"},h=/['"\\\b\f\n\r\t\v\0\u2028\u2029]/g;function f(e,t){var r='"'===t?"'":'"';return t+e.replace(h,function(e){return e===r?e:"\\"+p[e]})+t}function y(e,t,r,i,o,a){return(n.test(e)?e:f(e,r))+": "+m(t,r,i,o,a)}function m(e,t,r,n,i){var o=typeof e;if("string"===o)return f(e,t);if("number"===o||"boolean"===o||null===e)return String(e);if(Array.isArray(e)){var a=e.map(function(e){return m(e,t,r+n,n,!0)});return i?"[\n"+(r+n)+a.join(",\n"+(r+n))+"\n"+r+"]":"[ "+a.join(", ")+" ]"}if("object"===o){var s=Object.keys(e).map(function(o){return y(o,e[o],t,r+n,n,i)});return i?"{"+(r+n)+s.join(","+(r+n))+r+"}":"{ "+s.join(", ")+" }"}throw Error("Cannot stringify "+o)}function v(e,r){var n={};n["'"]=0,n['"']=0;var i=function(e){var t=e.split("\n"),r=0,n=0,i=8;if(t.forEach(function(e){var t=/^(?: +|\t+)/.exec(e);if(t){var o=t[0];o.length!==e.length&&("	"===o[0]?r+=1:(n+=1,o.length>1&&o.length<i&&(i=o.length)))}}),!(n>r))return"	";for(var o="";i--;)o+=" ";return o}(e),a=o(e,{onValue:function(e){"Literal"===e.type&&"string"==typeof e.value&&(n[e.raw[0]]+=1)}}),s=n["'"]>n['"']?"'":'"',l=/\n/.test(e.slice(a.start,a.end))||"ArrayExpression"===a.type&&0===a.elements.length||"ObjectExpression"===a.type&&0===a.properties.length;return e.slice(0,a.start)+function e(r,n,i,o,a,s,l){var u=typeof n;if("string"===u)return"Literal"===r.type&&"string"==typeof r.value?f(n,r.raw[0]):f(n,s);if("number"===u){var c=r.raw,d=n,p=/^([-+])?0([boxBOX])/.exec(c);if(p&&d%1==0)return("+"===p[1]&&d>=0?"+":d<0?"-":"")+"0"+p[2]+Math.abs(d).toString("b"===p[2]||"B"===p[2]?2:"o"===p[2]||"O"===p[2]?8:"x"===p[2]||"X"===p[2]?16:null);var h=/^([-+])?(\.)?/.exec(c);return h&&h[0].length>0?("+"===h[1]&&d>=0?"+":d<0?"-":"")+(h[2]?String(Math.abs(d)).replace(/^0/,""):String(Math.abs(d))):String(d)}if("boolean"===u||null===n)return String(n);if(Array.isArray(n))return"ArrayExpression"===r.type?function(t,r,n,i,o,a,s){if(0===r.length)return 0===t.elements.length?n.slice(t.start,t.end):"[]";var l=g(n,t.start),u=""===l||/\n/.test(l);if(0===t.elements.length)return m(r,a,i,o,u);for(var c=0,d=t.start,p="",h=n.slice(t.start,t.end).split("\n").length>1;c<r.length;c+=1){var f=t.elements[c];f?(p+=n.slice(d,f.start)+e(f,r[c],n,i,o,a,h),d=f.end):h?p+=",\n"+(i+o)+m(r[c],a,i,o,!0):p+=", "+m(r[c],a,i,o,!1)}return c<t.elements.length&&(d=t.elements[t.elements.length-1].end),p+=n.slice(d,t.end)}(r,n,i,o,a,s,0):m(n,s,o,a,l);if("object"===u)return"ObjectExpression"===r.type?function(r,n,i,o,a,s,l){var u=Object.keys(n);if(0===u.length)return 0===r.properties.length?i.slice(r.start,r.end):"{}";var c={};r.properties.forEach(function(e){c[e.key.name]=e});var d=g(i,r.start),p=""===d||/\n/.test(d);if(0===r.properties.length)return m(n,s,o,a,p);for(var h=0,f=r.start,v="",x=/\n/.test(i.slice(r.start,r.end)),E=!1,b=i.slice(r.start,r.properties[0].start);h<r.properties.length;h+=1){var w=r.properties[h],_=n[w.key.name];o=function(e,r){for(;r>0&&!t.test(e[r-1]);)r-=1;for(var n=r;r>0&&t.test(e[r-1]);)r-=1;return e.slice(r,n)}(i,w.start),void 0!==_&&(v+=E?i.slice(f,w.value.start):b+i.slice(w.key.start,w.value.start),v+=e(w.value,_,i,o,a,s,x),E=!0),f=w.end}return u.forEach(function(e){if(!(e in c)){var t=n[e];v+=(E?","+(x?o:" "):b)+y(e,t,s,o,a,x),E=!0}}),v+=i.slice(f,r.end)}(r,n,i,o,a,s,0):m(n,s,o,a,l);throw Error("Cannot stringify "+u+"s")}(a,r,e,"",i,s,l)+e.slice(a.end)}function g(e,r){for(var n=r;r>0&&t.test(e[r]);)r-=1;return e.slice(r,n)}e.s(["evaluate",()=>d,"patch",()=>v],915793);var x=e.i(692043),E=e.i(9293),b=e.i(316953),w=e.i(173738);async function _({extensionId:e,replId:t}){if(!w.apolloClient)return{error:Error("expected apolloClient to be initialized"),result:null};let r=await w.apolloClient.mutate({mutation:x.InstallExtensionDocument,variables:{extensionId:e,replId:t}});if(r.errors&&r.errors.length>0)return{error:Error("Error when installing extension: "+r.errors.map(e=>e.message).join(", ")),result:null};let n=r.data?.installExtension;return n?n?.__typename==="UnauthorizedError"||n?.__typename==="UserError"?{error:Error("Error when installing extension: "+n.message),result:null}:n.extension?n.extension.url?{result:n,error:null}:{error:Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}:{error:Error("Error when installing extension: expected extension to be set"),result:null}:{error:Error("Error when installing extension: expected result"),result:null}}async function S({installationId:e,replId:t}){if(!w.apolloClient)return{error:Error("expected apolloClient to be initialized"),result:null};let r=await w.apolloClient.mutate({mutation:x.UninstallExtensionDocument,variables:{installationId:e,replId:t}});if(r.errors&&r.errors.length>0)return{error:Error("Error when uninstalling extension: "+r.errors.map(e=>e.message).join(", ")),result:null};let n=r.data?.uninstallExtension;return n?n?.__typename==="NotFoundError"||n?.__typename==="UserError"?{error:Error("Error when uninstalling extension: "+n.message),result:null}:{result:n,error:null}:{error:Error("Error when uninstalling extension: expected result"),result:null}}async function k(e,t=!1){if(!w.apolloClient)return{error:Error("expected apolloClient to be initialized"),result:null};let r=(await w.apolloClient.query({query:x.ExtensionInstallationByIdDocument,variables:{installationId:e},fetchPolicy:t?"network-only":"cache-first"})).data.extensionInstallationById;return"ExtensionInstallation"!==r.__typename?{error:Error("Expected to find extension installation"),result:null}:r.extension?{result:r,error:null}:{error:Error("Expected installation.extension"),result:null}}async function C(e){if(!w.apolloClient)return{error:Error("expected apolloClient to be initialized"),result:null};let t=(await w.apolloClient.query({query:x.ExtensionInstallationsInReplDocument,variables:{replId:e}})).data.extensionInstallations;return"ExtensionInstallationList"!==t.__typename?{error:Error("Expected to find ExtensionInstallationList"),result:null}:{result:t.installations,error:null}}async function I(e){let t=(0,E.getManifestUrl)(e);try{let e=await fetch(t),r=await e.text(),n=d(r),i=(0,b.parseManifestOrError)(n);if(i.error)return{error:i.error,result:null};return{result:i.manifest,error:null}}catch(e){if("SyntaxError"===e.name)return{error:Error("Error when fetching manifest: invalid JSON"),result:null};return{error:Error("Error when fetching manifest: "+e.message),result:null}}}async function R(){if(!w.apolloClient)return{error:Error("expected apolloClient to be initialized"),result:null};let e=(await w.apolloClient.query({query:x.ExtensionSystemUserContextDocument,fetchPolicy:"cache-first"})).data.currentUser;return e&&"CurrentUser"===e.__typename?{result:{userHasInternalApiEnabled:e.isAdmin||e.isStaff},error:null}:{error:Error("Expected to find CurrentUser"),result:null}}e.s(["getExtensionInstallation",()=>k,"getExtensionInstallationsInRepl",()=>C,"getExtensionManifest",()=>I,"getExtensionUserContext",()=>R,"installExtensionMutation",()=>_,"uninstallExtensionMutation",()=>S],567807)},468095,e=>{"use strict";var t=e.i(389959),r=e.i(82259);e.i(877212);var n=e.i(924908);e.i(925218);var i=e.i(267103),o=e.i(222342);function a({openPane:e,onError:a}){let s=(0,n.useChatter)(),{showError:l}=(0,o.default)(),u=(0,i.useObservable)(s.sessions.agent.current);return(0,t.useCallback)(async(t,n)=>{let{createNewSession:i}=n,o="string"==typeof t?{kind:"message",message:t,intent:r.MessageAction.AGENT}:t;try{let t=u;if(i||!t){let e=await s.sessions.create({sessionType:r.SessionType.AGENT_SESSION});if(!e.ok)throw Error("Failed to create Agent session");t=e.payload}e({type:"agentChat",data:{sessionId:t.id}}),await t.appendEvent(o)}catch(e){a?a(e):l(`Error ${i?"creating":"sending message to"} Agent chat: ${e instanceof Error?e.message:"Unknown error"}`)}},[s.sessions,u,e,l,a])}e.s(["useSendAgentMessage",()=>a])},82130,e=>{"use strict";var t=e.i(276385),r=e.i(116235);function n(e){return(0,t.jsx)(r.default,{...e,children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M19 2.25A2.75 2.75 0 0 1 21.75 5v14A2.75 2.75 0 0 1 19 21.75H5A2.75 2.75 0 0 1 2.25 19V5A2.75 2.75 0 0 1 5 2.25h14ZM5 3.75c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H5Z",clipRule:"evenodd"})})}e.s(["default",()=>n])},714260,e=>{"use strict";let t=(0,e.i(389959).createContext)(null);e.s(["default",0,t])},638472,e=>{"use strict";var t=e.i(792129),r=e.i(227062),n=e.i(627922),i=e.i(562563),o=e.i(960933);let a=o.Type.Object({token:o.Type.String()}),s="SERVER",l={codec:n.BinaryCodec,heartbeatIntervalMs:2500,heartbeatsUntilDead:4,sessionDisconnectGraceMs:15e3,connectionTimeoutMs:1e4,handshakeTimeoutMs:1e4};({...l,sessionDisconnectGraceMs:6e4});let u=[4002,4004],c={...l,baseIntervalMs:250,maxJitterMs:250,maxBackoffMs:32e3,attemptBudgetCapacity:5,budgetRestoreIntervalMs:500,isFatalConnectionError:e=>!!(e instanceof n.WebSocketCloseError&&u.includes(e.code))},d=r.RIVER_VERSION,p=n.ProtocolError;e.s(["PID2_SERVER_ID",0,s,"RIVER_VERSION",0,d,"RiverProtocolError",0,p,"default",0,function(e,r,n,o,l="info",u){let d=new i.WebSocketClientTransport(r,e,u?{...c,...u}:c);return d.bindLogger(o,l),{client:(0,t.createClient)(d,s,{eagerlyConnect:!1,connectOnInvoke:!1,handshakeOptions:(0,t.createClientHandshakeOptions)(a,async()=>({token:await n()}))}),transport:d}}],638472)},37292,57168,e=>{"use strict";var t=e.i(389959),r=e.i(131141),n=e.i(541793),i=e.i(161322),o=e.i(719518),a=e.i(561979),s=e.i(830675),l=e.i(858248),u=e.i(709485);let c={workspace:!0,bsod:!1},d="undefined-event-id";function p(e,t){let r=d;return s.withScope(n=>{n.setTags({...c,...t?.tags??{}}),t?.componentStack&&n.setContext("react",{componentStack:t.componentStack}),t?.extras&&n.setExtras(t.extras),r=s.captureException(e)||d}),r}function h(e,t){return(0,l.track)(u.events.WORKSPACE,{action:"workspace_crashed"}),(t=t??{}).tags={...t.tags,workspace:!0,bsod:!0},a.datadogRum.addError(e,{...t.tags}),p(e,t)}function f(e,t){return(t=t??{}).tags={...t.tags,workspace:!0,bsod:!1},p(e,t)}e.s(["captureFatalWorkspaceException",()=>h,"captureNonFatalWorkspaceException",()=>f],57168);let y=(0,n.atom)(null),m=(0,n.atom)(null,(e,t,{error:r,tags:n,extras:i,componentStack:o,origin:a})=>{let s={...n,origin:a};"statusCode"in r?s.statusCode=r.statusCode:"status"in r&&(s.statusCode=r.status),e(y)||t(y,{eventId:h(r,{tags:s,extras:i,componentStack:o}),error:r,componentStack:o,sentry:{tags:s,extras:i},origin:a})}),v=(0,n.atom)(null,(e,t)=>{t(y,null)}),g=(0,n.atom)(new Map);function x(){return(0,o.useAtomCallback)((0,t.useCallback)((e,t,{filePath:r})=>e(g).get(r),[]))}function E(){return(0,o.useAtomCallback)((0,t.useCallback)((e,t,{filePath:n,version:i})=>{t(g,e=>(0,r.produce)(e,e=>{e.set(n,i)}))},[]))}function b(){return(0,o.useAtomCallback)((0,t.useCallback)((e,t,{filePath:n})=>{t(g,e=>(0,r.produce)(e,e=>{e.delete(n)}))},[]))}function w(){return(0,i.useSetAtom)(m)}function _(){return[(0,i.useAtomValue)(y),w()]}function S(){return(0,i.useSetAtom)(v)}e.s(["useBsod",()=>_,"useClearBsod",()=>S,"useDeleteBsodFilePathVersion",()=>b,"useGetBsodFileVersionByPath",()=>x,"useSetBsodFilePathVersion",()=>E,"useThrowBsod",()=>w],37292)},545816,e=>{e.v({button:"ModalPleaseRefresh-module__Xw30la__button",closeButton:"ModalPleaseRefresh-module__Xw30la__closeButton",header:"ModalPleaseRefresh-module__Xw30la__header",root:"ModalPleaseRefresh-module__Xw30la__root"})},400081,376847,400082,e=>{"use strict";e.s(["Pid2Context",()=>P,"Pid2Provider",()=>B,"usePid2InternalsContextDoNotUseOrYouWillBeFired",()=>U],400081);var t=e.i(221042),r=e.i(276385),n=e.i(389959),i=e.i(830675),o=e.i(131141),a=e.i(161322),s=e.i(179104);e.i(977195);var l=e.i(590467),u=e.i(966983),c=e.i(638472),d=e.i(993796),p=e.i(289074),h=e.i(664152),f=e.i(441329),y=e.i(668106),m=e.i(116680),v=e.i(37292),g=e.i(750854),x=e.i(602686),E=e.i(820228),b=e.i(921521),w=e.i(140487),_=e.i(136540),S=e.i(739521),k=e.i(960178),C=e.i(625484),I=e.i(545816);let R=({isOpen:e,text:t,disableHomeButton:n,onDismiss:i})=>{let o=(0,g.useRouter)(),a=(0,f.isInBonsaiWebview)(o),s=(0,b.default)();return(0,r.jsx)(S.Modal,{preventClose:!0,isOpen:e,centered:!0,onRequestClose:()=>{},maxWidth:600,children:(0,r.jsxs)(C.View,{gap:16,clsx:I.default.root,children:[i?(0,r.jsx)(_.IconButton,{onClick:i,alt:"Close",clsx:I.default.closeButton,children:(0,r.jsx)(x.default,{size:16})}):null,(0,r.jsxs)(C.View,{row:!0,gap:16,align:"center",children:[(0,r.jsx)(E.default,{size:24}),(0,r.jsx)(k.Header,{clsx:I.default.header,level:2,variant:"subheadBig",children:"Please Refresh"})]}),(0,r.jsxs)(C.View,{pr:32,gap:16,children:[(0,r.jsx)(k.Text,{textWrap:"pretty",children:t??`Your connection to this App has been temporarily interrupted.
            Usually this is because of a network issue.`}),a?(0,r.jsx)(k.Text,{children:"If the issue continues please logout and re-login."}):null]}),(0,r.jsxs)(C.View,{row:!0,gap:16,children:[n||a||s?null:(0,r.jsx)(w.Button,{clsx:I.default.button,text:"Back to Home",onClick:()=>{o.push("/home","~/")}}),(0,r.jsx)(w.Button,{text:"Refresh",colorway:"primary",clsx:I.default.button,onClick:()=>{window.location.reload()}})]})]})})};e.s(["default",0,R],376847);var T=e.i(735744),O=e.i(386962),L=e.i(635984);let j=(e,t,r)=>{if(h.logger[r??"info"](e,{river:t,riverTarget:"pid2",riverVersion:c.RIVER_VERSION}),t?.tags?.includes("invariant-violation")){let r=Error(e);i.withScope(e=>{e.setTag("pid2",!0),e.setExtras(t),i.captureException(r)})}},D=window.location.search.includes("debug=1")?(e,t,r)=>{console[r??"info"](e,t),j(e,t,r)}:j;async function A(e){return await (0,y.default)({replId:e,isLoggedIn:!0,requestedPid2Version:await (0,L.getPid2Version)(),format:u.api.token.ReplToken.WireFormat.RIVER,overrideClusterMetadata:await (0,m.default)()})}function M({currentUsername:e,replId:l,children:u}){let d=(0,v.useThrowBsod)(),h=(0,a.useSetAtom)(p.connectionStateAtom),y=(0,a.useSetAtom)(p.connectionKillActionsAtom),m=(0,T.default)(),[g,x]=(0,n.useState)(null),[E,b]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let[r,n]=function({clientId:e,replId:r,isClientActiveObservable:n,isMobile:i,onProtocolError:o,onRetryBudgetExhausted:a,logLevel:s,overrideLog:l,overrideGetWs:u,overrideGetToken:d}){let p;async function h(){let e=await A(r);return p=e.token,new WebSocket(e.wsURL)}let f=(0,c.default)(e,async()=>{let e=Date.now();return D("pid2: getting ws"),(u??h)(r).finally(()=>{D("pid2: ws open",{extras:{duration:Date.now()-e}})})},d??function(){return p},l??D,s,t.default.env.CI?{connectionTimeoutMs:6e4,handshakeTimeoutMs:6e4,sessionDisconnectGraceMs:12e4}:i?{sessionDisconnectGraceMs:6e4}:{}),y=(0,O.setupRiverTransport)({logContext:{target:"pid2"},transport:f.transport,serverId:c.PID2_SERVER_ID,isClientActiveObservable:n,onRetryBudgetExhausted:a,onProtocolError:o,log:l??D});return[f,y.dispose]}({clientId:`${e}-${(0,s.nanoid)(4)}`,replId:l,isClientActiveObservable:m,isMobile:(0,f.isInBonsaiWebviewWindow)(),onRetryBudgetExhausted:()=>{D("pid2: retry budget exhausted",{},"warn"),b(!0),h((0,o.produce)(e=>{e.pid2="fatal"}))},onProtocolError:e=>{if(i.addBreadcrumb({category:"pid2",message:"protocol error",data:e}),e.type===c.RiverProtocolError.HandshakeFailed){b(!0),h((0,o.produce)(e=>{e.pid2="fatal"}));return}d({error:Error(e.message),tags:{pid2:!0},origin:"pid2: RiverClientProvider",extras:e})},logLevel:"info"});return x(r),y((0,o.produce)(e=>{e.pid2={label:"Close WebSocket",action:()=>{let e=r.transport.sessions.get(c.PID2_SERVER_ID);e?.state!=="Connected"?console.warn("Cannot close WebSocket: session is not connected"):(console.log("pid2: closing WebSocket connection",e.conn.ws),e.conn.ws.close())}}})),()=>{x(null),n(),y((0,o.produce)(e=>{e.pid2=null}))}},[e,l,d,h,y,m]),(0,r.jsxs)(P.Provider,{value:g,children:[(0,r.jsx)(R,{isOpen:E}),u]})}let P=(0,n.createContext)(null);function U(){return(0,n.useContext)(P)}function B({currentUsername:e,replId:t,children:n}){return(0,d.useFlag)({controlName:"flag-new-connection-manager",type:"boolean",default:!1})?(0,r.jsx)(M,{replId:t,currentUsername:e,children:n}):(0,r.jsx)($,{replId:t,currentUsername:e,children:n})}let N=(e,t,r)=>{if(h.logger[r??"info"](e,{river:t,riverTarget:"pid2",riverVersion:c.RIVER_VERSION}),t?.tags?.includes("invariant-violation")){let r=Error(e);i.withScope(e=>{e.setTag("pid2",!0),e.setExtras(t),i.captureException(r)})}},V=window.location.search.includes("debug=1")?(e,t,r)=>{console[r??"info"](e,t),N(e,t,r)}:N;async function W(e){return await (0,y.default)({replId:e,isLoggedIn:!0,requestedPid2Version:await (0,L.getPid2Version)(),format:u.api.token.ReplToken.WireFormat.RIVER,overrideClusterMetadata:await (0,m.default)()})}function $({currentUsername:e,replId:u,children:d}){let h=(0,v.useThrowBsod)(),[y,m]=(0,n.useState)(!1),g=(0,a.useSetAtom)(p.connectionStateAtom),x=(0,a.useSetAtom)(p.connectionKillActionsAtom),[E,b]=(0,n.useState)(null),w=(0,n.useRef)({});return(0,n.useEffect)(()=>{let r=`${e}-${(0,s.nanoid)(4)}`,[n,a]=function({clientId:e,replId:r,isMobile:n,onSessionStatusChange:i,onSessionTransitionChange:o,onProtocolError:a,onRetryBudgetExhausted:s,logLevel:u,overrideLog:d,overrideGetWs:p,overrideGetToken:h}){let f;async function y(){let e=await W(r);return f=e.token,new WebSocket(e.wsURL)}let m=(0,c.default)(e,async()=>{let e=Date.now();return V("pid2: getting ws"),(p??y)(r).finally(()=>{V("pid2: ws open",{extras:{duration:Date.now()-e}})})},h??function(){return f},d??V,u,t.default.env.CI?{connectionTimeoutMs:6e4,handshakeTimeoutMs:6e4,sessionDisconnectGraceMs:12e4}:n?{sessionDisconnectGraceMs:6e4}:{});function v(){V("pid2: visibility: attempting connection"),m.transport.reconnectOnConnectionDrop=!0,m.transport.connect(c.PID2_SERVER_ID)}function g(){V("pid2: visibility: disabling reconnect"),m.transport.reconnectOnConnectionDrop=!1}function x(e){i?.(e),"closed"===e.status&&setTimeout(()=>{"visible"===document.visibilityState&&"open"===m.transport.getStatus()&&v()},0)}function E(e){o?.(e)}function b(e){if(e.type===c.RiverProtocolError.RetriesExceeded){g(),m.transport.retryBudget.startRestoringBudget(),"visible"===document.visibilityState&&s();return}a(e),m.transport.close()}function w(){"visible"===document.visibilityState&&v()}return m.transport.addEventListener("protocolError",b),m.transport.addEventListener("sessionStatus",x),m.transport.addEventListener("sessionTransition",E),document.addEventListener("visibilitychange",w),window.addEventListener("online",v),window.addEventListener("offline",g),(0,l.isBrowserOnline)()&&v(),[m,()=>{m.transport.removeEventListener("sessionStatus",x),m.transport.removeEventListener("sessionTransition",E),m.transport.removeEventListener("protocolError",b),m.transport.close(),document.removeEventListener("visibilitychange",w),window.removeEventListener("online",v),window.removeEventListener("offline",g)}]}({clientId:r,replId:u,isMobile:(0,f.isInBonsaiWebviewWindow)(),onRetryBudgetExhausted:()=>{V("pid2: retry budget exhausted",{},"warn"),m(!0),g((0,o.produce)(e=>{e.pid2="fatal"}))},onSessionStatusChange:e=>{"created"===e.status?(w.current.sessionStart=Date.now(),V("pid2: session started",{sessionId:e.session.id,clientId:r})):"closed"===e.status&&w.current.sessionStart&&V("pid2: session ended",{sessionId:e.session.id,clientId:r,extras:{sessionDuration:Date.now()-w.current.sessionStart}}),("created"===e.status||"closed"===e.status)&&i.addBreadcrumb({category:"pid2",message:`session ${e.status}`,data:e})},onSessionTransitionChange:e=>{"Connecting"===e.state&&(w.current.connectionStart=Date.now(),V("pid2: connecting",{sessionId:e.id,clientId:r})),"Handshaking"===e.state&&(w.current.handshakeStart=Date.now()),"Connected"===e.state&&(w.current.connectionStart&&w.current.handshakeStart&&V("pid2: connected",{sessionId:e.id,clientId:r,extras:{...w.current,connectionDuration:w.current.handshakeStart-w.current.connectionStart,handshakeDuration:Date.now()-w.current.handshakeStart,totalDuration:Date.now()-w.current.connectionStart}}),w.current.connectionStart=void 0,w.current.handshakeStart=void 0),"NoConnection"===e.state&&(V("pid2: no connection"),w.current.connectionStart=void 0,w.current.handshakeStart=void 0),i.addBreadcrumb({category:"pid2",message:`session transition ${e.state}`,data:e})},onProtocolError:e=>{if(i.addBreadcrumb({category:"pid2",message:"protocol error",data:e}),e.type===c.RiverProtocolError.HandshakeFailed){m(!0),g((0,o.produce)(e=>{e.pid2="fatal"}));return}h({error:Error(e.message),tags:{pid2:!0},origin:"pid2: RiverClientProvider",extras:e})},logLevel:"info"});return b(n),x((0,o.produce)(e=>{e.pid2={label:"Close WebSocket",action:()=>{let e=n.transport.sessions.get(c.PID2_SERVER_ID);e?.state!=="Connected"?console.warn("Cannot close WebSocket: session is not connected"):(console.log("pid2: closing WebSocket connection",e.conn.ws),e.conn.ws.close())}}})),()=>{b(null),a(),x((0,o.produce)(e=>{e.pid2=null}))}},[e,u,h,g,x]),(0,r.jsxs)(P.Provider,{value:E,children:[(0,r.jsx)(R,{isOpen:y}),d]})}var q=e.i(971131);function F(){let e=U(),[t,r]=(0,n.useState)(null),i=(0,n.useRef)(null),o=(0,n.useRef)(null),a=e=>{i.current=e,r(e)};return(0,n.useEffect)(()=>{if(!e)return;function t(e){let t=Symbol("pid2-close");o.current=t,queueMicrotask(()=>{o.current!==t||e&&i.current?.id!==e||(0,q.flushSync)(()=>{a(null)})})}function r(e){o.current=null,"created"===e.status?a({id:e.session.id,from:e.session.from,to:e.session.to}):"closed"===e.status&&t(e.session.id)}let n=e.transport.sessions.get(c.PID2_SERVER_ID);return n&&r({status:"created",session:n}),e.transport.addEventListener("sessionStatus",r),()=>{t(),e.transport.removeEventListener("sessionStatus",r)}},[e]),t}e.s(["usePid2Session",()=>F],400082)},207237,e=>{"use strict";var t=e.i(389959),r=e.i(714260);function n(){let e=(0,t.useContext)(r.default);if(!e)throw Error("Expected Repl ID to be in context");return e}e.s(["default",()=>n])},927158,e=>{"use strict";var t=e.i(389959),r=e.i(400081),n=e.i(400082);function i(e,o=[]){let a=(0,r.usePid2InternalsContextDoNotUseOrYouWillBeFired)(),s=(0,n.usePid2Session)();return(0,t.useMemo)(()=>a&&s?e(a.client,s):null,[a,s,...o])}e.s(["usePid2Callback",()=>i])}]);

//# debugId=5ed1a71b-6e84-4529-9ecc-517d901c3cbc
//# sourceMappingURL=8d642254ca3e7064.js.map