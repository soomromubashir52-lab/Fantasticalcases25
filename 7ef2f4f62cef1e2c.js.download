;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0f93767e-1057-f389-2847-3692de8c673f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,417120,215969,e=>{"use strict";var t=e.i(389959),n=e.i(82259);e.i(877212);var r=e.i(924908),i=e.i(165680);e.i(925218);var o=e.i(267103),a=e.i(641555);let s={direction:"reverse",state:{isMostRecentMessageFromUser:!1},map:e=>e.isMostRecentMessageFromUser,reducer:(e,t)=>(e.sender.type===n.UserType.USER?t.isMostRecentMessageFromUser=!0:t.isMostRecentMessageFromUser=!1,!1)};function u({sessionId:e}){let t=(0,r.useChatter)(),n=(0,a.useObservableMemo)(()=>e?t.sessions.get(e):null,[t,e],{default:null});return(0,a.useObservableMemo)(()=>n?.reduce(s,1),[n],{default:!1})}function l(){let e=(0,r.useChatter)(),a=(0,o.useObservable)(e.sessions.agent.current),s=(0,i.useSetAgentPausedByUser)(),u=(0,t.useCallback)(e=>{a?.agent.update(e),e===n.AgentRunState.AGENT_STATE_PAUSED&&s(!0)},[a,s]);return{agentState:a?.agent.state,updateAgentState:u}}function d(){let{agentState:e}=l();return(0,a.useObservableMemo)(()=>e?.select(e=>e?.state),[e])}function c(){return d()===n.AgentRunState.AGENT_STATE_RUNNING}function h(){let{updateAgentState:e}=l();return(0,t.useCallback)(()=>e(n.AgentRunState.AGENT_STATE_PAUSED),[e])}function p(){let e=(0,r.useChatter)(),t=(0,o.useObservable)(e.sessions.agent.current),n=t?.id,i=c(),a=u({sessionId:n});return i||a}e.s(["useIsUserMessageMostRecentEvent",()=>u],215969),e.s(["useAgentRunState",()=>d,"useAgentState",()=>l,"useIsAgentOptimisticallyWorking",()=>p,"useIsAgentWorking",()=>c,"usePauseAgent",()=>h],417120)},719976,e=>{"use strict";var t=e.i(276385),n=e.i(907371),r=e.i(624782);function i({colorway:e,style:i,variant:o="filled",...a}){let s=(0,n.useCreateInteractive)({variant:"filled"===o?o:"nofill",colorway:e,loading:!1});return(0,t.jsx)(r.Pill,{...a,colorway:e,tag:"button",variant:o,clsx:s.clsx,style:{...s.style,...i}})}e.s(["PillButton",()=>i])},795903,e=>{"use strict";var t=e.i(276385),n=e.i(96250),r=e.i(40916),i=e.i(119274);function o({prefix:e="Send message",onClick:o}){return(0,t.jsxs)(i.Menu,{children:[(0,t.jsx)(i.MenuItem,{icon:(0,t.jsx)(n.default,{}),label:`${e} in current chat`,onAction:()=>o({createNewSession:!1})}),(0,t.jsx)(i.MenuItem,{icon:(0,t.jsx)(r.default,{}),label:`${e} in new chat`,onAction:()=>o({createNewSession:!0})})]})}e.s(["SendAgentMessageMenu",()=>o])},63762,e=>{"use strict";var t=e.i(389959),n=e.i(82259);e.i(877212);var r=e.i(924908);e.i(242933);var i=e.i(279606);e.i(925218);var o=e.i(267103);let a=new Set(["planProgressData","agentPlanStepBegin","acknowledgeUserMessage","workflowsGetOutputToolData","presentResultsToolData","deployConfigData"]),s=new Set(["generate_plan","modify_step","verification","scroll_file","open_file"]);function u(){let e=(0,r.useChatter)(),a=(0,o.useObservable)(e.sessions.agent.current),s=a?.agent.state,u=(0,t.useMemo)(()=>a?.reduce(l,100)??null,[a]);return(0,t.useMemo)(()=>s&&u?i.Observable.combine(s,u).map(([e,t])=>(e?.state===n.AgentRunState.AGENT_STATE_PAUSED||e?.state===n.AgentRunState.AGENT_STATE_UNKNOWN||e?.state===n.AgentRunState.AGENT_STATE_NOT_STARTED)&&t):null,[s,u])}let l={direction:"reverse",state:{value:!1},map:e=>e.value,reducer(e,t){if(e.sender.type===n.UserType.USER||e.sender.type!==n.UserType.AI)return t.value=!1,!1;let{contents:r}=e.contents;switch(r?.$kind){case"rapidBuildConcluded":return;case"agentPlanEventContents":t.value=r.agentPlanEventContents.requiresApproval;break;case"agentAskUserForActionRequest":t.value=!0;break;case"agentTimelineEventContents":{let{toolData:e}=r.agentTimelineEventContents;if(e&&a.has(e.$kind))return;let{toolName:t}=r.agentTimelineEventContents;s.has(t);return}default:t.value=!1}return!1}};e.s(["useAgentIsWaitingOnUserInput",()=>u])},746776,e=>{"use strict";var t=e.i(276385),n=e.i(913965);function r(e){return(0,t.jsxs)(n.default,{...e,children:[(0,t.jsx)("path",{fill:"url(#paint0_linear_6026_336)",d:"M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12Z"}),(0,t.jsx)("path",{fill:"#C8DAEA",d:"m8.123 12.877 1.424 3.94s.178.37.368.37 3.026-2.95 3.026-2.95l3.152-6.089-7.92 3.712-.05 1.017Z"}),(0,t.jsx)("path",{fill:"#A9C6D8",d:"m10.01 13.888-.273 2.904s-.114.89.776 0 1.741-1.576 1.741-1.576"}),(0,t.jsx)("path",{fill:"#fff",d:"m8.149 13.018-2.929-.954s-.35-.142-.237-.464c.023-.067.07-.123.21-.22.649-.453 12.01-4.536 12.01-4.536s.321-.109.51-.037a.276.276 0 0 1 .189.206c.02.084.029.171.025.258 0 .076-.01.145-.017.255-.069 1.116-2.14 9.449-2.14 9.449s-.124.487-.567.504a.815.815 0 0 1-.593-.229c-.871-.75-3.882-2.773-4.547-3.218a.127.127 0 0 1-.055-.09c-.01-.047.042-.105.042-.105s5.243-4.66 5.382-5.149c.01-.038-.03-.057-.085-.04-.348.128-6.384 3.94-7.05 4.36a.321.321 0 0 1-.148.01Z"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_6026_336",x1:"12",x2:"12",y1:"24",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#1D93D2"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#38B0E3"})]})})]})}e.s(["default",()=>r])},800561,e=>{e.v({buttonGroup:"SendAgentMessageButtonGroup-module__Rv1ZBG__buttonGroup",buttonGroupDivider:"SendAgentMessageButtonGroup-module__Rv1ZBG__buttonGroupDivider",buttonGroupLeft:"SendAgentMessageButtonGroup-module__Rv1ZBG__buttonGroupLeft",buttonGroupRight:"SendAgentMessageButtonGroup-module__Rv1ZBG__buttonGroupRight"})},765890,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(103490),i=e.i(167392),o=e.i(269848),a=e.i(795903),s=e.i(480028),u=e.i(140487),l=e.i(764848),d=e.i(604963),c=e.i(751273),h=e.i(625484),p=e.i(800561);let f=(0,s.cvarsFrom)("SendAgentMessageButtonGroup.module.css",["--divider-color"]);function g({className:e,onSendAgentMessage:g,loading:y=!1,disabled:m=!1,buttonText:v,menuPrefix:x,colorway:w="primary"}){let[_,b]=(0,n.useState)(!1);return(0,t.jsxs)(h.View,{row:!0,clsx:[p.default.buttonGroup,p.default.cta,e],style:{[f.dividerColor]:s.colormap[w].dimmest},children:[(0,t.jsx)(c.Tooltip,{tooltip:`${x||v} in current chat`,children:(0,t.jsx)(u.Button,{clsx:p.default.buttonGroupLeft,colorway:w,text:v,iconLeft:y?(0,t.jsx)(o.default,{}):(0,t.jsx)(r.default,{}),loading:y,disabled:m,onClick:()=>g({createNewSession:!1})})}),(0,t.jsx)(l.DividerV,{clsx:p.default.buttonGroupDivider}),(0,t.jsxs)(d.PopoverTrigger,{isOpen:_,onOpenChange:b,label:"Message options",placement:"bottom end",children:[(0,t.jsx)(u.Button,{clsx:p.default.buttonGroupRight,colorway:w,disabled:m,text:"",iconLeft:y?(0,t.jsx)(o.default,{}):(0,t.jsx)(i.default,{})}),(0,t.jsx)(a.SendAgentMessageMenu,{onClick:g,prefix:x})]})]})}e.s(["SendAgentMessageButtonGroup",()=>g])},563390,e=>{"use strict";var t=e.i(960933);let n=t.Type.Object({id:t.Type.String(),name:t.Type.String(),instructions:t.Type.String(),tools:t.Type.Array(t.Type.Object({id:t.Type.String(),name:t.Type.String(),description:t.Type.String(),inputSchema:t.Type.String(),outputSchema:t.Type.String()})),workflows:t.Type.Record(t.Type.String(),t.Type.Object({name:t.Type.String(),description:t.Type.Optional(t.Type.String()),inputSchema:t.Type.String(),outputSchema:t.Type.String()})),provider:t.Type.String(),modelId:t.Type.String(),modelVersion:t.Type.String()}),r=t.Type.Object({id:t.Type.String(),name:t.Type.String(),description:t.Type.String(),inputSchema:t.Type.String(),outputSchema:t.Type.String()}),i=t.Type.Object({id:t.Type.String(),description:t.Type.String(),inputSchema:t.Type.String(),outputSchema:t.Type.String()}),o=t.Type.Object({id:t.Type.String(),name:t.Type.String(),description:t.Type.Optional(t.Type.String()),steps:t.Type.Record(t.Type.String(),i),inputSchema:t.Type.String(),outputSchema:t.Type.String()}),a=t.Type.Object({id:t.Type.String(),description:t.Type.Optional(t.Type.String())}),s=t.Type.Object({id:t.Type.String(),fn:t.Type.String()}),u=t.Type.Recursive(e=>t.Type.Union([t.Type.Object({type:t.Type.Literal("step"),step:a}),t.Type.Object({type:t.Type.Literal("sleep"),id:t.Type.String(),duration:t.Type.Optional(t.Type.Number()),fn:t.Type.Optional(t.Type.String())}),t.Type.Object({type:t.Type.Literal("sleepUntil"),id:t.Type.String(),date:t.Type.Optional(t.Type.Union([t.Type.String(),t.Type.Date()])),fn:t.Type.Optional(t.Type.String())}),t.Type.Object({type:t.Type.Literal("waitForEvent"),event:t.Type.String(),step:a,timeout:t.Type.Optional(t.Type.Number())}),t.Type.Object({type:t.Type.Literal("parallel"),steps:t.Type.Array(e)}),t.Type.Object({type:t.Type.Literal("conditional"),steps:t.Type.Array(e),serializedConditions:t.Type.Array(s)}),t.Type.Object({type:t.Type.Literal("loop"),step:a,serializedCondition:s,loopType:t.Type.Union([t.Type.Literal("dowhile"),t.Type.Literal("dountil")])}),t.Type.Object({type:t.Type.Literal("foreach"),step:a,opts:t.Type.Object({concurrency:t.Type.Number()})})]));t.Type.Object({id:t.Type.String(),name:t.Type.String(),description:t.Type.Optional(t.Type.String()),steps:t.Type.Record(t.Type.String(),i),stepGraph:t.Type.Array(u),inputSchema:t.Type.String(),outputSchema:t.Type.String()});let l=t.Type.Object({toolName:t.Type.String(),toolCallId:t.Type.String(),args:t.Type.Any(),result:t.Type.Unknown()});t.Type.Object({content:t.Type.String(),toolCalls:t.Type.Array(l)}),t.Type.Array(n),t.Type.Array(r),t.Type.Array(o),t.Type.Union([t.Type.Object({code:t.Type.Literal("MASTRA_API_NOT_READY"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("MASTRA_WORKFLOW_NOT_FOUND"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("MASTRA_AGENT_NOT_FOUND"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("MASTRA_AGENT_INSUFFICIENT_QUOTA"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("WORKFLOW_STREAM_TERMINATED"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("API_ERROR"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("INCOMPATIBLE_VERSION_ERROR"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("NETWORK_ERROR"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("INNGEST_API_NOT_READY"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("SCHEMA_VALIDATION_FAILED"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("DOT_REPLIT_ERROR"),message:t.Type.String()})]);let d=t.Type.Union([t.Type.Literal("running"),t.Type.Literal("success"),t.Type.Literal("failed"),t.Type.Literal("suspended"),t.Type.Literal("waiting"),t.Type.Literal("pending"),t.Type.Literal("canceled")]),c=t.Type.Object({code:t.Type.Literal("TOOL_EXECUTION_FAILED"),message:t.Type.String(),details:t.Type.Optional(t.Type.Unknown())}),h=t.Type.Object({error:t.Type.Literal(!0),message:t.Type.String(),validationErrors:t.Type.Optional(t.Type.Unknown())}),p=t.Type.Record(t.Type.String(),t.Type.Unknown()),f=t.Type.Union([c,h,p]),g=t.Type.Object({status:d,startedAt:t.Type.Optional(t.Type.Number()),endedAt:t.Type.Optional(t.Type.Number()),error:t.Type.Optional(t.Type.String()),output:t.Type.Optional(t.Type.String())});t.Type.Object({status:d,stepsRunData:t.Type.Optional(t.Type.Record(t.Type.String(),g))}),e.s(["RawToolCallResultSchema",0,f,"SerializedStepFlowEntrySchema",0,u,"ToolExecutionFailedSchema",0,c,"ValidationErrorSchema",0,h])},391038,e=>{"use strict";var t,n=e.i(960933),r=e.i(862927),i=e.i(563390),o=e.i(374106);e.i(877212);var a=e.i(924908);e.i(925218);var s=e.i(267103),u=e.i(641555),l=e.i(63762),d=e.i(417120),c=((t={}).Building="Building",t.WaitingForInput="WaitingForInput",t.Stopped="Stopped",t.Completed="Completed",t);let h=n.Type.Array(i.SerializedStepFlowEntrySchema),p={direction:"forward",state:{stepGraph:null},debug:{name:"AutomationPreviewReducer"},map:e=>e.stepGraph,reducer(e,t){if((0,o.isEventContentsKind)(e,"agentTimelineEventContents")&&"generate_mastra_preview"===e.contents.contents.agentTimelineEventContents.toolName&&(0,o.isEventAgentToolDataKind)(e,"createAutomationPreviewData")){let n=e.contents.contents.agentTimelineEventContents.toolData.createAutomationPreviewData;try{let e,i=n.result,o=i.match(/```json\n([\s\S]*?)\n```/);e=o&&o[1]?JSON.parse(o[1]):JSON.parse(i),r.Value.Check(h,e)&&(t.stepGraph=e)}catch{}}}},f={direction:"forward",state:{hasDeployData:!1},debug:{name:"DeployDataReducer"},map:e=>e.hasDeployData,reducer(e,t){(0,o.isEventAgentToolDataKind)(e,"deployData")&&(t.hasDeployData=!0)}};function g(){let e=(0,a.useChatter)(),t=(0,s.useObservable)(e.sessions.agent.current),n=(0,l.useAgentIsWaitingOnUserInput)(),r=(0,s.useObservable)(n),i=(0,d.useIsAgentWorking)(),o=(0,u.useObservableMemo)(()=>t?.reduce(p,"global")??null,[t]),c=(0,u.useObservableMemo)(()=>t?.reduce(f,"global"),[t]);return c||!o?{stepGraph:null,initialBuildState:c?"Completed":void 0}:{stepGraph:o,initialBuildState:!0===r?"WaitingForInput":i?"Building":"Stopped"}}e.s(["InitialBuildState",()=>c,"useAutomationPreview",()=>g])},820219,e=>{"use strict";var t=e.i(276385),n=e.i(389959);e.i(925218);var r=e.i(112077);let i=(0,n.createContext)(null);function o(){let e=(0,n.useContext)(i);if(!e)throw Error("useAutomationContext must be used within AutomationProvider");return e}function a({children:e,workflowDetail:o,triggerType:a,workflowExecutionState:s,executeWorkflow:u,resetWorkflow:l,openPane:d,initialBuildState:c,automationPreview:h,connectorInfo:p,openConnectorFlow:f}){let g=(0,r.useCreateObservable)({selectedNodeId:null,view:"default"}),y=(0,r.useCreateObservable)(null),m=(0,n.useMemo)(()=>({workflowDetail:o,triggerType:a,executeWorkflow:u,resetWorkflow:l,openPane:d,workflowExecutionState:s,sidebarState:g,selectedTriggerEvent:y,connectorInfo:p,openConnectorFlow:f,initialBuildState:c,automationPreview:h}),[o,a,u,l,d,s,g,y,p,f,c,h]);return(0,t.jsx)(i.Provider,{value:m,children:e})}e.s(["AutomationProvider",()=>a,"useAutomationContext",()=>o])},250464,e=>{"use strict";e.i(221042);var t,n,r,i,o,a,s,u,l,d,c,h,p,f,g,y={value:()=>{}};function m(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new v(r)}function v(e){this._=e}function x(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=y,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function w(){}function _(e){return null==e?w:function(){return this.querySelector(e)}}function b(){return[]}function E(e){return null==e?b:function(){return this.querySelectorAll(e)}}function T(e){return function(){return this.matches(e)}}function S(e){return function(t){return t.matches(e)}}v.prototype=m.prototype={constructor:v,on:function(e,t){var n,r=this._,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((n=(e=i[o]).type)&&(n=function(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=x(r[n],e.name,t);else if(null==t)for(n in r)r[n]=x(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new v(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],o=0,n=r.length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var M=Array.prototype.find;function O(){return this.firstElementChild}var k=Array.prototype.filter;function A(){return Array.from(this.children)}function N(e){return Array(e.length)}function C(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function j(e,t,n,r,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new C(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function I(e,t,n,r,i,o,a){var s,u,l,d=new Map,c=t.length,h=o.length,p=Array(c);for(s=0;s<c;++s)(u=t[s])&&(p[s]=l=a.call(u,u.__data__,s,t)+"",d.has(l)?i[s]=u:d.set(l,u));for(s=0;s<h;++s)l=a.call(e,o[s],s,o)+"",(u=d.get(l))?(r[s]=u,u.__data__=o[s],d.delete(l)):n[s]=new C(e,o[s]);for(s=0;s<c;++s)(u=t[s])&&d.get(p[s])===u&&(i[s]=u)}function P(e){return e.__data__}function L(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}C.prototype={constructor:C,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var R="http://www.w3.org/1999/xhtml";let z={svg:"http://www.w3.org/2000/svg",xhtml:R,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),z.hasOwnProperty(t)?{space:z[t],local:e}:e}function D(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function B(e,t){return e.style.getPropertyValue(t)||D(e).getComputedStyle(e,null).getPropertyValue(t)}function G(e){return e.trim().split(/^|\s+/)}function H(e){return e.classList||new F(e)}function F(e){this._node=e,this._names=G(e.getAttribute("class")||"")}function U(e,t){for(var n=H(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function X(e,t){for(var n=H(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function V(){this.textContent=""}function Y(){this.innerHTML=""}function q(){this.nextSibling&&this.parentNode.appendChild(this)}function W(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function K(e){var t=$(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===R&&t.documentElement.namespaceURI===R?t.createElement(e):t.createElementNS(n,e)}})(t)}function Z(){return null}function Q(){var e=this.parentNode;e&&e.removeChild(this)}function J(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ee(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function et(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function en(e,t,n){return function(){var r,i=this.__on,o=function(e){t.call(this,e,this.__data__)};if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function er(e,t,n){var r=D(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}F.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ei=[null];function eo(e,t){this._groups=e,this._parents=t}function ea(){return new eo([[document.documentElement]],ei)}function es(e){return"string"==typeof e?new eo([[document.querySelector(e)]],[document.documentElement]):new eo([[e]],ei)}function eu(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}eo.prototype=ea.prototype={constructor:eo,select:function(e){"function"!=typeof e&&(e=_(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,l=r[i]=Array(u),d=0;d<u;++d)(o=s[d])&&(a=e.call(o,o.__data__,d,s))&&("__data__"in o&&(a.__data__=o.__data__),l[d]=a);return new eo(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=E(e);for(var n=this._groups,r=n.length,i=[],o=[],a=0;a<r;++a)for(var s,u=n[a],l=u.length,d=0;d<l;++d)(s=u[d])&&(i.push(e.call(s,s.__data__,d,u)),o.push(s));return new eo(i,o)},selectChild:function(e){var t;return this.select(null==e?O:(t="function"==typeof e?e:S(e),function(){return M.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?A:(t="function"==typeof e?e:S(e),function(){return k.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=T(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new eo(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,P);var n=t?I:j,r=this._parents,i=this._groups;"function"!=typeof e&&(v=e,e=function(){return v});for(var o=i.length,a=Array(o),s=Array(o),u=Array(o),l=0;l<o;++l){var d=r[l],c=i[l],h=c.length,p="object"==typeof(m=e.call(d,d&&d.__data__,l,r))&&"length"in m?m:Array.from(m),f=p.length,g=s[l]=Array(f),y=a[l]=Array(f);n(d,c,g,y,u[l]=Array(h),p,t);for(var m,v,x,w,_=0,b=0;_<f;++_)if(x=g[_]){for(_>=b&&(b=_+1);!(w=y[b])&&++b<f;);x._next=w||null}}return(a=new eo(a,r))._enter=s,a._exit=u,a},enter:function(){return new eo(this._enter||this._groups.map(N),this._parents)},exit:function(){return new eo(this._exit||this._groups.map(N),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=Array(i),u=0;u<a;++u)for(var l,d=n[u],c=r[u],h=d.length,p=s[u]=Array(h),f=0;f<h;++f)(l=d[f]||c[f])&&(p[f]=l);for(;u<i;++u)s[u]=n[u];return new eo(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=L);for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=Array(u),d=0;d<u;++d)(a=s[d])&&(l[d]=a);l.sort(t)}return new eo(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=$(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):B(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=G(e+"");if(arguments.length<2){for(var r=H(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?U:X)(this,e)}}:t?function(e){return function(){U(this,e)}}:function(e){return function(){X(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?V:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(q)},lower:function(){return this.each(W)},append:function(e){var t="function"==typeof e?e:K(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:K(e),r=null==t?Z:"function"==typeof t?t:_(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Q)},clone:function(e){return this.select(e?ee:J)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=o.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var u,l=0,d=s.length;l<d;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}return}for(r=0,s=t?en:et;r<a;++r)this.each(s(o[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return er(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return er(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};let el={passive:!1},ed={capture:!0,passive:!1};function ec(e){e.stopImmediatePropagation()}function eh(e){e.preventDefault(),e.stopImmediatePropagation()}function ep(e){var t=e.document.documentElement,n=es(e).on("dragstart.drag",eh,ed);"onselectstart"in t?n.on("selectstart.drag",eh,ed):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ef(e,t){var n=e.document.documentElement,r=es(e).on("dragstart.drag",null);t&&(r.on("click.drag",eh,ed),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}let eg=e=>()=>e;function ey(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:d}})}function em(e){return!e.ctrlKey&&!e.button}function ev(){return this.parentNode}function ex(e,t){return null==t?{x:e.x,y:e.y}:t}function ew(){return navigator.maxTouchPoints||"ontouchstart"in this}function e_(){var e,t,n,r,i=em,o=ev,a=ex,s=ew,u={},l=m("start","drag","end"),d=0,c=0;function h(e){e.on("mousedown.drag",p).filter(s).on("touchstart.drag",y).on("touchmove.drag",v,el).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,s){if(!r&&i.call(this,a,s)){var u=w(this,o.call(this,a,s),a,s,"mouse");u&&(es(a.view).on("mousemove.drag",f,ed).on("mouseup.drag",g,ed),ep(a.view),ec(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function f(r){if(eh(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>c}u.mouse("drag",r)}function g(e){es(e.view).on("mousemove.drag mouseup.drag",null),ef(e.view,n),eh(e),u.mouse("end",e)}function y(e,t){if(i.call(this,e,t)){var n,r,a=e.changedTouches,s=o.call(this,e,t),u=a.length;for(n=0;n<u;++n)(r=w(this,s,e,t,a[n].identifier,a[n]))&&(ec(e),r("start",e,a[n]))}}function v(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=u[r[t].identifier])&&(eh(e),n("drag",e,r[t]))}function x(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<o;++t)(n=u[i[t].identifier])&&(ec(e),n("end",e,i[t]))}function w(e,t,n,r,i,o){var s,c,p,f=l.copy(),g=eu(o||n,t);if(null!=(p=a.call(e,new ey("beforestart",{sourceEvent:n,target:h,identifier:i,active:d,x:g[0],y:g[1],dx:0,dy:0,dispatch:f}),r)))return s=p.x-g[0]||0,c=p.y-g[1]||0,function n(o,a,l){var y,m=g;switch(o){case"start":u[i]=n,y=d++;break;case"end":delete u[i],--d;case"drag":g=eu(l||a,t),y=d}f.call(o,e,new ey(o,{sourceEvent:a,subject:p,target:h,identifier:i,active:y,x:g[0]+s,y:g[1]+c,dx:g[0]-m[0],dy:g[1]-m[1],dispatch:f}),r)}}return h.filter=function(e){return arguments.length?(i="function"==typeof e?e:eg(!!e),h):i},h.container=function(e){return arguments.length?(o="function"==typeof e?e:eg(e),h):o},h.subject=function(e){return arguments.length?(a="function"==typeof e?e:eg(e),h):a},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:eg(!!e),h):s},h.on=function(){var e=l.on.apply(l,arguments);return e===l?h:e},h.clickDistance=function(e){return arguments.length?(c=(e*=1)*e,h):Math.sqrt(c)},h}function eb(e){return((e=Math.exp(e))+1/e)/2}ey.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};let eE=function e(t,n,r){function i(e,i){var o,a,s=e[0],u=e[1],l=e[2],d=i[0],c=i[1],h=i[2],p=d-s,f=c-u,g=p*p+f*f;if(g<1e-12)a=Math.log(h/l)/t,o=function(e){return[s+e*p,u+e*f,l*Math.exp(t*e*a)]};else{var y=Math.sqrt(g),m=(h*h-l*l+r*g)/(2*l*n*y),v=(h*h-l*l-r*g)/(2*h*n*y),x=Math.log(Math.sqrt(m*m+1)-m);a=(Math.log(Math.sqrt(v*v+1)-v)-x)/t,o=function(e){var r,i,o=e*a,d=eb(x),c=l/(n*y)*(d*(((r=Math.exp(2*(r=t*o+x)))-1)/(r+1))-((i=Math.exp(i=x))-1/i)/2);return[s+c*p,u+c*f,l*d/eb(t*o+x)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);var eT,eS,eM=0,eO=0,ek=0,eA=0,eN=0,eC=0,ej="object"==typeof performance&&performance.now?performance:Date,eI="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eP(){return eN||(eI(eL),eN=ej.now()+eC)}function eL(){eN=0}function eR(){this._call=this._time=this._next=null}function ez(e,t,n){var r=new eR;return r.restart(e,t,n),r}function e$(){eN=(eA=ej.now())+eC,eM=eO=0;try{eP(),++eM;for(var e,t=eT;t;)(e=eN-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eM}finally{eM=0,function(){for(var e,t,n=eT,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:eT=t);eS=e,eB(r)}(),eN=0}}function eD(){var e=ej.now(),t=e-eA;t>1e3&&(eC-=t,eA=e)}function eB(e){!eM&&(eO&&(eO=clearTimeout(eO)),e-eN>24?(e<1/0&&(eO=setTimeout(e$,e-ej.now()-eC)),ek&&(ek=clearInterval(ek))):(ek||(eA=ej.now(),ek=setInterval(eD,1e3)),eM=1,eI(e$)))}function eG(e,t,n){var r=new eR;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}eR.prototype=ez.prototype={constructor:eR,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?eP():+n)+(null==t?0:+t),this._next||eS===this||(eS?eS._next=this:eT=this,eS=this),this._call=e,this._time=n,eB()},stop:function(){this._call&&(this._call=null,this._time=1/0,eB())}};var eH=m("start","end","cancel","interrupt"),eF=[];function eU(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(u){var l,d,c,h;if(1!==n.state)return s();for(l in i)if((h=i[l]).name===n.name){if(3===h.state)return eG(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[l]):+l<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[l])}if(eG(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(l=0,n.state=3,r=Array(c=n.tween.length),d=-1;l<c;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=ez(function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:i,on:eH,tween:eF,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function eX(e,t){var n=eY(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function eV(e,t){var n=eY(e,t);if(n.state>3)throw Error("too late; already running");return n}function eY(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function eq(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o){if((n=o[i]).name!==t){a=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]}a&&delete e.__transition}}var eW=e.i(438603),eK=180/Math.PI,eZ={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eQ(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*eK,skewX:Math.atan(u)*eK,scaleX:a,scaleY:s}}function eJ(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s,u,l,d,c=[],h=[];return o=e(o),a=e(a),!function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:(0,eW.default)(e,i)},{i:u-2,x:(0,eW.default)(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,c,h),s=o.rotate,u=a.rotate,s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:(0,eW.default)(s,u)})):u&&c.push(i(c)+"rotate("+u+r),l=o.skewX,d=a.skewX,l!==d?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:(0,eW.default)(l,d)}):d&&c.push(i(c)+"skewX("+d+r),!function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:(0,eW.default)(e,n)},{i:s-2,x:(0,eW.default)(t,r)})}else(1!==n||1!==r)&&o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,c,h),o=a=null,function(e){for(var t,n=-1,r=h.length;++n<r;)c[(t=h[n]).i]=t.x(e);return c.join("")}}}var e0=eJ(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eZ:eQ(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),e1=eJ(function(e){return null==e?eZ:(u||(u=document.createElementNS("http://www.w3.org/2000/svg","g")),u.setAttribute("transform",e),e=u.transform.baseVal.consolidate())?eQ((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):eZ},", ",")",")");function e2(e,t,n){var r=e._id;return e.each(function(){var e=eV(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return eY(e,r).value[t]}}var e5=e.i(202246),e3=e.i(341013),e6=e.i(805513),e6=e6,e9=e.i(644663),e9=e9;function e7(e,t){var n;return("number"==typeof t?e3.interpolateNumber:t instanceof e5.color?e6.default:(n=(0,e5.color)(t))?(t=n,e6.default):e9.default)(e,t)}var e4=ea.prototype.constructor;function e8(e){return function(){this.style.removeProperty(e)}}var te=0;function tt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var tn=ea.prototype;tt.prototype=(function(e){return ea().transition(e)}).prototype={constructor:tt,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=_(e));for(var r=this._groups,i=r.length,o=Array(i),a=0;a<i;++a)for(var s,u,l=r[a],d=l.length,c=o[a]=Array(d),h=0;h<d;++h)(s=l[h])&&(u=e.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),c[h]=u,eU(c[h],t,n,h,c,eY(s,n)));return new tt(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=E(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],d=l.length,c=0;c<d;++c)if(u=l[c]){for(var h,p=e.call(u,u.__data__,c,l),f=eY(u,n),g=0,y=p.length;g<y;++g)(h=p[g])&&eU(h,t,n,g,p,f);o.push(p),a.push(u)}return new tt(o,a,t,n)},selectChild:tn.selectChild,selectChildren:tn.selectChildren,filter:function(e){"function"!=typeof e&&(e=T(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new tt(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=Array(r),s=0;s<o;++s)for(var u,l=t[s],d=n[s],c=l.length,h=a[s]=Array(c),p=0;p<c;++p)(u=l[p]||d[p])&&(h[p]=u);for(;s<r;++s)a[s]=t[s];return new tt(a,this._parents,this._name,this._id)},selection:function(){return new e4(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++te,r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var d=eY(a,t);eU(a,e,n,l,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new tt(r,this._parents,e,n)},call:tn.call,nodes:tn.nodes,node:tn.node,size:tn.size,empty:tn.empty,each:tn.each,on:function(e,t){var n,r,i,o,a,s,u=this._id;return arguments.length<2?eY(this.node(),u).on.on(e):this.each((n=u,r=e,i=t,s=(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?eX:eV,function(){var e=s(this,n),t=e.on;t!==o&&(a=(o=t).copy()).on(r,i),e.on=a}))},attr:function(e,t){var n=$(e),r="transform"===n?e1:e7;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,i,o;return function(){var a,s,u=n(this);return null==u?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u))}}:function(e,t,n){var r,i,o;return function(){var a,s,u=n(this);return null==u?void this.removeAttribute(e):(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u))}})(n,r,e2(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}:function(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=$(e);return this.tween(n,(r.local?function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t){this.setAttributeNS(e.space,e.local,i.call(this,t))}),n}return i._value=t,i}:function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t){this.setAttribute(e,i.call(this,t))}),n}return i._value=t,i})(r,t))},style:function(e,t,n){var r,i,o,a,s,u,l,d,c,h,p,f,g,y,m,v,x,w,_,b,E,T="transform"==(e+="")?e0:e7;return null==t?this.styleTween(e,(r=e,function(){var e=B(this,r),t=(this.style.removeProperty(r),B(this,r));return e===t?null:e===i&&t===o?a:a=T(i=e,o=t)})).on("end.style."+e,e8(e)):"function"==typeof t?this.styleTween(e,(s=e,u=e2(this,"style."+e,t),function(){var e=B(this,s),t=u(this),n=t+"";return null==t&&(this.style.removeProperty(s),n=t=B(this,s)),e===n?null:e===l&&n===d?c:(d=n,c=T(l=e,t))})).each((h=this._id,x="end."+(v="style."+(p=e)),function(){var e=eV(this,h),t=e.on,n=null==e.value[v]?m||(m=e8(p)):void 0;(t!==f||y!==n)&&(g=(f=t).copy()).on(x,y=n),e.on=g})):this.styleTween(e,(w=e,E=t+"",function(){var e=B(this,w);return e===E?null:e===_?b:b=T(_=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t){this.style.setProperty(e,o.call(this,t),n)}),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=e2(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=eY(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var i=eV(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}}i.tween=r}}:function(e,t,n){var r,i;if("function"!=typeof n)throw Error();return function(){var o=eV(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eX(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eX(this,e).delay=t}})(t,e)):eY(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eV(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eV(this,e).duration=t}})(t,e)):eY(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){eV(this,e).ease=t}}(t,e)):eY(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();eV(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each(function(){var n=eV(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t}),0===i&&o()})},[Symbol.iterator]:tn[Symbol.iterator]};var tr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};ea.prototype.interrupt=function(e){return this.each(function(){eq(this,e)})},ea.prototype.transition=function(e){var t,n;e instanceof tt?(t=e._id,e=e._name):(t=++te,(n=tr).time=eP(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&eU(a,e,t,l,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(a,t));return new tt(r,this._parents,e,t)};let ti=e=>()=>e;function to(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ta(e,t,n){this.k=e,this.x=t,this.y=n}ta.prototype={constructor:ta,scale:function(e){return 1===e?this:new ta(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ta(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ts=new ta(1,0,0);function tu(e){for(;!e.__zoom;)if(!(e=e.parentNode))return ts;return e.__zoom}function tl(e){e.stopImmediatePropagation()}function td(e){e.preventDefault(),e.stopImmediatePropagation()}function tc(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function th(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tp(){return this.__zoom||ts}function tf(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tg(){return navigator.maxTouchPoints||"ontouchstart"in this}function ty(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function tm(){var e,t,n,r=tc,i=th,o=ty,a=tf,s=tg,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],d=250,c=eE,h=m("start","zoom","end"),p=0,f=10;function g(e){e.property("__zoom",tp).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",M).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new ta(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new ta(e.k,r,i)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,r){e.on("start.zoom",function(){_(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(r).end()}).tween("zoom",function(){var e=arguments,o=_(this,e).event(r),a=i.apply(this,e),s=null==n?x(a):"function"==typeof n?n.apply(this,e):n,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),l=this.__zoom,d="function"==typeof t?t.apply(this,e):t,h=c(l.invert(s).concat(u/l.k),d.invert(s).concat(u/d.k));return function(e){if(1===e)e=d;else{var t=h(e),n=u/t[2];e=new ta(n,s[0]-t[0]*n,s[1]-t[1]*n)}o.zoom(null,e)}})}function _(e,t,n){return!n&&e.__zooming||new b(e,t)}function b(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function E(e,...t){if(r.apply(this,arguments)){var n=_(this,t).event(e),i=this.__zoom,s=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),d=eu(e);if(n.wheel)(n.mouse[0][0]!==d[0]||n.mouse[0][1]!==d[1])&&(n.mouse[1]=i.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[d,i.invert(d)],eq(this),n.start()}td(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",o(v(y(i,s),n.mouse[0],n.mouse[1]),n.extent,l))}}function T(e,...t){if(!n&&r.apply(this,arguments)){var i=e.currentTarget,a=_(this,t,!0).event(e),s=es(e.view).on("mousemove.zoom",function(e){if(td(e),!a.moved){var t=e.clientX-d,n=e.clientY-c;a.moved=t*t+n*n>p}a.event(e).zoom("mouse",o(v(a.that.__zoom,a.mouse[0]=eu(e,i),a.mouse[1]),a.extent,l))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),ef(e.view,a.moved),td(e),a.event(e).end()},!0),u=eu(e,i),d=e.clientX,c=e.clientY;ep(e.view),tl(e),a.mouse=[u,this.__zoom.invert(u)],eq(this),a.start()}}function S(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,a=eu(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),u=n.k*(e.shiftKey?.5:2),c=o(v(y(n,u),a,s),i.apply(this,t),l);td(e),d>0?es(this).transition().duration(d).call(w,c,a,e):es(this).call(g.transform,c,a,e)}}function M(n,...i){if(r.apply(this,arguments)){var o,a,s,u,l=n.touches,d=l.length,c=_(this,i,n.changedTouches.length===d).event(n);for(tl(n),a=0;a<d;++a)u=[u=eu(s=l[a],this),this.__zoom.invert(u),s.identifier],c.touch0?c.touch1||c.touch0[2]===u[2]||(c.touch1=u,c.taps=0):(c.touch0=u,o=!0,c.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(c.taps<2&&(t=u[0],e=setTimeout(function(){e=null},500)),eq(this),c.start())}}function O(e,...t){if(this.__zooming){var n,r,i,a,s=_(this,t).event(e),u=e.changedTouches,d=u.length;for(td(e),n=0;n<d;++n)i=eu(r=u[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var c=s.touch0[0],h=s.touch0[1],p=s.touch1[0],f=s.touch1[1],g=(g=p[0]-c[0])*g+(g=p[1]-c[1])*g,m=(m=f[0]-h[0])*m+(m=f[1]-h[1])*m;r=y(r,Math.sqrt(g/m)),i=[(c[0]+p[0])/2,(c[1]+p[1])/2],a=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(v(r,i,a),s.extent,l))}}function k(e,...r){if(this.__zooming){var i,o,a=_(this,r).event(e),s=e.changedTouches,u=s.length;for(tl(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<u;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=eu(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<f)){var l=es(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",tp),e!==i?w(e,t,n,r):i.interrupt().each(function(){_(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},g.scaleBy=function(e,t,n,r){g.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,function(){var e=i.apply(this,arguments),r=this.__zoom,a=null==n?x(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),u="function"==typeof t?t.apply(this,arguments):t;return o(v(y(r,u),a,s),e,l)},n,r)},g.translateBy=function(e,t,n,r){g.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)},null,r)},g.translateTo=function(e,t,n,r,a){g.transform(e,function(){var e=i.apply(this,arguments),a=this.__zoom,s=null==r?x(e):"function"==typeof r?r.apply(this,arguments):r;return o(ts.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)},r,a)},b.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=es(this.that).datum();h.call(e,this.that,new to(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:ti(+e),g):a},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:ti(!!e),g):r},g.touchable=function(e){return arguments.length?(s="function"==typeof e?e:ti(!!e),g):s},g.extent=function(e){return arguments.length?(i="function"==typeof e?e:ti([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):i},g.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],g):[u[0],u[1]]},g.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(e){return arguments.length?(o=e,g):o},g.duration=function(e){return arguments.length?(d=+e,g):d},g.interpolate=function(e){return arguments.length?(c=e,g):c},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(p=(e*=1)*e,g):Math.sqrt(p)},g.tapDistance=function(e){return arguments.length?(f=+e,g):f},g}tu.prototype=ta.prototype;var tv=e.i(906857);let tx={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},tw=[[-1/0,-1/0],[1/0,1/0]],t_=["Enter"," ","Escape"],tb={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};(t=l||(l={})).Strict="strict",t.Loose="loose",(n=d||(d={})).Free="free",n.Vertical="vertical",n.Horizontal="horizontal",(r=c||(c={})).Partial="partial",r.Full="full";let tE={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};(i=h||(h={})).Bezier="default",i.Straight="straight",i.Step="step",i.SmoothStep="smoothstep",i.SimpleBezier="simplebezier",(o=p||(p={})).Arrow="arrow",o.ArrowClosed="arrowclosed",(a=f||(f={})).Left="left",a.Top="top",a.Right="right",a.Bottom="bottom";let tT={[f.Left]:f.Right,[f.Right]:f.Left,[f.Top]:f.Bottom,[f.Bottom]:f.Top};function tS(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(let n of e.keys())if(!t.has(n))return!1;return!0}function tM(e,t,n){if(!n)return;let r=[];e.forEach((e,n)=>{t?.has(n)||r.push(e)}),r.length&&n(r)}function tO(e){return null===e?null:e?"valid":"invalid"}let tk=e=>"id"in e&&"source"in e&&"target"in e,tA=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),tN=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),tC=(e,t=[0,0])=>{let{width:n,height:r}=t9(e),i=e.origin??t,o=n*i[0],a=r*i[1];return{x:e.position.x-o,y:e.position.y-a}},tj=(e,t={nodeOrigin:[0,0]})=>0===e.length?{x:0,y:0,width:0,height:0}:tX(e.reduce((e,n)=>{let r="string"==typeof n,i=t.nodeLookup||r?void 0:n;return t.nodeLookup&&(i=r?t.nodeLookup.get(n):tN(n)?n:t.nodeLookup.get(n.id)),tF(e,i?tY(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),tI=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){let t=tY(e);n=tF(n,t)}}),tX(n)},tP=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1)=>{let s={...t0(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:r=!1}=t;if(a&&!n||r)continue;let i=e.width??t.width??t.initialWidth??null,l=e.height??t.height??t.initialHeight??null,d=tW(s,tV(t)),c=(i??0)*(l??0),h=o&&d>0;(!t.internals.handleBounds||h||d>=c||t.dragging)&&u.push(t)}return u};async function tL({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},a){let s,u;if(0===e.size)return Promise.resolve(!0);let l=t5(tI((s=new Map,u=a?.nodes?new Set(a.nodes.map(e=>e.id)):null,e.forEach(e=>{e.measured.width&&e.measured.height&&(a?.includeHiddenNodes||!e.hidden)&&(!u||u.has(e.id))&&s.set(e.id,e)}),s)),t,n,a?.minZoom??i,a?.maxZoom??o,a?.padding??.1);return await r.setViewport(l,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function tR({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){let a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:u,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},d=a.origin??r,c=a.extent||i;if("parent"!==a.extent||a.expandParent)s&&t6(a.extent)&&(c=[[a.extent[0][0]+u,a.extent[0][1]+l],[a.extent[1][0]+u,a.extent[1][1]+l]]);else if(s){let e=s.measured.width,t=s.measured.height;e&&t&&(c=[[u,l],[u+e,l+t]])}else o?.("005",tx.error005());let h=t6(c)?tD(t,c,a.measured):t;return(void 0===a.measured.width||void 0===a.measured.height)&&o?.("015",tx.error015()),{position:{x:h.x-u+(a.measured.width??0)*d[0],y:h.y-l+(a.measured.height??0)*d[1]},positionAbsolute:h}}async function tz({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){let o,a=new Set(e.map(e=>e.id)),s=[];for(let e of n){if(!1===e.deletable)continue;let t=a.has(e.id),n=!t&&e.parentId&&s.find(t=>t.id===e.parentId);(t||n)&&s.push(e)}let u=new Set(t.map(e=>e.id)),l=r.filter(e=>!1!==e.deletable),d=(o=new Set,s.forEach(e=>{o.add(e.id)}),l.filter(e=>o.has(e.source)||o.has(e.target)));for(let e of l)u.has(e.id)&&!d.find(t=>t.id===e.id)&&d.push(e);if(!i)return{edges:d,nodes:s};let c=await i({nodes:s,edges:d});return"boolean"==typeof c?c?{edges:d,nodes:s}:{edges:[],nodes:[]}:c}let t$=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),tD=(e={x:0,y:0},t,n)=>({x:t$(e.x,t[0][0],t[1][0]-(n?.width??0)),y:t$(e.y,t[0][1],t[1][1]-(n?.height??0))});function tB(e,t,n){let{width:r,height:i}=t9(n),{x:o,y:a}=n.internals.positionAbsolute;return tD(e,[[o,a],[o+r,a+i]],t)}let tG=(e,t,n)=>e<t?t$(Math.abs(e-t),1,t)/t:e>n?-t$(Math.abs(e-n),1,t)/t:0,tH=(e,t,n=15,r=40)=>[tG(e.x,r,t.width-r)*n,tG(e.y,r,t.height-r)*n],tF=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),tU=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),tX=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),tV=(e,t=[0,0])=>{let{x:n,y:r}=tN(e)?e.internals.positionAbsolute:tC(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},tY=(e,t=[0,0])=>{let{x:n,y:r}=tN(e)?e.internals.positionAbsolute:tC(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},tq=(e,t)=>tX(tF(tU(e),tU(t))),tW=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),tK=e=>tZ(e.width)&&tZ(e.height)&&tZ(e.x)&&tZ(e.y),tZ=e=>!isNaN(e)&&isFinite(e),tQ=(e,t)=>{},tJ=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),t0=({x:e,y:t},[n,r,i],o=!1,a=[1,1])=>{let s={x:(e-n)/i,y:(t-r)/i};return o?tJ(s,a):s},t1=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function t2(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let t5=(e,t,n,r,i,o)=>{let a=function(e,t,n){if("string"==typeof e||"number"==typeof e){let r=t2(e,n),i=t2(e,t);return{top:r,right:i,bottom:r,left:i,x:2*i,y:2*r}}if("object"==typeof e){let r=t2(e.top??e.y??0,n),i=t2(e.bottom??e.y??0,n),o=t2(e.left??e.x??0,t),a=t2(e.right??e.x??0,t);return{top:r,right:a,bottom:i,left:o,x:o+a,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(o,t,n),s=t$(Math.min((t-a.x)/e.width,(n-a.y)/e.height),r,i),u=e.x+e.width/2,l=e.y+e.height/2,d=t/2-u*s,c=n/2-l*s,h=function(e,t,n,r,i,o){let{x:a,y:s}=t1(e,[t,n,r]),{x:u,y:l}=t1({x:e.x+e.width,y:e.y+e.height},[t,n,r]);return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(i-u),bottom:Math.floor(o-l)}}(e,d,c,s,t,n),p={left:Math.min(h.left-a.left,0),top:Math.min(h.top-a.top,0),right:Math.min(h.right-a.right,0),bottom:Math.min(h.bottom-a.bottom,0)};return{x:d-p.left+p.right,y:c-p.top+p.bottom,zoom:s}},t3=()=>"u">typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function t6(e){return null!=e&&"parent"!==e}function t9(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function t7(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function t4(e,t={width:0,height:0},n,r,i){let o={...e},a=r.get(n);if(a){let e=a.origin||i;o.x+=a.internals.positionAbsolute.x-(t.width??0)*e[0],o.y+=a.internals.positionAbsolute.y-(t.height??0)*e[1]}return o}function t8(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function ne(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}function nt(e){return{...tb,...e||{}}}function nn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){let{x:o,y:a}=nu(e),s=t0({x:o-(i?.left??0),y:a-(i?.top??0)},r),{x:u,y:l}=n?tJ(s,t):s;return{xSnapped:u,ySnapped:l,...s}}let nr=e=>({width:e.offsetWidth,height:e.offsetHeight}),ni=e=>e?.getRootNode?.()||window?.document,no=["INPUT","SELECT","TEXTAREA"];function na(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(no.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}let ns=e=>"clientX"in e,nu=(e,t)=>{let n=ns(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},nl=(e,t,n,r,i)=>{let o=t.querySelectorAll(`.${e}`);return o&&o.length?Array.from(o).map(t=>{let o=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:i,position:t.getAttribute("data-handlepos"),x:(o.left-n.left)/r,y:(o.top-n.top)/r,...nr(t)}}):null};function nd({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){let u=.125*e+.375*i+.375*a+.125*n,l=.125*t+.375*o+.375*s+.125*r,d=Math.abs(u-e),c=Math.abs(l-t);return[u,l,d,c]}function nc(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nh({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case f.Left:return[t-nc(t-r,o),n];case f.Right:return[t+nc(r-t,o),n];case f.Top:return[t,n-nc(n-i,o)];case f.Bottom:return[t,n+nc(i-n,o)]}}function np({sourceX:e,sourceY:t,sourcePosition:n=f.Bottom,targetX:r,targetY:i,targetPosition:o=f.Top,curvature:a=.25}){let[s,u]=nh({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[l,d]=nh({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[c,h,p,g]=nd({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:d});return[`M${e},${t} C${s},${u} ${l},${d} ${r},${i}`,c,h,p,g]}function nf({sourceX:e,sourceY:t,targetX:n,targetY:r}){let i=Math.abs(n-e)/2,o=Math.abs(r-t)/2;return[n<e?n+i:n-i,r<t?r+o:r-o,i,o]}function ng({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){return void 0!==r?r:(i&&n?1e3:0)+Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0)}function ny({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){let o=tF(tY(e),tY(t));return o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1),tW({x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]},tX(o))>0}let nm=(e,t)=>{let n,r;return e.source&&e.target?(r=n=tk(e)?{...e}:{...e,id:(({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`)(e)},t.some(e=>e.source===r.source&&e.target===r.target&&(e.sourceHandle===r.sourceHandle||!e.sourceHandle&&!r.sourceHandle)&&(e.targetHandle===r.targetHandle||!e.targetHandle&&!r.targetHandle)))?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n)):(tQ("006",tx.error006()),t)};function nv({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[i,o,a,s]=nf({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}let nx={[f.Left]:{x:-1,y:0},[f.Right]:{x:1,y:0},[f.Top]:{x:0,y:-1},[f.Bottom]:{x:0,y:1}},nw=({source:e,sourcePosition:t=f.Bottom,target:n})=>t===f.Left||t===f.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},n_=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nb({sourceX:e,sourceY:t,sourcePosition:n=f.Bottom,targetX:r,targetY:i,targetPosition:o=f.Top,borderRadius:a=5,centerX:s,centerY:u,offset:l=20,stepPosition:d=.5}){let[c,h,p,g,y]=function({source:e,sourcePosition:t=f.Bottom,target:n,targetPosition:r=f.Top,center:i,offset:o,stepPosition:a}){let s,u,l=nx[t],d=nx[r],c={x:e.x+l.x*o,y:e.y+l.y*o},h={x:n.x+d.x*o,y:n.y+d.y*o},p=nw({source:c,sourcePosition:t,target:h}),g=0!==p.x?"x":"y",y=p[g],m=[],v={x:0,y:0},x={x:0,y:0},[,,w,_]=nf({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*d[g]==-1){"x"===g?(s=i.x??c.x+(h.x-c.x)*a,u=i.y??(c.y+h.y)/2):(s=i.x??(c.x+h.x)/2,u=i.y??c.y+(h.y-c.y)*a);let e=[{x:s,y:c.y},{x:s,y:h.y}],t=[{x:c.x,y:u},{x:h.x,y:u}];m=l[g]===y?"x"===g?e:t:"x"===g?t:e}else{let i=[{x:c.x,y:h.y}],a=[{x:h.x,y:c.y}];if(m="x"===g?l.x===y?a:i:l.y===y?i:a,t===r){let t=Math.abs(e[g]-n[g]);if(t<=o){let r=Math.min(o-1,o-t);l[g]===y?v[g]=(c[g]>e[g]?-1:1)*r:x[g]=(h[g]>n[g]?-1:1)*r}}if(t!==r){let e="x"===g?"y":"x",t=l[g]===d[e],n=c[e]>h[e],r=c[e]<h[e];(1===l[g]&&(!t&&n||t&&r)||1!==l[g]&&(!t&&r||t&&n))&&(m="x"===g?i:a)}let p={x:c.x+v.x,y:c.y+v.y},f={x:h.x+x.x,y:h.y+x.y};Math.max(Math.abs(p.x-m[0].x),Math.abs(f.x-m[0].x))>=Math.max(Math.abs(p.y-m[0].y),Math.abs(f.y-m[0].y))?(s=(p.x+f.x)/2,u=m[0].y):(s=m[0].x,u=(p.y+f.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:h.x+x.x,y:h.y+x.y},n],s,u,w,_]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:u},offset:l,stepPosition:d});return[c.reduce((e,t,n)=>e+(n>0&&n<c.length-1?function(e,t,n,r){let i=Math.min(n_(e,t)/2,n_(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${o+i*t},${a}Q ${o},${a} ${o},${a+i*r}`}let s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${a+i*u}Q ${o},${a} ${o+i*s},${a}`}(c[n-1],t,c[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`),""),h,p,g,y]}function nE(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function nT(e){let{sourceNode:t,targetNode:n}=e;if(!nE(t)||!nE(n))return null;let r=t.internals.handleBounds||nS(t.handles),i=n.internals.handleBounds||nS(n.handles),o=nO(r?.source??[],e.sourceHandle),a=nO(e.connectionMode===l.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!o||!a)return e.onError?.("008",tx.error008(!o?"source":"target",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let s=o?.position||f.Bottom,u=a?.position||f.Top,d=nM(t,o,s),c=nM(n,a,u);return{sourceX:d.x,sourceY:d.y,targetX:c.x,targetY:c.y,sourcePosition:s,targetPosition:u}}function nS(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function nM(e,t,n=f.Left,r=!1){let i=(t?.x??0)+e.internals.positionAbsolute.x,o=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??t9(e);if(r)return{x:i+a/2,y:o+s/2};switch(t?.position??n){case f.Top:return{x:i+a/2,y:o};case f.Right:return{x:i+a,y:o+s/2};case f.Bottom:return{x:i+a/2,y:o+s};case f.Left:return{x:i,y:o+s/2}}}function nO(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function nk(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}function nA(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){let o=new Set;return e.reduce((e,a)=>([a.markerStart||r,a.markerEnd||i].forEach(r=>{if(r&&"object"==typeof r){let i=nk(r,t);o.has(i)||(e.push({id:i,color:r.color||n,...r}),o.add(i))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}function nN(e,t,n,r,i){let o=.5;"start"===i?o=0:"end"===i&&(o=1);let a=[(e.x+e.width*o)*t.zoom+t.x,e.y*t.zoom+t.y-r],s=[-100*o,-100];switch(n){case f.Right:a=[(e.x+e.width)*t.zoom+t.x+r,(e.y+e.height*o)*t.zoom+t.y],s=[0,-100*o];break;case f.Bottom:a[1]=(e.y+e.height)*t.zoom+t.y+r,s[1]=0;break;case f.Left:a=[e.x*t.zoom+t.x-r,(e.y+e.height*o)*t.zoom+t.y],s=[-100,-100*o]}return`translate(${a[0]}px, ${a[1]}px) translate(${s[0]}%, ${s[1]}%)`}let nC={nodeOrigin:[0,0],nodeExtent:tw,elevateNodesOnSelect:!0,defaults:{}},nj={...nC,checkEquality:!0};function nI(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function nP(e,t,n){let r=nI(nC,n);for(let n of e.values())if(n.parentId)nR(n,e,t,r);else{let e=tD(tC(n,r.nodeOrigin),t6(n.extent)?n.extent:r.nodeExtent,t9(n));n.internals.positionAbsolute=e}}function nL(e,t,n,r){let i=nI(nj,r),o=e.length>0,a=new Map(t),s=1e3*!!i?.elevateNodesOnSelect;for(let u of(t.clear(),n.clear(),e)){let e=a.get(u.id);if(i.checkEquality&&u===e?.internals.userNode)t.set(u.id,e);else{let n=tD(tC(u,i.nodeOrigin),t6(u.extent)?u.extent:i.nodeExtent,t9(u));e={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:n,handleBounds:u.measured?e?.internals.handleBounds:void 0,z:nz(u,s),userNode:u}},t.set(u.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(o=!1),u.parentId&&nR(e,t,n,r)}return o}function nR(e,t,n,r){let{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:a}=nI(nC,r),s=e.parentId,u=t.get(s);if(!u)return void console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);let{x:l,y:d,z:c}=function(e,t,n,r,i){let{x:o,y:a}=t.internals.positionAbsolute,s=t9(e),u=tC(e,n),l=t6(e.extent)?tD(u,e.extent,s):u,d=tD({x:o+l.x,y:a+l.y},r,s);"parent"===e.extent&&(d=tB(d,s,t));let c=nz(e,i),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>=c?h+1:c}}(e,u,o,a,1e3*!!i),{positionAbsolute:h}=e.internals,p=l!==h.x||d!==h.y;(p||c!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:l,y:d}:h,z:c}})}function nz(e,t){return(tZ(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function n$(e,t,n,r=[0,0]){let i=[],o=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=tq(o.get(n.parentId)?.expandedRect??tV(e),n.rect);o.set(n.parentId,{expandedRect:r,parent:e})}return o.size>0&&o.forEach(({expandedRect:t,parent:o},a)=>{let s=o.internals.positionAbsolute,u=t9(o),l=o.origin??r,d=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,c=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,h=Math.max(u.width,Math.round(t.width)),p=Math.max(u.height,Math.round(t.height)),f=(h-u.width)*l[0],g=(p-u.height)*l[1];(d>0||c>0||f||g)&&(i.push({id:a,type:"position",position:{x:o.position.x-d+f,y:o.position.y-c+g}}),n.get(a)?.forEach(t=>{e.some(e=>e.id===t.id)||i.push({id:t.id,type:"position",position:{x:t.position.x+d,y:t.position.y+c}})})),(u.width<t.width||u.height<t.height||d||c)&&i.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:h+(d?l[0]*d-f:0),height:p+(c?l[1]*c-g:0)}})}),i}function nD(e,t,n,r,i,o){let a=r?.querySelector(".xyflow__viewport"),s=!1;if(!a)return{changes:[],updatedInternals:s};let u=[],l=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(l.transform),c=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),s=!0;continue}let a=nr(r.nodeElement),l=e.measured.width!==a.width||e.measured.height!==a.height;if(a.width&&a.height&&(l||!e.internals.handleBounds||r.force)){let h=r.nodeElement.getBoundingClientRect(),p=t6(e.extent)?e.extent:o,{positionAbsolute:f}=e.internals;e.parentId&&"parent"===e.extent?f=tB(f,a,t.get(e.parentId)):p&&(f=tD(f,p,a));let g={...e,measured:a,internals:{...e.internals,positionAbsolute:f,handleBounds:{source:nl("source",r.nodeElement,h,d,e.id),target:nl("target",r.nodeElement,h,d,e.id)}}};t.set(e.id,g),e.parentId&&nR(g,t,n,{nodeOrigin:i}),s=!0,l&&(u.push({id:e.id,type:"dimensions",dimensions:a}),e.expandParent&&e.parentId&&c.push({id:e.id,parentId:e.parentId,rect:tV(g,i)}))}}if(c.length>0){let e=n$(c,t,n,i);u.push(...e)}return{changes:u,updatedInternals:s}}async function nB({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r);return Promise.resolve(!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]))}function nG(e,t,n,r,i,o){let a=i,s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${i}-${e}`;let u=r.get(a)||new Map;if(r.set(a,u.set(n,t)),o){a=`${i}-${e}-${o}`;let s=r.get(a)||new Map;r.set(a,s.set(n,t))}}function nH(e,t,n){for(let r of(e.clear(),t.clear(),n)){let{source:n,target:i,sourceHandle:o=null,targetHandle:a=null}=r,s={edgeId:r.id,source:n,target:i,sourceHandle:o,targetHandle:a},u=`${n}-${o}--${i}-${a}`;nG("source",s,`${i}-${a}--${n}-${o}`,e,n,o),nG("target",s,u,e,i,a),t.set(r.id,r)}}function nF(e,t){if(null===e||null===t)return!1;let n=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++)if(n[e].id!==r[e].id||n[e].type!==r[e].type||!Object.is(n[e].data,r[e].data))return!1;return!0}function nU(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)break;r=r?.parentElement}while(r)return!1}function nX({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){let i=[];for(let[e,o]of t){let t=n.get(e)?.internals.userNode;t&&i.push({...t,position:o.position,dragging:r})}if(!e)return[i[0],i];let o=n.get(e)?.internals.userNode;return[o?{...o,position:t.get(e)?.position||o.position,dragging:r}:i[0],i]}function nV({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},a=0,s=new Map,u=!1,l={x:0,y:0},d=null,c=!1,h=null,p=!1,f=!1,g=null;return{update:function({noDragClassName:y,handleSelector:m,domNode:v,isSelectable:x,nodeId:w,nodeClickDistance:_=0}){function b({x:e,y:n}){let{nodeLookup:i,nodeExtent:a,snapGrid:u,snapToGrid:l,nodeOrigin:d,onNodeDrag:c,onSelectionDrag:h,onError:p,updateNodePositions:y}=t();o={x:e,y:n};let m=!1,v=s.size>1,x=v&&a?tU(tI(s)):null,_=v&&l?function({dragItems:e,snapGrid:t,x:n,y:r}){let i=e.values().next().value;if(!i)return null;let o={x:n-i.distance.x,y:r-i.distance.y},a=tJ(o,t);return{x:a.x-o.x,y:a.y-o.y}}({dragItems:s,snapGrid:u,x:e,y:n}):null;for(let[t,r]of s){if(!i.has(t))continue;let o={x:e-r.distance.x,y:n-r.distance.y};l&&(o=_?{x:Math.round(o.x+_.x),y:Math.round(o.y+_.y)}:tJ(o,u));let s=null;if(v&&a&&!r.extent&&x){let{positionAbsolute:e}=r.internals,t=e.x-x.x+a[0][0],n=e.x+r.measured.width-x.x2+a[1][0];s=[[t,e.y-x.y+a[0][1]],[n,e.y+r.measured.height-x.y2+a[1][1]]]}let{position:c,positionAbsolute:h}=tR({nodeId:t,nextPosition:o,nodeLookup:i,nodeExtent:s||a,nodeOrigin:d,onError:p});m=m||r.position.x!==c.x||r.position.y!==c.y,r.position=c,r.internals.positionAbsolute=h}if(f=f||m,m&&(y(s,!0),g&&(r||c||!w&&h))){let[e,t]=nX({nodeId:w,dragItems:s,nodeLookup:i});r?.(g,s,e,t),c?.(g,e,t),w||h?.(g,t)}}async function E(){if(!d)return;let{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:i}=t();if(!i){u=!1,cancelAnimationFrame(a);return}let[s,c]=tH(l,d,r);(0!==s||0!==c)&&(o.x=(o.x??0)-s/e[2],o.y=(o.y??0)-c/e[2],await n({x:s,y:c})&&b(o)),a=requestAnimationFrame(E)}function T(r){let{nodeLookup:i,multiSelectionActive:a,nodesDraggable:u,transform:l,snapGrid:h,snapToGrid:p,selectNodesOnDrag:f,onNodeDragStart:g,onSelectionDragStart:y,unselectNodesAndEdges:m}=t();c=!0,f&&x||a||!w||i.get(w)?.selected||m(),x&&f&&w&&e?.(w);let v=nn(r.sourceEvent,{transform:l,snapGrid:h,snapToGrid:p,containerBounds:d});if(o=v,(s=function(e,t,n,r){let i=new Map;for(let[o,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!function e(t,n){if(!t.parentId)return!1;let r=n.get(t.parentId);return!!r&&(!!r.selected||e(r,n))}(a,e))&&(a.draggable||t&&void 0===a.draggable)){let t=e.get(o);t&&i.set(o,{id:o,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return i}(i,u,v,w)).size>0&&(n||g||!w&&y)){let[e,t]=nX({nodeId:w,dragItems:s,nodeLookup:i});n?.(r.sourceEvent,s,e,t),g?.(r.sourceEvent,e,t),w||y?.(r.sourceEvent,t)}}h=es(v);let S=e_().clickDistance(_).on("start",e=>{let{domNode:n,nodeDragThreshold:r,transform:i,snapGrid:a,snapToGrid:s}=t();d=n?.getBoundingClientRect()||null,p=!1,f=!1,g=e.sourceEvent,0===r&&T(e),o=nn(e.sourceEvent,{transform:i,snapGrid:a,snapToGrid:s,containerBounds:d}),l=nu(e.sourceEvent,d)}).on("drag",e=>{let{autoPanOnNodeDrag:n,transform:r,snapGrid:i,snapToGrid:a,nodeDragThreshold:h,nodeLookup:f}=t(),y=nn(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:a,containerBounds:d});if(g=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||w&&!f.has(w))&&(p=!0),!p){if(!u&&n&&c&&(u=!0,E()),!c){let t=y.xSnapped-(o.x??0),n=y.ySnapped-(o.y??0);Math.sqrt(t*t+n*n)>h&&T(e)}(o.x!==y.xSnapped||o.y!==y.ySnapped)&&s&&c&&(l=nu(e.sourceEvent,d),b(y))}}).on("end",e=>{if(c&&!p&&(u=!1,c=!1,cancelAnimationFrame(a),s.size>0)){let{nodeLookup:n,updateNodePositions:r,onNodeDragStop:o,onSelectionDragStop:a}=t();if(f&&(r(s,!1),f=!1),i||o||!w&&a){let[t,r]=nX({nodeId:w,dragItems:s,nodeLookup:n,dragging:!1});i?.(e.sourceEvent,s,t,r),o?.(e.sourceEvent,t,r),w||a?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!y||!nU(t,`.${y}`,v))&&(!m||nU(t,m,v))});h.call(S)},destroy:function(){h?.on(".drag",null)}}}function nY(e,t,n,r,i,o=!1){let a=r.get(e);if(!a)return null;let s="strict"===i?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],u=(n?s?.find(e=>e.id===n):s?.[0])??null;return u&&o?{...u,...nM(a,u,u.position,!0)}:u}function nq(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}let nW=()=>!0;function nK(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:a,lib:s,flowId:u,isValidConnection:d=nW,nodeLookup:c}){let h="target"===o,p=t?a.querySelector(`.${s}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:f,y:g}=nu(e),y=a.elementFromPoint(f,g),m=y?.classList.contains(`${s}-flow__handle`)?y:p,v={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){let e=nq(void 0,m),t=m.getAttribute("data-nodeid"),o=m.getAttribute("data-handleid"),a=m.classList.contains("connectable"),s=m.classList.contains("connectableend");if(!t||!e)return v;let u={source:h?t:r,sourceHandle:h?o:i,target:h?r:t,targetHandle:h?i:o};v.connection=u,v.isValid=a&&s&&(n===l.Strict?h&&"source"===e||!h&&"target"===e:t!==r||o!==i)&&d(u),v.toHandle=nY(t,e,o,c,n,!0)}return v}let nZ={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:a,domNode:s,nodeLookup:u,lib:l,autoPanOnConnect:d,flowId:c,panBy:h,cancelConnection:p,onConnectStart:g,onConnect:y,onConnectEnd:m,isValidConnection:v=nW,onReconnectEnd:x,updateConnection:w,getTransform:_,getFromHandle:b,autoPanSpeed:E,dragThreshold:T=1,handleDomNode:S}){let M,O=ni(e.target),k=0,{x:A,y:N}=nu(e),C=nq(o,S),j=s?.getBoundingClientRect(),I=!1;if(!j||!C)return;let P=nY(i,C,r,u,t);if(!P)return;let L=nu(e,j),R=!1,z=null,$=!1,D=null,B={...P,nodeId:i,type:C,position:P.position},G=u.get(i),H={inProgress:!0,isValid:null,from:nM(G,B,f.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:G,to:L,toHandle:null,toPosition:tT[B.position],toNode:null};function F(){I=!0,w(H),g?.(e,{nodeId:i,handleId:r,handleType:C})}function U(e){var o,s;let p;if(!I){let{x:t,y:n}=nu(e),r=t-A,i=n-N;if(!(r*r+i*i>T*T))return;F()}if(!b()||!B)return void X(e);let f=_();M=function(e,t,n,r){let i=[],o=1/0;for(let a of function(e,t,n){let r=[],i={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())tW(i,tV(e))>0&&r.push(e);return r}(e,n,t+250))for(let n of[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]]){if(r.nodeId===n.nodeId&&r.type===n.type&&r.id===n.id)continue;let{x:s,y:u}=nM(a,n,n.position,!0),l=Math.sqrt(Math.pow(s-e.x,2)+Math.pow(u-e.y,2));l>t||(l<o?(i=[{...n,x:s,y:u}],o=l):l===o&&i.push({...n,x:s,y:u}))}if(!i.length)return null;if(i.length>1){let e="source"===r.type?"target":"source";return i.find(t=>t.type===e)??i[0]}return i[0]}(t0(L=nu(e,j),f,!1,[1,1]),n,u,B),R||(!function e(){if(!d||!j)return;let[t,n]=tH(L,j,E);h({x:t,y:n}),k=requestAnimationFrame(e)}(),R=!0);let g=nK(e,{handle:M,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:a?"target":"source",isValidConnection:v,doc:O,lib:l,flowId:c,nodeLookup:u});D=g.handleDomNode,z=g.connection,o=!!M,s=g.isValid,p=null,s?p=!0:o&&!s&&(p=!1),$=p;let y={...H,isValid:$,to:g.toHandle&&$?t1({x:g.toHandle.x,y:g.toHandle.y},f):L,toHandle:g.toHandle,toPosition:$&&g.toHandle?g.toHandle.position:tT[B.position],toNode:g.toHandle?u.get(g.toHandle.nodeId):null};$&&M&&H.toHandle&&y.toHandle&&H.toHandle.type===y.toHandle.type&&H.toHandle.nodeId===y.toHandle.nodeId&&H.toHandle.id===y.toHandle.id&&H.to.x===y.to.x&&H.to.y===y.to.y||(w(y),H=y)}function X(e){if(I){(M||D)&&z&&$&&y?.(z);let{inProgress:t,...n}=H,r={...n,toPosition:H.toHandle?H.toPosition:null};m?.(e,r),o&&x?.(e,r)}p(),cancelAnimationFrame(k),R=!1,$=!1,z=null,D=null,O.removeEventListener("mousemove",U),O.removeEventListener("mouseup",X),O.removeEventListener("touchmove",U),O.removeEventListener("touchend",X)}0===T&&F(),O.addEventListener("mousemove",U),O.addEventListener("mouseup",X),O.addEventListener("touchmove",U),O.addEventListener("touchend",X)},isValid:nK};function nQ({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){let i=es(e);return{update:function({translateExtent:e,width:o,height:a,zoomStep:s=1,pannable:u=!0,zoomable:l=!0,inversePan:d=!1}){let c=[0,0],h=tm().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(c=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",u?i=>{let s=n();if("mousemove"!==i.sourceEvent.type&&"touchmove"!==i.sourceEvent.type||!t)return;let u=[i.sourceEvent.clientX??i.sourceEvent.touches[0].clientX,i.sourceEvent.clientY??i.sourceEvent.touches[0].clientY],l=[u[0]-c[0],u[1]-c[1]];c=u;let h=r()*Math.max(s[2],Math.log(s[2]))*(d?-1:1),p={x:s[0]-l[0]*h,y:s[1]-l[1]*h};t.setViewportConstrained({x:p.x,y:p.y,zoom:s[2]},[[0,0],[o,a]],e)}:null).on("zoom.wheel",l?e=>{if("wheel"!==e.sourceEvent.type||!t)return;let r=n(),i=e.sourceEvent.ctrlKey&&t3()?10:1,o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,a=r[2]*Math.pow(2,o*i);t.scaleTo(a)}:null);i.call(h,{})},destroy:function(){i.on("zoom",null)},pointer:eu}}let nJ=e=>({x:e.x,y:e.y,zoom:e.k}),n0=({x:e,y:t,zoom:n})=>ts.translate(e,t).scale(n),n1=(e,t)=>e.target.closest(`.${t}`),n2=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),n5=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,n3=(e,t=0,n=n5,r=()=>{})=>{let i="number"==typeof t&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},n6=e=>{let t=e.ctrlKey&&t3()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function n9({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:u,onDraggingChange:l}){let c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),p=tm().clickDistance(!tZ(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),f=es(e).call(p);x({x:o.x,y:o.y,zoom:t$(o.zoom,t,n)},[[0,0],[h.width,h.height]],i);let g=f.on("wheel.zoom"),y=f.on("dblclick.zoom");function m(e,t){return f?new Promise(n=>{p?.interpolate(t?.interpolate==="linear"?tv.interpolate:eE).transform(n3(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function v(){p.on("zoom",null)}async function x(e,t,n){let r=n0(e),i=p?.constrain()(r,t,n);return i&&await m(i),new Promise(e=>e(i))}return p.wheelDelta(n6),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:i,panOnDrag:o,panOnScrollMode:h,panOnScrollSpeed:m,preventScrolling:x,zoomOnPinch:w,zoomOnScroll:_,zoomOnDoubleClick:b,zoomActivationKeyPressed:E,lib:T,onTransformChange:S}){r&&!c.isZoomingOrPanning&&v();let M=!i||E||r?function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){let o="wheel"===r.type,a=!t&&o&&!r.ctrlKey,s=n1(r,e);if(r.ctrlKey&&o&&s&&r.preventDefault(),a||s)return null;r.preventDefault(),n.call(this,r,i)}}({noWheelClassName:e,preventScrolling:x,d3ZoomHandler:g}):function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:u,onPanZoomEnd:l}){return c=>{if(n1(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();let h=n.property("__zoom").k||1;if(c.ctrlKey&&a){let e=eu(c),t=h*Math.pow(2,n6(c));r.scaleTo(n,t,e,c);return}let p=1===c.deltaMode?20:1,f=i===d.Vertical?0:c.deltaX*p,g=i===d.Horizontal?0:c.deltaY*p;!t3()&&c.shiftKey&&i!==d.Vertical&&(f=c.deltaY*p,g=0),r.translateBy(n,-(f/h)*o,-(g/h)*o,{internal:!0});let y=nJ(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s?.(c,y)),e.isPanScrolling&&(u?.(c,y),e.panScrollTimeout=setTimeout(()=>{l?.(c,y),e.isPanScrolling=!1},150))}}({zoomPanValues:c,noWheelClassName:e,d3Selection:f,d3Zoom:p,panOnScrollMode:h,panOnScrollSpeed:m,zoomOnPinch:w,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:u});if(f.on("wheel.zoom",M,{passive:!1}),!r){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;let i=nJ(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}({zoomPanValues:c,onDraggingChange:l,onPanZoomStart:s});p.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{e.usedRightMouseButton=!!(n&&n2(t,e.mouseButton??0)),o.sourceEvent?.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!o.sourceEvent?.internal&&i?.(o.sourceEvent,nJ(o.transform))}}({zoomPanValues:c,panOnDrag:o,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:S});p.on("zoom",t);let r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return a=>{if(!a.sourceEvent?.internal){let s,u;if(e.isZoomingOrPanning=!1,o&&n2(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&(s=e.prevViewport,u=a.transform,s.x!==u.x||s.y!==u.y||s.zoom!==u.k)){let t=nJ(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(a.sourceEvent,t)},150*!!n)}}}}({zoomPanValues:c,panOnDrag:o,panOnScroll:i,onPaneContextMenu:n,onPanZoomEnd:u,onDraggingChange:l});p.on("end",r)}let O=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:s,noPanClassName:u,lib:l}){return d=>{let c=e||t,h=n&&d.ctrlKey;if(1===d.button&&"mousedown"===d.type&&(n1(d,`${l}-flow__node`)||n1(d,`${l}-flow__edge`)))return!0;if(!r&&!c&&!i&&!o&&!n||a||n1(d,s)&&"wheel"===d.type||n1(d,u)&&("wheel"!==d.type||i&&"wheel"===d.type&&!e)||!n&&d.ctrlKey&&"wheel"===d.type)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!c&&!i&&!h&&"wheel"===d.type||!r&&("mousedown"===d.type||"touchstart"===d.type)||Array.isArray(r)&&!r.includes(d.button)&&"mousedown"===d.type)return!1;let p=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||"wheel"===d.type)&&p}}({zoomActivationKeyPressed:E,panOnDrag:o,zoomOnScroll:_,panOnScroll:i,zoomOnDoubleClick:b,zoomOnPinch:w,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:T});p.filter(O),b?f.on("dblclick.zoom",y):f.on("dblclick.zoom",null)},destroy:v,setViewport:async function e(e,t){let n=n0(e);return await m(n,t),new Promise(e=>e(n))},setViewportConstrained:x,getViewport:function(){let e=f?tu(f.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return f?new Promise(n=>{p?.interpolate(t?.interpolate==="linear"?tv.interpolate:eE).scaleTo(n3(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return f?new Promise(n=>{p?.interpolate(t?.interpolate==="linear"?tv.interpolate:eE).scaleBy(n3(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){p?.scaleExtent(e)},setTranslateExtent:function(e){p?.translateExtent(e)},syncViewport:function(e){if(f){let t=n0(e),n=f.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&p?.transform(f,t,null,{sync:!0})}},setClickDistance:function(e){let t=!tZ(e)||e<0?0:e;p?.clickDistance(t)}}}(s=g||(g={})).Line="line",s.Handle="handle";let n7=["top-left","top-right","bottom-left","bottom-right"],n4=["top","right","bottom","left"];function n8(e,t){return Math.max(0,t-e)}function re(e,t){return Math.max(0,e-t)}function rt(e,t,n){return Math.max(0,t-e,e-n)}let rn={width:0,height:0,x:0,y:0},rr={...rn,pointerX:0,pointerY:0,aspectRatio:1};function ri({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){let o=es(e);return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:s,resizeDirection:u,onResizeStart:l,onResize:d,onResizeEnd:c,shouldResize:h}){let p,f,g,y,m,v,x={...rn},w={...rr},_=(p=e.includes("right")||e.includes("left"),f=e.includes("bottom")||e.includes("top"),{isHorizontal:p,isVertical:f,affectsX:e.includes("left"),affectsY:e.includes("top")}),b=null,E=[],T=e_().on("start",e=>{let{nodeLookup:r,transform:i,snapGrid:o,snapToGrid:a,nodeOrigin:s,paneDomNode:u}=n();if(!(g=r.get(t)))return;b=u?.getBoundingClientRect()??null;let{xSnapped:d,ySnapped:c}=nn(e.sourceEvent,{transform:i,snapGrid:o,snapToGrid:a,containerBounds:b});if(w={...x={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},pointerX:d,pointerY:c,aspectRatio:x.width/x.height},y=void 0,g.parentId&&("parent"===g.extent||g.expandParent)){var h;m=(y=r.get(g.parentId))&&"parent"===g.extent?[[0,0],[(h=y).measured.width,h.measured.height]]:void 0}for(let[e,n]of(E=[],v=void 0,r))if(n.parentId===t&&(E.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){let e=function(e,t,n){let r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,a=e.measured.height??0,s=n[0]*o,u=n[1]*a;return[[r-s,i-u],[r+o-s,i+a-u]]}(n,g,n.origin??s);v=v?[[Math.min(e[0][0],v[0][0]),Math.min(e[0][1],v[0][1])],[Math.max(e[1][0],v[1][0]),Math.max(e[1][1],v[1][1])]]:e}l?.(e,{...x})}).on("drag",e=>{let{transform:t,snapGrid:i,snapToGrid:o,nodeOrigin:l}=n(),c=nn(e.sourceEvent,{transform:t,snapGrid:i,snapToGrid:o,containerBounds:b}),p=[];if(!g)return;let{x:f,y:T,width:S,height:M}=x,O={},k=g.origin??l,{width:A,height:N,x:C,y:j}=function(e,t,n,r,i,o,a,s){var u,l,d,c;let{affectsX:h,affectsY:p}=t,{isHorizontal:f,isVertical:g}=t,y=f&&g,{xSnapped:m,ySnapped:v}=n,{minWidth:x,maxWidth:w,minHeight:_,maxHeight:b}=r,{x:E,y:T,width:S,height:M,aspectRatio:O}=e,k=Math.floor(f?m-e.pointerX:0),A=Math.floor(g?v-e.pointerY:0),N=S+(h?-k:k),C=M+(p?-A:A),j=-o[0]*S,I=-o[1]*M,P=rt(N,x,w),L=rt(C,_,b);if(a){let e=0,t=0;h&&k<0?e=n8(E+k+j,a[0][0]):!h&&k>0&&(e=re(E+N+j,a[1][0])),p&&A<0?t=n8(T+A+I,a[0][1]):!p&&A>0&&(t=re(T+C+I,a[1][1])),P=Math.max(P,e),L=Math.max(L,t)}if(s){let e=0,t=0;h&&k>0?e=re(E+k,s[0][0]):!h&&k<0&&(e=n8(E+N,s[1][0])),p&&A>0?t=re(T+A,s[0][1]):!p&&A<0&&(t=n8(T+C,s[1][1])),P=Math.max(P,e),L=Math.max(L,t)}if(i){if(f){(P=Math.max(P,rt(N/O,_,b)*O),a)&&(P=Math.max(P,(h||p)&&(!h||p||!y)?n8(T+I+(h?k:-k)/O,a[0][1])*O:re(T+I+N/O,a[1][1])*O));s&&(P=Math.max(P,(h||p)&&(!h||p||!y)?re(T+(h?k:-k)/O,s[0][1])*O:n8(T+N/O,s[1][1])*O))}if(g){(L=Math.max(L,rt(C*O,x,w)/O),a)&&(L=Math.max(L,(h||p)&&(!p||h||!y)?n8(E+(p?A:-A)*O+j,a[0][0])/O:re(E+C*O+j,a[1][0])/O));s&&(L=Math.max(L,(h||p)&&(!p||h||!y)?re(E+(p?A:-A)*O,s[0][0])/O:n8(E+C*O,s[1][0])/O))}}A+=A<0?L:-L,k+=k<0?P:-P,i&&(y?N>C*O?A=((u=h,l=p,u?!l:l)?-k:k)/O:k=((d=h,c=p,d?!c:c)?-A:A)*O:f?(A=k/O,p=h):(k=A*O,h=p));let R=h?E+k:E,z=p?T+A:T;return{width:S+(h?-k:k),height:M+(p?-A:A),x:o[0]*k*(h?-1:1)+R,y:o[1]*A*(p?-1:1)+z}}(w,_,c,a,s,k,m,v),I=A!==S,P=N!==M,L=C!==f&&I,R=j!==T&&P;if(!L&&!R&&!I&&!P)return;if((L||R||1===k[0]||1===k[1])&&(O.x=L?C:x.x,O.y=R?j:x.y,x.x=O.x,x.y=O.y,E.length>0)){let e=C-f,t=j-T;for(let n of E)n.position={x:n.position.x-e+k[0]*(A-S),y:n.position.y-t+k[1]*(N-M)},p.push(n)}if((I||P)&&(O.width=I&&(!u||"horizontal"===u)?A:x.width,O.height=P&&(!u||"vertical"===u)?N:x.height,x.width=O.width,x.height=O.height),y&&g.expandParent){let e=k[0]*(O.width??0);O.x&&O.x<e&&(x.x=e,w.x=w.x-(O.x-e));let t=k[1]*(O.height??0);O.y&&O.y<t&&(x.y=t,w.y=w.y-(O.y-t))}let z=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){let a=e-t,s=n-r,u=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&i&&(u[0]=-1*u[0]),s&&o&&(u[1]=-1*u[1]),u}({width:x.width,prevWidth:S,height:x.height,prevHeight:M,affectsX:_.affectsX,affectsY:_.affectsY}),$={...x,direction:z};!1!==h?.(e,$)&&(d?.(e,$),r(O,p))}).on("end",e=>{c?.(e,{...x}),i?.({...x})});o.call(T)},destroy:function(){o.on(".drag",null)}}}e.s(["ConnectionLineType",()=>h,"ConnectionMode",()=>l,"MarkerType",()=>p,"PanOnScrollMode",()=>d,"Position",()=>f,"ResizeControlVariant",()=>g,"SelectionMode",()=>c,"XYDrag",()=>nV,"XYHandle",()=>nZ,"XYMinimap",()=>nQ,"XYPanZoom",()=>n9,"XYResizer",()=>ri,"XY_RESIZER_HANDLE_POSITIONS",()=>n7,"XY_RESIZER_LINE_POSITIONS",()=>n4,"addEdge",()=>nm,"adoptUserNodes",()=>nL,"areConnectionMapsEqual",()=>tS,"areSetsEqual",()=>t8,"calculateNodePosition",()=>tR,"createMarkerIds",()=>nA,"defaultAriaLabelConfig",()=>tb,"devWarn",()=>tQ,"elementSelectionKeys",()=>t_,"errorMessages",()=>tx,"evaluateAbsolutePosition",()=>t4,"fitViewport",()=>tL,"getBezierEdgeCenter",()=>nd,"getBezierPath",()=>np,"getBoundsOfRects",()=>tq,"getConnectionStatus",()=>tO,"getDimensions",()=>nr,"getEdgePosition",()=>nT,"getElementsToRemove",()=>tz,"getElevatedEdgeZIndex",()=>ng,"getEventPosition",()=>nu,"getHostForElement",()=>ni,"getInternalNodesBounds",()=>tI,"getMarkerId",()=>nk,"getNodeDimensions",()=>t9,"getNodeToolbarTransform",()=>nN,"getNodesBounds",()=>tj,"getNodesInside",()=>tP,"getOverlappingArea",()=>tW,"getSmoothStepPath",()=>nb,"getStraightPath",()=>nv,"getViewportForBounds",()=>t5,"handleConnectionChange",()=>tM,"handleExpandParent",()=>n$,"infiniteExtent",()=>tw,"initialConnection",()=>tE,"isEdgeBase",()=>tk,"isEdgeVisible",()=>ny,"isInputDOMNode",()=>na,"isMacOs",()=>t3,"isMouseEvent",()=>ns,"isNodeBase",()=>tA,"isNumeric",()=>tZ,"isRectObject",()=>tK,"mergeAriaLabelConfig",()=>nt,"nodeHasDimensions",()=>t7,"nodeToRect",()=>tV,"panBy",()=>nB,"pointToRendererPoint",()=>t0,"rendererPointToPoint",()=>t1,"shallowNodeData",()=>nF,"snapPosition",()=>tJ,"updateAbsolutePositions",()=>nP,"updateConnectionLookup",()=>nH,"updateNodeInternals",()=>nD,"withResolvers",()=>ne],250464)},781900,(e,t,n)=>{"use strict";function r(e,t){e[t]?e[t]++:e[t]=1}function i(e,t){--e[t]||delete e[t]}function o(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}return i+"\x01"+o+"\x01"+(void 0===r?"\0":r)}function a(e,t){return o(e,t.v,t.w,t.name)}t.exports=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>void 0;_defaultEdgeLabelFn=()=>void 0;_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=!Object.hasOwn(e,"directed")||e.directed,this._isMultigraph=!!Object.hasOwn(e,"multigraph")&&e.multigraph,this._isCompound=!!Object.hasOwn(e,"compound")&&e.compound),this._isCompound&&(this._parent={},this._children={},this._children["\0"]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(t=>0===Object.keys(e._in[t]).length)}sinks(){var e=this;return this.nodes().filter(t=>0===Object.keys(e._out[t]).length)}setNodes(e,t){var n=arguments,r=this;return e.forEach(function(e){n.length>1?r.setNode(e,t):r.setNode(e)}),this}setNode(e,t){return Object.hasOwn(this._nodes,e)?arguments.length>1&&(this._nodes[e]=t):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){var t=this;if(Object.hasOwn(this._nodes,e)){var n=e=>t.removeEdge(t._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(e){t.setParent(e)}),delete this._children[e]),Object.keys(this._in[e]).forEach(n),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(void 0===t)t="\0";else{t+="";for(var n=t;void 0!==n;n=this.parent(n))if(n===e)throw Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}}children(e="\0"){if(this._isCompound){var t=this._children[e];if(t)return Object.keys(t)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]}predecessors(e){var t=this._preds[e];if(t)return Object.keys(t)}successors(e){var t=this._sucs[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){let r=new Set(t);for(var n of this.successors(e))r.add(n);return Array.from(r.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;Object.entries(this._nodes).forEach(function([n,r]){e(n)&&t.setNode(n,r)}),Object.values(this._edgeObjs).forEach(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});var r={};return this._isCompound&&t.nodes().forEach(e=>t.setParent(e,function e(i){var o=n.parent(i);return void 0===o||t.hasNode(o)?(r[i]=o,o):o in r?r[o]:e(o)}(e))),t}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,t){var n=this,r=arguments;return e.reduce(function(e,i){return r.length>1?n.setEdge(e,i,t):n.setEdge(e,i),i}),this}setEdge(){var e,t,n,i,a=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(e=s.v,t=s.w,n=s.name,2==arguments.length&&(i=arguments[1],a=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=""+e,t=""+t,void 0!==n&&(n=""+n);var u=o(this._isDirected,e,t,n);if(Object.hasOwn(this._edgeLabels,u))return a&&(this._edgeLabels[u]=i),this;if(void 0!==n&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[u]=a?i:this._defaultEdgeLabelFn(e,t,n);var l=function(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}(this._isDirected,e,t,n);return e=l.v,t=l.w,Object.freeze(l),this._edgeObjs[u]=l,r(this._preds[t],e),r(this._sucs[e],t),this._in[t][u]=l,this._out[e][u]=l,this._edgeCount++,this}edge(e,t,n){var r=1==arguments.length?a(this._isDirected,arguments[0]):o(this._isDirected,e,t,n);return this._edgeLabels[r]}edgeAsObj(){let e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,n){var r=1==arguments.length?a(this._isDirected,arguments[0]):o(this._isDirected,e,t,n);return Object.hasOwn(this._edgeLabels,r)}removeEdge(e,t,n){var r=1==arguments.length?a(this._isDirected,arguments[0]):o(this._isDirected,e,t,n),s=this._edgeObjs[r];return s&&(e=s.v,t=s.w,delete this._edgeLabels[r],delete this._edgeObjs[r],i(this._preds[t],e),i(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this}inEdges(e,t){var n=this._in[e];if(n){var r=Object.values(n);return t?r.filter(e=>e.v===t):r}}outEdges(e,t){var n=this._out[e];if(n){var r=Object.values(n);return t?r.filter(e=>e.w===t):r}}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}}},778040,(e,t,n)=>{t.exports="2.2.4"},991360,(e,t,n)=>{t.exports={Graph:e.r(781900),version:e.r(778040)}},303727,(e,t,n)=>{var r=e.r(781900);t.exports={write:function(e){var t,n,r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e).nodes().map(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return void 0!==n&&(i.value=n),void 0!==r&&(i.parent=r),i}),edges:(n=e).edges().map(function(e){var t=n.edge(e),r={v:e.v,w:e.w};return void 0!==e.name&&(r.name=e.name),void 0!==t&&(r.value=t),r})};return void 0!==e.graph()&&(r.value=structuredClone(e.graph())),r},read:function(e){var t=new r(e.options).setGraph(e.value);return e.nodes.forEach(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),e.edges.forEach(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},610143,(e,t,n)=>{t.exports=function(e){var t,n={},r=[];return e.nodes().forEach(function(i){t=[],function r(i){Object.hasOwn(n,i)||(n[i]=!0,t.push(i),e.successors(i).forEach(r),e.predecessors(i).forEach(r))}(i),t.length&&r.push(t)}),r}},565803,(e,t,n)=>{t.exports=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return Object.hasOwn(this._keyIndices,e)}priority(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority}min(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key}add(e,t){var n=this._keyIndices;if(!Object.hasOwn(n,e=String(e))){var r=this._arr,i=r.length;return n[e]=i,r.push({key:e,priority:t}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)}_heapify(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))}_decrease(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t}_swap(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t}}},808751,(e,t,n)=>{var r=e.r(565803);t.exports=function(e,t,n,o){return function(e,t,n,i){var o,a,s={},u=new r,l=function(e){var t=e.v!==o?e.v:e.w,r=s[t],i=n(e),l=a.distance+i;if(i<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);l<r.distance&&(r.distance=l,r.predecessor=o,u.decrease(t,l))};for(e.nodes().forEach(function(e){var n=e===t?0:1/0;s[e]={distance:n},u.add(e,n)});u.size()>0&&(a=s[o=u.removeMin()]).distance!==1/0;)i(o).forEach(l);return s}(e,String(t),n||i,o||function(t){return e.outEdges(t)})};var i=()=>1},920169,(e,t,n)=>{var r=e.r(808751);t.exports=function(e,t,n){return e.nodes().reduce(function(i,o){return i[o]=r(e,o,t,n),i},{})}},771495,(e,t,n)=>{t.exports=function(e){var t=0,n=[],r={},i=[];return e.nodes().forEach(function(o){Object.hasOwn(r,o)||function o(a){var s=r[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(e){Object.hasOwn(r,e)?r[e].onStack&&(s.lowlink=Math.min(s.lowlink,r[e].index)):(o(e),s.lowlink=Math.min(s.lowlink,r[e].lowlink))}),s.lowlink===s.index){var u,l=[];do r[u=n.pop()].onStack=!1,l.push(u);while(a!==u)i.push(l)}}(o)}),i}},80080,(e,t,n)=>{var r=e.r(771495);t.exports=function(e){return r(e).filter(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},511844,(e,t,n)=>{t.exports=function(e,t,n){var i,o,a,s,u;return i=e,o=t||r,a=n||function(t){return e.outEdges(t)},s={},(u=i.nodes()).forEach(function(e){s[e]={},s[e][e]={distance:0},u.forEach(function(t){e!==t&&(s[e][t]={distance:1/0})}),a(e).forEach(function(t){var n=t.v===e?t.w:t.v,r=o(t);s[e][n]={distance:r,predecessor:e}})}),u.forEach(function(e){var t=s[e];u.forEach(function(n){var r=s[n];u.forEach(function(n){var i=r[e],o=t[n],a=r[n],s=i.distance+o.distance;s<a.distance&&(a.distance=s,a.predecessor=o.predecessor)})})}),s};var r=()=>1},512908,(e,t,n)=>{function r(e){var t={},n={},r=[];if(e.sinks().forEach(function o(a){if(Object.hasOwn(n,a))throw new i;Object.hasOwn(t,a)||(n[a]=!0,t[a]=!0,e.predecessors(a).forEach(o),delete n[a],r.push(a))}),Object.keys(t).length!==e.nodeCount())throw new i;return r}class i extends Error{constructor(){super(...arguments)}}t.exports=r,r.CycleException=i},256090,(e,t,n)=>{var r=e.r(512908);t.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},744294,(e,t,n)=>{function r(e,t,n,r){for(var i=[[e,!1]];i.length>0;){var a=i.pop();a[1]?r.push(a[0]):Object.hasOwn(n,a[0])||(n[a[0]]=!0,i.push([a[0],!0]),o(t(a[0]),e=>i.push([e,!1])))}}function i(e,t,n,r){for(var i=[e];i.length>0;){var a=i.pop();Object.hasOwn(n,a)||(n[a]=!0,r.push(a),o(t(a),e=>i.push(e)))}}function o(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}t.exports=function(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?t=>e.successors(t):t=>e.neighbors(t),a="post"===n?r:i,s=[],u={};return t.forEach(t=>{if(!e.hasNode(t))throw Error("Graph does not have node: "+t);a(t,o,u,s)}),s}},275974,(e,t,n)=>{var r=e.r(744294);t.exports=function(e,t){return r(e,t,"post")}},988712,(e,t,n)=>{var r=e.r(744294);t.exports=function(e,t){return r(e,t,"pre")}},960253,(e,t,n)=>{var r=e.r(781900),i=e.r(565803);t.exports=function(e,t){var n,o=new r,a={},s=new i;function u(e){var r=e.v===n?e.w:e.v,i=s.priority(r);if(void 0!==i){var o=t(e);o<i&&(a[r]=n,s.decrease(r,o))}}if(0===e.nodeCount())return o;e.nodes().forEach(function(e){s.add(e,1/0),o.setNode(e)}),s.decrease(e.nodes()[0],0);for(var l=!1;s.size()>0;){if(Object.hasOwn(a,n=s.removeMin()))o.setEdge(n,a[n]);else if(l)throw Error("Input graph is not connected: "+e);else l=!0;e.nodeEdges(n).forEach(u)}return o}},966703,(e,t,n)=>{t.exports={components:e.r(610143),dijkstra:e.r(808751),dijkstraAll:e.r(920169),findCycles:e.r(80080),floydWarshall:e.r(511844),isAcyclic:e.r(256090),postorder:e.r(275974),preorder:e.r(988712),prim:e.r(960253),tarjan:e.r(771495),topsort:e.r(512908)}},703710,(e,t,n)=>{var r=e.r(991360);t.exports={Graph:r.Graph,json:e.r(303727),alg:e.r(966703),version:r.version}},284851,(e,t,n)=>{function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function i(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return r(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,n=t._prev;for(;n!==t;)e.push(JSON.stringify(n,i)),n=n._prev;return"["+e.join(", ")+"]"}}},848184,(e,t,n)=>{let r=e.r(703710).Graph,i=e.r(284851);t.exports=function(e,t){var n,u;let l,d,c,h,p;if(1>=e.nodeCount())return[];let f=(n=e,u=t||o,l=new r,d=0,c=0,n.nodes().forEach(e=>{l.setNode(e,{v:e,in:0,out:0})}),n.edges().forEach(e=>{let t=l.edge(e.v,e.w)||0,n=u(e);l.setEdge(e.v,e.w,t+n),c=Math.max(c,l.node(e.v).out+=n),d=Math.max(d,l.node(e.w).in+=n)}),h=(function(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t})(c+d+3).map(()=>new i),p=d+1,l.nodes().forEach(e=>{s(h,p,l.node(e))}),{graph:l,buckets:h,zeroIdx:p});return(function(e,t,n){let r,i=[],o=t[t.length-1],s=t[0];for(;e.nodeCount();){for(;r=s.dequeue();)a(e,t,n,r);for(;r=o.dequeue();)a(e,t,n,r);if(e.nodeCount()){for(let o=t.length-2;o>0;--o)if(r=t[o].dequeue()){i=i.concat(a(e,t,n,r,!0));break}}}return i})(f.graph,f.buckets,f.zeroIdx).flatMap(t=>e.outEdges(t.v,t.w))};let o=()=>1;function a(e,t,n,r,i){let o=i?[]:void 0;return e.inEdges(r.v).forEach(r=>{let a=e.edge(r),u=e.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=a,s(t,n,u)}),e.outEdges(r.v).forEach(r=>{let i=e.edge(r),o=r.w,a=e.node(o);a.in-=i,s(t,n,a)}),e.removeNode(r.v),o}function s(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},193625,(e,t,n)=>{"use strict";let r=e.r(703710).Graph;function i(e,t,n,r){for(var i=r;e.hasNode(i);)i=u(r);return n.dummy=t,e.setNode(i,n),i}t.exports={addBorderNode:function(e,t,n,r){let o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),i(e,"border",o,t)},addDummyNode:i,applyWithChunking:o,asNonCompoundGraph:function(e){let t=new r({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t},buildLayerMatrix:function(e){let t=l(a(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let r=e.node(n),i=r.rank;void 0!==i&&(t[i][r.order]=n)}),t},intersectRect:function(e,t){let n,r,i=e.x,o=e.y,a=t.x-i,s=t.y-o,u=e.width/2,l=e.height/2;if(!a&&!s)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*l?(s<0&&(l=-l),n=l*a/s,r=l):(a<0&&(u=-u),n=u,r=u*s/a),{x:i+n,y:o+r}},mapValues:function(e,t){let n=t;return"string"==typeof t&&(n=e=>e[t]),Object.entries(e).reduce((e,[t,r])=>(e[t]=n(r,t),e),{})},maxRank:a,normalizeRanks:function(e){let t=o(Math.min,e.nodes().map(t=>{let n=e.node(t).rank;return void 0===n?Number.MAX_VALUE:n}));e.nodes().forEach(n=>{let r=e.node(n);Object.hasOwn(r,"rank")&&(r.rank-=t)})},notime:function(e,t){return t()},partition:function(e,t){let n={lhs:[],rhs:[]};return e.forEach(e=>{t(e)?n.lhs.push(e):n.rhs.push(e)}),n},pick:function(e,t){let n={};for(let r of t)void 0!==e[r]&&(n[r]=e[r]);return n},predecessorWeights:function(e){let t=e.nodes().map(t=>{let n={};return e.inEdges(t).forEach(t=>{n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return d(e.nodes(),t)},range:l,removeEmptyRanks:function(e){let t=o(Math.min,e.nodes().map(t=>e.node(t).rank)),n=[];e.nodes().forEach(r=>{let i=e.node(r).rank-t;n[i]||(n[i]=[]),n[i].push(r)});let r=0,i=e.graph().nodeRankFactor;Array.from(n).forEach((t,n)=>{void 0===t&&n%i!=0?--r:void 0!==t&&r&&t.forEach(t=>e.node(t).rank+=r)})},simplify:function(e){let t=new r().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t},successorWeights:function(e){let t=e.nodes().map(t=>{let n={};return e.outEdges(t).forEach(t=>{n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return d(e.nodes(),t)},time:function(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}},uniqueId:u,zipObject:d};function o(e,t){if(!(t.length>65535))return e.apply(null,t);{let n=function(e,t=65535){let n=[];for(let r=0;r<e.length;r+=t){let i=e.slice(r,r+t);n.push(i)}return n}(t);return e.apply(null,n.map(t=>e.apply(null,t)))}}function a(e){return o(Math.max,e.nodes().map(t=>{let n=e.node(t).rank;return void 0===n?5e-324:n}))}let s=0;function u(e){return e+""+ ++s}function l(e,t,n=1){null==t&&(t=e,e=0);let r=e=>e<t;n<0&&(r=e=>t<e);let i=[];for(let t=e;r(t);t+=n)i.push(t);return i}function d(e,t){return e.reduce((e,n,r)=>(e[n]=t[r],e),{})}},875518,(e,t,n)=>{"use strict";let r=e.r(848184),i=e.r(193625).uniqueId;t.exports={run:function(e){var t,n;let o,a,s;("greedy"===e.graph().acyclicer?r(e,(t=e,e=>t.edge(e).weight)):(o=[],a={},s={},(n=e).nodes().forEach(function e(t){Object.hasOwn(s,t)||(s[t]=!0,a[t]=!0,n.outEdges(t).forEach(t=>{Object.hasOwn(a,t.w)?o.push(t):e(t.w)}),delete a[t])}),o)).forEach(t=>{let n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,i("rev"))})},undo:function(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}}},812163,(e,t,n)=>{"use strict";let r=e.r(193625);t.exports={run:function(e){e.graph().dummyChains=[],e.edges().forEach(t=>(function(e,t){let n,i,o,a=t.v,s=e.node(a).rank,u=t.w,l=e.node(u).rank,d=t.name,c=e.edge(t),h=c.labelRank;if(l!==s+1){for(e.removeEdge(t),o=0,++s;s<l;++o,++s)c.points=[],i={width:0,height:0,edgeLabel:c,edgeObj:t,rank:s},n=r.addDummyNode(e,"edge",i,"_d"),s===h&&(i.width=c.width,i.height=c.height,i.dummy="edge-label",i.labelpos=c.labelpos),e.setEdge(a,n,{weight:c.weight},d),0===o&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,u,{weight:c.weight},d)}})(e,t))},undo:function(e){e.graph().dummyChains.forEach(t=>{let n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)})}}},876553,(e,t,n)=>{"use strict";let{applyWithChunking:r}=e.r(193625);t.exports={longestPath:function(e){var t={};e.sources().forEach(function n(i){var o=e.node(i);if(Object.hasOwn(t,i))return o.rank;t[i]=!0;var a=r(Math.min,e.outEdges(i).map(t=>null==t?1/0:n(t.w)-e.edge(t).minlen));return a===1/0&&(a=0),o.rank=a})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},466166,(e,t,n)=>{"use strict";var r=e.r(703710).Graph,i=e.r(876553).slack;t.exports=function(e){var t,n,o,a,s=new r({directed:!1}),u=e.nodes()[0],l=e.nodeCount();for(s.setNode(u,{});t=s,n=e,t.nodes().forEach(function e(r){n.nodeEdges(r).forEach(o=>{var a=o.v,s=r===a?o.w:a;t.hasNode(s)||i(n,o)||(t.setNode(s,{}),t.setEdge(r,s,{}),e(s))})}),t.nodeCount()<l;)o=function(e,t){return t.edges().reduce((n,r)=>{let o=1/0;return(e.hasNode(r.v)!==e.hasNode(r.w)&&(o=i(t,r)),o<n[0])?[o,r]:n},[1/0,null])[1]}(s,e),a=s.hasNode(o.v)?i(e,o):-i(e,o),function(e,t,n){e.nodes().forEach(e=>t.node(e).rank+=n)}(s,e,a);return s}},498529,(e,t,n)=>{"use strict";var r=e.r(466166),i=e.r(876553).slack,o=e.r(876553).longestPath,a=e.r(703710).alg.preorder,s=e.r(703710).alg.postorder,u=e.r(193625).simplify;function l(e){o(e=u(e));var t,n,i=r(e);for(h(i),d(i,e);t=p(i);)n=f(i,e,t),g(i,e,t,n)}function d(e,t){var n=s(e,e.nodes());(n=n.slice(0,n.length-1)).forEach(n=>{var r,i,o,a;return r=e,i=t,o=n,a=r.node(o).parent,void(r.edge(o,a).cutvalue=c(r,i,o))})}function c(e,t,n){var r=e.node(n).parent,i=!0,o=t.edge(n,r),a=0;return o||(i=!1,o=t.edge(r,n)),a=o.weight,t.nodeEdges(n).forEach(o=>{var s=o.v===n,u=s?o.w:o.v;if(u!==r){var l,d,c,h=s===i,p=t.edge(o).weight;if(a+=h?p:-p,l=e,d=n,c=u,l.hasEdge(d,c)){var f=e.edge(n,u).cutvalue;a+=h?-f:f}}}),a}function h(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,n,r,i,o){var a=r,s=t.node(i);return n[i]=!0,t.neighbors(i).forEach(o=>{Object.hasOwn(n,o)||(r=e(t,n,r,o,i))}),s.low=a,s.lim=r++,o?s.parent=o:delete s.parent,r}(e,{},1,t)}function p(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function f(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var a=e.node(r),s=e.node(o),u=a,l=!1;return a.lim>s.lim&&(u=s,l=!0),t.edges().filter(t=>l===y(e,e.node(t.v),u)&&l!==y(e,e.node(t.w),u)).reduce((e,n)=>i(t,n)<i(t,e)?n:e)}function g(e,t,n,r){var i,o,s,u,l=n.v,c=n.w;e.removeEdge(l,c),e.setEdge(r.v,r.w,{}),h(e),d(e,t),i=e,o=t,s=i.nodes().find(e=>!o.node(e).parent),(u=(u=a(i,s)).slice(1)).forEach(e=>{var t=i.node(e).parent,n=o.edge(e,t),r=!1;n||(n=o.edge(t,e),r=!0),o.node(e).rank=o.node(t).rank+(r?n.minlen:-n.minlen)})}function y(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}t.exports=l,l.initLowLimValues=h,l.initCutValues=d,l.calcCutValue=c,l.leaveEdge=p,l.enterEdge=f,l.exchangeEdges=g},804347,(e,t,n)=>{"use strict";var r=e.r(876553).longestPath,i=e.r(466166),o=e.r(498529);t.exports=function(e){var t,n=e.graph().ranker;if(n instanceof Function)return n(e);switch(e.graph().ranker){case"network-simplex":default:o(e);break;case"tight-tree":r(t=e),i(t);break;case"longest-path":a(e);case"none":}};var a=r},452637,(e,t,n)=>{t.exports=function(e){var t;let n,r,i=(n={},r=0,(t=e).children().forEach(function e(i){let o=r;t.children(i).forEach(e),n[i]={low:o,lim:r++}}),n);e.graph().dummyChains.forEach(t=>{let n=e.node(t),r=n.edgeObj,o=function(e,t,n,r){let i,o,a=[],s=[],u=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim);i=n;do a.push(i=e.parent(i));while(i&&(t[i].low>u||l>t[i].lim))for(o=i,i=r;(i=e.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(e,i,r.v,r.w),a=o.path,s=o.lca,u=0,l=a[0],d=!0;for(;t!==r.w;){if(n=e.node(t),d){for(;(l=a[u])!==s&&e.node(l).maxRank<n.rank;)u++;l===s&&(d=!1)}if(!d){for(;u<a.length-1&&e.node(l=a[u+1]).minRank<=n.rank;)u++;l=a[u]}e.setParent(t,l),t=e.successors(t)[0]}})}},841909,(e,t,n)=>{let r=e.r(193625);t.exports={run:function(e){var t,n,i;let o=r.addDummyNode(e,"root",{},"_root"),a=(n={},(t=e).children().forEach(e=>(function e(r,i){var o=t.children(r);o&&o.length&&o.forEach(t=>e(t,i+1)),n[r]=i})(e,1)),n),s=Object.values(a),u=r.applyWithChunking(Math.max,s)-1,l=2*u+1;e.graph().nestingRoot=o,e.edges().forEach(t=>e.edge(t).minlen*=l);let d=(i=e).edges().reduce((e,t)=>e+i.edge(t).weight,0)+1;e.children().forEach(t=>(function e(t,n,i,o,a,s,u){let l=t.children(u);if(!l.length){u!==n&&t.setEdge(n,u,{weight:0,minlen:i});return}let d=r.addBorderNode(t,"_bt"),c=r.addBorderNode(t,"_bb"),h=t.node(u);t.setParent(d,u),h.borderTop=d,t.setParent(c,u),h.borderBottom=c,l.forEach(r=>{e(t,n,i,o,a,s,r);let l=t.node(r),h=l.borderTop?l.borderTop:r,p=l.borderBottom?l.borderBottom:r,f=l.borderTop?o:2*o,g=h!==p?1:a-s[u]+1;t.setEdge(d,h,{weight:f,minlen:g,nestingEdge:!0}),t.setEdge(p,c,{weight:f,minlen:g,nestingEdge:!0})}),t.parent(u)||t.setEdge(n,d,{weight:0,minlen:a+s[u]})})(e,o,l,d,u,a,t)),e.graph().nodeRankFactor=l},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(t=>{e.edge(t).nestingEdge&&e.removeEdge(t)})}}},211237,(e,t,n)=>{let r=e.r(193625);function i(e,t,n,i,o,a){let s=o[t][a-1],u=r.addDummyNode(e,"border",{width:0,height:0,rank:a,borderType:t},n);o[t][a]=u,e.setParent(u,i),s&&e.setEdge(s,u,{weight:1})}t.exports=function(e){e.children().forEach(function t(n){let r=e.children(n),o=e.node(n);if(r.length&&r.forEach(t),Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let t=o.minRank,r=o.maxRank+1;t<r;++t)i(e,"borderLeft","_bl",n,o,t),i(e,"borderRight","_br",n,o,t)}})}},642354,(e,t,n)=>{"use strict";function r(e){e.nodes().forEach(t=>i(e.node(t))),e.edges().forEach(t=>i(e.edge(t)))}function i(e){let t=e.width;e.width=e.height,e.height=t}function o(e){e.y=-e.y}function a(e){let t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){let t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&r(e)},undo:function(e){var t,n;let i=e.graph().rankdir.toLowerCase();("bt"===i||"rl"===i)&&((t=e).nodes().forEach(e=>o(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(o),Object.hasOwn(n,"y")&&o(n)})),("lr"===i||"rl"===i)&&((n=e).nodes().forEach(e=>a(n.node(e))),n.edges().forEach(e=>{let t=n.edge(e);t.points.forEach(a),Object.hasOwn(t,"x")&&a(t)}),r(e))}}},96511,(e,t,n)=>{"use strict";let r=e.r(193625);t.exports=function(e){let t={},n=e.nodes().filter(t=>!e.children(t).length),i=n.map(t=>e.node(t).rank),o=r.applyWithChunking(Math.max,i),a=r.range(o+1).map(()=>[]);return n.sort((t,n)=>e.node(t).rank-e.node(n).rank).forEach(function n(r){t[r]||(t[r]=!0,a[e.node(r).rank].push(r),e.successors(r).forEach(n))}),a}},239037,(e,t,n)=>{"use strict";let r=e.r(193625).zipObject;t.exports=function(e,t){let n=0;for(let i=1;i<t.length;++i)n+=function(e,t,n){let i=r(n,n.map((e,t)=>t)),o=t.flatMap(t=>e.outEdges(t).map(t=>({pos:i[t.w],weight:e.edge(t).weight})).sort((e,t)=>e.pos-t.pos)),a=1;for(;a<n.length;)a<<=1;let s=2*a-1;a-=1;let u=Array(s).fill(0),l=0;return o.forEach(e=>{let t=e.pos+a;u[t]+=e.weight;let n=0;for(;t>0;)t%2&&(n+=u[t+1]),t=t-1>>1,u[t]+=e.weight;l+=e.weight*n}),l}(e,t[i-1],t[i]);return n}},543507,(e,t,n)=>{t.exports=function(e,t=[]){return t.map(t=>{let n=e.inEdges(t);if(!n.length)return{v:t};{let r=n.reduce((t,n)=>{let r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}})}},990002,(e,t,n)=>{"use strict";let r=e.r(193625);t.exports=function(e,t){let n={};return e.forEach((e,t)=>{let r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(r.barycenter=e.barycenter,r.weight=e.weight)}),t.edges().forEach(e=>{let t=n[e.v],r=n[e.w];void 0!==t&&void 0!==r&&(r.indegree++,t.out.push(n[e.w]))}),function(e){let t=[];for(;e.length;){let n=e.pop();t.push(n),n.in.reverse().forEach(function(e){return t=>{!t.merged&&(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}(n)),n.out.forEach(function(t){return n=>{n.in.push(t),0==--n.indegree&&e.push(n)}}(n))}return t.filter(e=>!e.merged).map(e=>r.pick(e,["vs","i","barycenter","weight"]))}(Object.values(n).filter(e=>!e.indegree))}},667441,(e,t,n)=>{let r=e.r(193625);function i(e,t,n){let r;for(;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}t.exports=function(e,t){var n;let o=r.partition(e,e=>Object.hasOwn(e,"barycenter")),a=o.lhs,s=o.rhs.sort((e,t)=>t.i-e.i),u=[],l=0,d=0,c=0;a.sort((n=!!t,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i)),c=i(u,s,c),a.forEach(e=>{c+=e.vs.length,u.push(e.vs),l+=e.barycenter*e.weight,d+=e.weight,c=i(u,s,c)});let h={vs:u.flat(!0)};return d&&(h.barycenter=l/d,h.weight=d),h}},12646,(e,t,n)=>{let r=e.r(543507),i=e.r(990002),o=e.r(667441);t.exports=function e(t,n,a,s){var u,l;let d=t.children(n),c=t.node(n),h=c?c.borderLeft:void 0,p=c?c.borderRight:void 0,f={};h&&(d=d.filter(e=>e!==h&&e!==p));let g=r(t,d);g.forEach(n=>{if(t.children(n.v).length){var r,i;let o=e(t,n.v,a,s);f[n.v]=o,Object.hasOwn(o,"barycenter")&&(r=n,i=o,void 0!==r.barycenter?(r.barycenter=(r.barycenter*r.weight+i.barycenter*i.weight)/(r.weight+i.weight),r.weight+=i.weight):(r.barycenter=i.barycenter,r.weight=i.weight))}});let y=i(g,a);u=y,l=f,u.forEach(e=>{e.vs=e.vs.flatMap(e=>l[e]?l[e].vs:e)});let m=o(y,s);if(h&&(m.vs=[h,m.vs,p].flat(!0),t.predecessors(h).length)){let e=t.node(t.predecessors(h)[0]),n=t.node(t.predecessors(p)[0]);Object.hasOwn(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+e.order+n.order)/(m.weight+2),m.weight+=2}return m}},16693,(e,t,n)=>{let r=e.r(703710).Graph,i=e.r(193625);t.exports=function(e,t,n){let o=function(e){for(var t;e.hasNode(t=i.uniqueId("_root")););return t}(e),a=new r({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(t=>e.node(t));return e.nodes().forEach(r=>{let i=e.node(r),s=e.parent(r);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(a.setNode(r),a.setParent(r,s||o),e[n](r).forEach(t=>{let n=t.v===r?t.w:t.v,i=a.edge(n,r),o=void 0!==i?i.weight:0;a.setEdge(n,r,{weight:e.edge(t).weight+o})}),Object.hasOwn(i,"minRank")&&a.setNode(r,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),a}},655882,(e,t,n)=>{t.exports=function(e,t,n){let r={},i;n.forEach(n=>{let o=e.parent(n),a,s;for(;o;){if((a=e.parent(o))?(s=r[a],r[a]=o):(s=i,i=o),s&&s!==o)return void t.setEdge(s,o);o=a}})}},792149,(e,t,n)=>{"use strict";let r=e.r(96511),i=e.r(239037),o=e.r(12646),a=e.r(16693),s=e.r(655882),u=e.r(703710).Graph,l=e.r(193625);function d(e,t,n){return t.map(function(t){return a(e,t,n)})}function c(e,t){Object.values(t).forEach(t=>t.forEach((t,n)=>e.node(t).order=n))}t.exports=function e(t,n){if(n&&"function"==typeof n.customOrder)return void n.customOrder(t,e);let a=l.maxRank(t),h=d(t,l.range(1,a+1),"inEdges"),p=d(t,l.range(a-1,-1,-1),"outEdges"),f=r(t);if(c(t,f),n&&n.disableOptimalOrderHeuristic)return;let g=1/0,y;for(let e=0,n=0;n<4;++e,++n){(function(e,t){let n=new u;e.forEach(function(e){let r=e.graph().root,i=o(e,r,n,t);i.vs.forEach((t,n)=>e.node(t).order=n),s(e,n,i.vs)})})(e%2?h:p,e%4>=2),f=l.buildLayerMatrix(t);let r=i(t,f);r<g&&(n=0,y=Object.assign({},f),g=r)}c(t,y)}},543391,(e,t,n)=>{"use strict";let r=e.r(703710).Graph,i=e.r(193625);function o(e,t){let n={};return t.length&&t.reduce(function(t,r){let i=0,o=0,a=t.length,u=r[r.length-1];return r.forEach((t,l)=>{let d=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find(t=>e.node(t).dummy)}(e,t),c=d?e.node(d).order:a;(d||t===u)&&(r.slice(o,l+1).forEach(t=>{e.predecessors(t).forEach(r=>{let o=e.node(r),a=o.order;(a<i||c<a)&&!(o.dummy&&e.node(t).dummy)&&s(n,r,t)})}),o=l+1,i=c)}),r}),n}function a(e,t){let n={};function r(t,r,o,a,u){let l;i.range(r,o).forEach(r=>{l=t[r],e.node(l).dummy&&e.predecessors(l).forEach(t=>{let r=e.node(t);r.dummy&&(r.order<a||r.order>u)&&s(n,t,l)})})}return t.length&&t.reduce(function(t,n){let i=-1,o,a=0;return n.forEach((s,u)=>{if("border"===e.node(s).dummy){let t=e.predecessors(s);t.length&&(o=e.node(t[0]).order,r(n,a,u,i,o),a=u,i=o)}r(n,a,n.length,o,t.length)}),n}),n}function s(e,t,n){if(t>n){let e=t;t=n,n=e}let r=e[t];r||(e[t]=r={}),r[n]=!0}function u(e,t,n){if(t>n){let e=t;t=n,n=e}return!!e[t]&&Object.hasOwn(e[t],n)}function l(e,t,n,r){let i={},o={},a={};return t.forEach(e=>{e.forEach((e,t)=>{i[e]=e,o[e]=e,a[e]=t})}),t.forEach(e=>{let t=-1;e.forEach(e=>{let s=r(e);if(s.length){let r=((s=s.sort((e,t)=>a[e]-a[t])).length-1)/2;for(let l=Math.floor(r),d=Math.ceil(r);l<=d;++l){let r=s[l];o[e]===e&&t<a[r]&&!u(n,e,r)&&(o[r]=e,o[e]=i[e]=i[r],t=a[r])}}})}),{root:i,align:o}}function d(e,t,n,i,o){var a,s,u,l,d,c,h;let p,f,g,y={},m=(a=e,s=t,u=n,l=o,p=new r,g=(d=(f=a.graph()).nodesep,c=f.edgesep,h=l,(e,t,n)=>{let r,i,o=e.node(t),a=e.node(n);if(r=0+o.width/2,Object.hasOwn(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":i=-o.width/2;break;case"r":i=o.width/2}if(i&&(r+=h?i:-i),i=0,r+=(o.dummy?c:d)/2,r+=(a.dummy?c:d)/2,r+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":i=a.width/2;break;case"r":i=-a.width/2}return i&&(r+=h?i:-i),i=0,r}),s.forEach(e=>{let t;e.forEach(e=>{let n=u[e];if(p.setNode(n),t){var r=u[t],i=p.edge(r,n);p.setEdge(r,n,Math.max(g(a,e,t),i||0))}t=e})}),p),v=o?"borderLeft":"borderRight";function x(e,t){let n=m.nodes(),r=n.pop(),i={};for(;r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return x(function(e){y[e]=m.inEdges(e).reduce((e,t)=>Math.max(e,y[t.v]+m.edge(t)),0)},m.predecessors.bind(m)),x(function(t){let n=m.outEdges(t).reduce((e,t)=>Math.min(e,y[t.w]-m.edge(t)),1/0),r=e.node(t);n!==1/0&&r.borderType!==v&&(y[t]=Math.max(y[t],n))},m.successors.bind(m)),Object.keys(i).forEach(e=>y[e]=y[n[e]]),y}function c(e,t){return Object.values(t).reduce((t,n)=>{let r=-1/0,i=1/0;Object.entries(n).forEach(([t,n])=>{var o,a;let s=(o=e,a=t,o.node(a).width/2);r=Math.max(n+s,r),i=Math.min(n-s,i)});let o=r-i;return o<t[0]&&(t=[o,n]),t},[1/0,null])[1]}function h(e,t){let n=Object.values(t),r=i.applyWithChunking(Math.min,n),o=i.applyWithChunking(Math.max,n);["u","d"].forEach(n=>{["l","r"].forEach(a=>{let s=n+a,u=e[s];if(u===t)return;let l=Object.values(u),d=r-i.applyWithChunking(Math.min,l);"l"!==a&&(d=o-i.applyWithChunking(Math.max,l)),d&&(e[s]=i.mapValues(u,e=>e+d))})})}function p(e,t){return i.mapValues(e.ul,(n,r)=>{if(t)return e[t.toLowerCase()][r];{let t=Object.values(e).map(e=>e[r]).sort((e,t)=>e-t);return(t[1]+t[2])/2}})}t.exports={positionX:function(e){let t,n=i.buildLayerMatrix(e),r=Object.assign(o(e,n),a(e,n)),s={};["u","d"].forEach(o=>{t="u"===o?n:Object.values(n).reverse(),["l","r"].forEach(n=>{"r"===n&&(t=t.map(e=>Object.values(e).reverse()));let a=("u"===o?e.predecessors:e.successors).bind(e),u=l(e,t,r,a),c=d(e,t,u.root,u.align,"r"===n);"r"===n&&(c=i.mapValues(c,e=>-e)),s[o+n]=c})});let u=c(e,s);return h(s,u),p(s,e.graph().align)},findType1Conflicts:o,findType2Conflicts:a,addConflict:s,hasConflict:u,verticalAlignment:l,horizontalCompaction:d,alignCoordinates:h,findSmallestWidthAlignment:c,balance:p}},212521,(e,t,n)=>{"use strict";let r=e.r(193625),i=e.r(543391).positionX;t.exports=function(e){var t;let n,o,a;t=e=r.asNonCompoundGraph(e),n=r.buildLayerMatrix(t),o=t.graph().ranksep,a=0,n.forEach(e=>{let n=e.reduce((e,n)=>{let r=t.node(n).height;return e>r?e:r},0);e.forEach(e=>t.node(e).y=a+n/2),a+=n+o}),Object.entries(i(e)).forEach(([t,n])=>e.node(t).x=n)}},343825,(e,t,n)=>{"use strict";let r=e.r(875518),i=e.r(812163),o=e.r(804347),a=e.r(193625).normalizeRanks,s=e.r(452637),u=e.r(193625).removeEmptyRanks,l=e.r(841909),d=e.r(211237),c=e.r(642354),h=e.r(792149),p=e.r(212521),f=e.r(193625),g=e.r(703710).Graph;t.exports=function(e,t){let n=t&&t.debugTiming?f.time:f.notime;n("layout",()=>{let M=n("  buildLayoutGraph",()=>{var t;let n,r;return t=e,n=new g({multigraph:!0,compound:!0}),r=S(t.graph()),n.setGraph(Object.assign({},m,T(r,y),f.pick(r,v))),t.nodes().forEach(e=>{let r=T(S(t.node(e)),x);Object.keys(w).forEach(e=>{void 0===r[e]&&(r[e]=w[e])}),n.setNode(e,r),n.setParent(e,t.parent(e))}),t.edges().forEach(e=>{let r=S(t.edge(e));n.setEdge(e,Object.assign({},b,T(r,_),f.pick(r,E)))}),n});n("  runLayout",()=>{var e,g,y;return e=M,g=n,y=t,void(g("    makeSpaceForEdgeLabels",()=>{var t;let n;return n=(t=e).graph(),void(n.ranksep/=2,t.edges().forEach(e=>{let r=t.edge(e);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}),g("    removeSelfEdges",()=>{var t;(t=e).edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}),g("    acyclic",()=>r.run(e)),g("    nestingGraph.run",()=>l.run(e)),g("    rank",()=>o(f.asNonCompoundGraph(e))),g("    injectEdgeLabelProxies",()=>{var t;(t=e).edges().forEach(e=>{let n=t.edge(e);if(n.width&&n.height){let n=t.node(e.v),r={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};f.addDummyNode(t,"edge-proxy",r,"_ep")}})}),g("    removeEmptyRanks",()=>u(e)),g("    nestingGraph.cleanup",()=>l.cleanup(e)),g("    normalizeRanks",()=>a(e)),g("    assignRankMinMax",()=>{var t;let n;return n=0,void((t=e).nodes().forEach(e=>{let r=t.node(e);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,n=Math.max(n,r.maxRank))}),t.graph().maxRank=n)}),g("    removeEdgeLabelProxies",()=>{var t;(t=e).nodes().forEach(e=>{let n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}),g("    normalize.run",()=>i.run(e)),g("    parentDummyChains",()=>s(e)),g("    addBorderSegments",()=>d(e)),g("    order",()=>h(e,y)),g("    insertSelfEdges",()=>{var t;return t=e,void f.buildLayerMatrix(t).forEach(e=>{var n=0;e.forEach((e,r)=>{var i=t.node(e);i.order=r+n,(i.selfEdges||[]).forEach(e=>{f.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}),g("    adjustCoordinateSystem",()=>c.adjust(e)),g("    position",()=>p(e)),g("    positionSelfEdges",()=>{var t;(t=e).nodes().forEach(e=>{var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}),g("    removeBorderNodes",()=>{var t;(t=e).nodes().forEach(e=>{if(t.children(e).length){let n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(n.borderLeft[n.borderLeft.length-1]),a=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{"border"===t.node(e).dummy&&t.removeNode(e)})}),g("    normalize.undo",()=>i.undo(e)),g("    fixupEdgeLabelCoords",()=>{var t;(t=e).edges().forEach(e=>{let n=t.edge(e);if(Object.hasOwn(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}),g("    undoCoordinateSystem",()=>c.undo(e)),g("    translateGraph",()=>(function(e){let t=1/0,n=0,r=1/0,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0;function u(e){let o=e.x,a=e.y,s=e.width,u=e.height;t=Math.min(t,o-s/2),n=Math.max(n,o+s/2),r=Math.min(r,a-u/2),i=Math.max(i,a+u/2)}e.nodes().forEach(t=>u(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);Object.hasOwn(n,"x")&&u(n)}),t-=a,r-=s,e.nodes().forEach(n=>{let i=e.node(n);i.x-=t,i.y-=r}),e.edges().forEach(n=>{let i=e.edge(n);i.points.forEach(e=>{e.x-=t,e.y-=r}),Object.hasOwn(i,"x")&&(i.x-=t),Object.hasOwn(i,"y")&&(i.y-=r)}),o.width=n-t+a,o.height=i-r+s})(e)),g("    assignNodeIntersects",()=>{var t;(t=e).edges().forEach(e=>{let n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(f.intersectRect(o,n)),i.points.push(f.intersectRect(a,r))})}),g("    reversePoints",()=>{var t;(t=e).edges().forEach(e=>{let n=t.edge(e);n.reversed&&n.points.reverse()})}),g("    acyclic.undo",()=>r.undo(e)))}),n("  updateInputGraph",()=>{var t,n;return t=e,n=M,void(t.nodes().forEach(e=>{let r=t.node(e),i=n.node(e);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,n.children(e).length&&(r.width=i.width,r.height=i.height))}),t.edges().forEach(e=>{let r=t.edge(e),i=n.edge(e);r.points=i.points,Object.hasOwn(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=n.graph().width,t.graph().height=n.graph().height)})})};let y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},v=["acyclicer","ranker","rankdir","align"],x=["width","height","rank"],w={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],b={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function T(e,t){return f.mapValues(f.pick(e,t),Number)}function S(e){var t={};return e&&Object.entries(e).forEach(([e,n])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=n}),t}},980902,(e,t,n)=>{let r=e.r(193625),i=e.r(703710).Graph;t.exports={debugOrdering:function(e){let t=r.buildLayerMatrix(e),n=new i({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(t=>{n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),e.edges().forEach(e=>n.setEdge(e.v,e.w,{},e.name)),t.forEach((e,t)=>{n.setNode("layer"+t,{rank:"same"}),e.reduce((e,t)=>(n.setEdge(e,t,{style:"invis"}),t))}),n}}},627939,(e,t,n)=>{t.exports="1.1.5"},543385,(e,t,n)=>{t.exports={graphlib:e.r(703710),layout:e.r(343825),debug:e.r(980902),util:{time:e.r(193625).time,notime:e.r(193625).notime},version:e.r(627939)}},99264,e=>{"use strict";var t=e.i(250464),n=e.i(543385),r=e.i(830675),i=e.i(368964);let o=e=>({markerEnd:{type:t.MarkerType.ArrowClosed,width:20,height:20,color:"#8e8e8e"},selectable:!1,...e?{style:{strokeDasharray:"2 2",opacity:.5}}:{}}),a="missing-step-id",s="trigger";function u(e){return e===a&&r.captureException(Error("No string provided for step node in Agent Stack Playground")),e.replace(/[-_]/g," ").split(" ").filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}let l=({stepFlow:e,xIndex:t,yIndex:n,prevNodeIds:r,prevStepIds:s,nextStepFlow:d,condition:c,allPrevNodeIds:h,triggerType:p,isFirstStep:f,isPreview:g})=>{let y=[],m=[];if((d?.type==="step"||d?.type==="foreach"||d?.type==="loop"||d?.type==="waitForEvent")&&(y=[h?.includes(d.step.id)?`${d.step.id}-${n+1}`:d.step.id],m=[d.step.id]),(d?.type==="sleep"||d?.type==="sleepUntil")&&(y=[h?.includes(d.id)?`${d.id}-${n+1}`:d.id],m=[d.id]),d?.type==="parallel"&&(y=d?.steps.map(e=>{let t=e.step.id;return h?.includes(t)?`${t}-${n+1}`:t})||[],m=d?.steps.map(e=>e.step.id)||[]),d?.type==="conditional"&&(y=d?.serializedConditions.map(e=>e.id)||[],m=d?.steps?.map(e=>e.step.id)||[]),"step"===e.type||"foreach"===e.type||"waitForEvent"===e.type){let l=h?.includes(e.step.id)?`${e.step.id}-${n}`:e.step.id;return{nodes:[...c?[{id:c.id,position:{x:300*t,y:100*n},type:"conditionalNode",data:{stepId:c.id,label:u(c.id),description:`Condition: ${c.fn}`,previousStepId:s[s.length-1],nextStepId:e.step.id}}]:[],{id:l,position:{x:300*t,y:(n+ +!!c)*100},type:"stepNode",data:{label:u(e.step.id??a),description:e.step.description||("waitForEvent"===e.type?`Wait for event: ${e.event}`:void 0),stepId:e.step.id,isAgentStep:f&&(p===i.AgentStackPlatformType.Slack||p===i.AgentStackPlatformType.Telegram)}}],edges:[...r.length?c?[...r.map((t,n)=>({id:`e${t}-${c.id}`,source:t,data:{previousStepId:s[n],nextStepId:e.step.id},target:c.id,...o(g)})),{id:`e${c.id}-${l}`,source:c.id,data:{previousStepId:s[s.length-1],nextStepId:e.step.id},target:l,...o(g)}]:r.map((t,n)=>({id:`e${t}-${l}`,source:t,data:{previousStepId:s[n],nextStepId:e.step.id},target:l,...o(g)})):[],...y.length?y.map((t,n)=>({id:`e${l}-${t}`,source:l,data:{previousStepId:e.step.id,nextStepId:m[n]},target:t,...o(g)})):[]],nextPrevNodeIds:[l],nextPrevStepIds:[e.step.id]}}if("sleep"===e.type||"sleepUntil"===e.type){let i=h?.includes(e.id)?`${e.id}-${n}`:e.id;return{nodes:[...c?[{id:c.id,position:{x:300*t,y:100*n},type:"conditionalNode",data:{stepId:c.id,label:u(c.id),description:`Condition: ${c.fn}`}}]:[],{id:i,position:{x:300*t,y:(n+ +!!c)*100},type:"sleepNode",data:{label:u(e.id),description:"sleepUntil"===e.type?`Sleep until: ${e.date||"date"}`:`Sleep for: ${e.duration||"duration"}`,stepId:i}}],edges:[...r.length?c?[...r.map((t,n)=>({id:`e${t}-${c.id}`,source:t,data:{previousStepId:s[n],nextStepId:e.id},target:c.id,...o(g)})),{id:`e${c.id}-${i}`,source:c.id,data:{previousStepId:s[s.length-1],nextStepId:e.id},target:i,...o(g)}]:r.map((t,n)=>({id:`e${t}-${i}`,source:t,data:{previousStepId:s[n],nextStepId:e.id},target:i,...o(g)})):[],...y.length?y.map((t,n)=>({id:`e${i}-${t}`,source:i,data:{previousStepId:e.id,nextStepId:m[n]},target:t,...o(g)})):[]],nextPrevNodeIds:[i],nextPrevStepIds:[e.id]}}if("loop"===e.type){let{step:i,serializedCondition:a,loopType:l}=e;return{nodes:[{id:i.id,position:{x:300*t,y:100*n},type:"loopNode",data:{label:u(i.id),description:i.description||"Loop iteration",stepId:i.id}},{id:a.id,position:{x:300*t,y:(n+1)*100},type:"conditionalNode",data:{stepId:i.id,label:u(a.id),description:`${l} condition: ${a.fn}`}}],edges:[...r.length?r.map((e,t)=>({id:`e${e}-${i.id}`,source:e,data:{previousStepId:s[t],nextStepId:i.id},target:i.id,...o(g)})):[],{id:`e${i.id}-${a.id}`,source:i.id,data:{previousStepId:i.id,nextStepId:m[0]},target:a.id,...o(g)},...y.length?y.map((e,t)=>({id:`e${a.id}-${e}`,source:a.id,data:{previousStepId:i.id,nextStepId:m[t]},target:e,...o(g)})):[]],nextPrevNodeIds:[a.id],nextPrevStepIds:[i.id]}}if("parallel"===e.type){let t=[],i=[],o=[];return e.steps.forEach((e,a)=>{let{nodes:u,edges:c,nextPrevStepIds:f}=l({stepFlow:e,xIndex:a,yIndex:n,prevNodeIds:r,prevStepIds:s,nextStepFlow:d,allPrevNodeIds:h,triggerType:p,isFirstStep:!1,isPreview:g});t.push(...u),i.push(...c),o.push(...f)}),{nodes:t,edges:i,nextPrevNodeIds:t.map(e=>e.id),nextPrevStepIds:o}}if("conditional"===e.type){let t=[],i=[],o=[];return e.steps.forEach((a,u)=>{let{nodes:c,edges:f,nextPrevStepIds:y}=l({stepFlow:a,xIndex:u,yIndex:n,prevNodeIds:r,prevStepIds:s,nextStepFlow:d,condition:e.serializedConditions[u],allPrevNodeIds:h,triggerType:p,isFirstStep:!1,isPreview:g});t.push(...c),i.push(...f),o.push(...y)}),{nodes:t,edges:i,nextPrevNodeIds:t.map(e=>e.id),nextPrevStepIds:o}}return{nodes:[],edges:[],nextPrevNodeIds:[],nextPrevStepIds:[]}};e.s(["TRIGGER_NODE_ID",0,s,"constructNodesAndEdges",0,(e,t=i.AgentStackPlatformType.TimeBased,r=!1)=>{let o;if(!e)return{nodes:[],edges:[]};if(0===e.length)return{nodes:[{id:s,position:{x:0,y:0},type:"triggerNode",data:{}}],edges:[]};let a=[],u=[];a.push({id:s,position:{x:0,y:0},type:"triggerNode",data:{}});let d=[s],c=[s],h=[s];for(let n=0;n<e.length;n++){let{nodes:i,edges:o,nextPrevNodeIds:s,nextPrevStepIds:p}=l({stepFlow:e[n],xIndex:n,yIndex:n,prevNodeIds:d,prevStepIds:c,nextStepFlow:n===e.length-1?void 0:e[n+1],allPrevNodeIds:h,triggerType:t,isFirstStep:0===n,isPreview:r});a.push(...i),u.push(...o),d=s,c=p,h.push(...d)}let{nodes:p,edges:f}=((o=new n.graphlib.Graph().setDefaultEdgeLabel(()=>({}))).setGraph({rankdir:"TB"}),u.forEach(e=>o.setEdge(e.source,e.target)),a.forEach(e=>o.setNode(e.id,{...e,width:360,height:100})),n.layout(o),{nodes:a.map(e=>{let t=o.node(e.id),n=t.x-180,r=t.y-50;return{...e,position:{x:n,y:r}}}),edges:u,fullWidth:0,fullHeight:0});return{nodes:p,edges:f}},"kebabCaseToSentenceCase",()=>u])},854760,e=>{"use strict";function t(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").split(/[_.]/g).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function n(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function r(e){return e.toLowerCase().replaceAll("_","-")}e.s(["formatConnectorName",()=>n,"formatOpenIntWebhookEventName",()=>t,"normalizeConnectorName",()=>r])}]);

//# debugId=0f93767e-1057-f389-2847-3692de8c673f
//# sourceMappingURL=216364330b773319.js.map