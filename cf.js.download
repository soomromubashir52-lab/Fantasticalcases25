
        window.CFQ = window.CFQ || [];
        window.CFQ.push({
          projectData: {
            scriptVersion: 'modern',
            segmentationHeaders: {"x-viewer-country":"PK","x-viewer-region":"SD","x-viewer-city":"Karachi","x-is-mobile-viewer":"false","x-is-bot":"false","x-is-blocklist-ip":"false"},
            project: {"org_id":"68c9ad3d4cddb58cf3a1f938","holdout_info":{"holdout_experiment_id":"68c9ad4d4cddb58cf3a1f93a","holdout_experiment_slug":"global_holdout_f93a","holdout_variant_id":"68c9ad4d4cddb58cf3a1f93b","holdout_variant_slug":"global_baseline_f93b","treatment_variant_id":"68c9ad4d4cddb58cf3a1f93c","treatment_variant_slug":"global_treatment_f93c","seed":190941316,"variant_bins":{"68c9ad4d4cddb58cf3a1f93b":[[0,4999]],"68c9ad4d4cddb58cf3a1f93c":[[5000,99999]]}},"frames":[],"audiences":{"68f6f06ec2be5433c8e1fd25":{"selector":{}},"6967e967b07a350c8fb580c1":{"selector":{"language":["ja"]}},"6967ea1eca9c1d66ba5880f0":{"selector":{"language":["it"]}},"6967ea32ca9c1d66ba5880f6":{"selector":{"language":["ko"]}},"6967ea3eca9c1d66ba5880fc":{"selector":{"language":["pt"]}},"6967ea4cb07a350c8fb580c7":{"selector":{"language":["tr"]}}},"metrics":[{"id":"68c9b1553c70c3231c438931","selector":{"and":[{"url":"https://replit.com/"},{"or":[{"universal":{"t":"button","fingerprint":"32870f90","n":{"i":1,"t":1},"ariaLabel":"Start building your app idea","p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":3,"t":3},"p":{"t":"div","n":{"i":2,"t":2},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"section","n":{"i":4,"t":6},"p":{"t":"div","n":{"i":1,"t":9},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"main","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","id":"__next","n":{"i":1,"t":2},"p":{"t":"body","n":{"i":1,"t":1},"p":{"t":"html"}}}}}}}}}}}}}},"descendants":[{"depth":1,"sel":{"t":"span","text":"Start building with AI","n":{"i":1,"t":1}}}]}},{"universal":{"t":"a","fingerprint":"121c68b1","n":{"i":2,"t":2},"href":"/signup","p":{"t":"nav","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":4,"t":4},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":3},"p":{"t":"header","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","id":"__next","n":{"i":1,"t":2},"p":{"t":"body","n":{"i":1,"t":1},"p":{"t":"html"}}}}}}}}}},"descendants":[{"depth":1,"sel":{"t":"span","text":"Sign up","n":{"i":1,"t":1}}}]}}]}]}},{"id":"68cde1927c0bfc7f9cc1ebb7","selector":{"and":[{"url":"https://staging.replit.com/"},{"or":[{"universal":{"t":"button","fingerprint":"32870f90","n":{"i":1,"t":1},"ariaLabel":"Start building your app idea","p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":3,"t":3},"p":{"t":"div","n":{"i":2,"t":2},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"section","n":{"i":4,"t":6},"p":{"t":"div","n":{"i":1,"t":9},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"main","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","id":"__next","n":{"i":1,"t":2},"p":{"t":"body","n":{"i":1,"t":1},"p":{"t":"html"}}}}}}}}}}}}}},"descendants":[{"depth":1,"sel":{"t":"span","text":"Start building with AI","n":{"i":1,"t":1}}}]}},{"universal":{"t":"a","fingerprint":"121c68b1","n":{"i":2,"t":2},"href":"/signup","p":{"t":"nav","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":4,"t":4},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":3},"p":{"t":"header","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","id":"__next","n":{"i":1,"t":2},"p":{"t":"body","n":{"i":1,"t":1},"p":{"t":"html"}}}}}}}}}},"descendants":[{"depth":1,"sel":{"t":"span","text":"Sign up","n":{"i":1,"t":1}}}]}}]}]}},{"id":"68d1cdc1ca209329fe9a53f8","selector":{}},{"id":"68d1cdeb7c0bfc7f9cc1ebe0","selector":{}},{"id":"68daf9aa1e6391afbbf4eaaf","selector":{"and":[{"url":"https://replit.com/enterprise"},{"or":[{"universal":{"t":"button","fingerprint":"1d4dad54","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":6,"t":6},"p":{"t":"form","n":{"i":1,"t":1},"p":{"t":"section","id":"inlineForm","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"dialog","ariaLabel":"Contact Sales","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":3,"t":3},"p":{"t":"body","n":{"i":1,"t":1},"p":{"t":"html"}}}}}}}},"descendants":[{"depth":1,"sel":{"t":"span","text":"Contact Sales","n":{"i":1,"t":1}}}]}},{"universal":{"t":"button","fingerprint":"6293423b","n":{"i":1,"t":1},"text":"Request demo","p":{"t":"form","id":"cf-demo-form","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":2,"t":2},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"section","n":{"i":2,"t":5},"p":{"t":"div","n":{"i":1,"t":10},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"main","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","id":"__next","n":{"i":1,"t":1},"p":{"t":"body","n":{"i":1,"t":1},"p":{"t":"html"}}}}}}}}}}}}}}]}]}},{"id":"6901949bacea5b0dc096d6d8","selector":{"and":[{"url":"https://replit.com/enterprise"},{"universal":{"t":"button","fingerprint":"3b65f6d","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":2,"t":2},"p":{"t":"form","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":2,"t":2},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"section","n":{"i":2,"t":5},"p":{"t":"div","n":{"i":1,"t":11},"p":{"t":"div","n":{"i":1,"t":1},"p":{"t":"main","n":{"i":1,"t":1},"p":{"t":"div","id":"__next","n":{"i":1,"t":2},"p":{"t":"body","n":{"i":1,"t":1},"p":{"t":"html"}}}}}}}}}}}}},"descendants":[{"depth":1,"sel":{"t":"span","text":"Contact Sales","n":{"i":1,"t":1}}}]}}]}},{"id":"690d9ef0c5783f175aa5b0ce","selector":{},"js_binder":"function (args) {\n  const TARGET_TEXT = 'Thank you for your interest in Replit Teams!'\n  const REPORTED = new WeakSet()\n\n  const startObserver = () => {\n    console.log('[Coframe] Replit Enterprise watcher loaded')\n\n    const observer = new MutationObserver((mutations) => {\n      if (!window.location.pathname.includes('enterprise')) return\n\n      for (const mutation of mutations) {\n        // only detect added nodes\n        mutation.addedNodes.forEach((node) => {\n          if (!(node instanceof HTMLElement)) return\n\n          const text = node.textContent?.trim() ?? ''\n          if (text.includes(TARGET_TEXT) && !REPORTED.has(node)) {\n            console.log('[Coframe] Replit Enterprise form successful submission event sent')\n\n            window.CFQ = window.CFQ || []\n            window.CFQ.push({\n              emit: 'conversion',\n              payload: { metricId: args.metricId },\n            })\n\n            REPORTED.add(node)\n          }\n        })\n      }\n    })\n\n    observer.observe(document.body, { childList: true, subtree: true })\n  }\n\n  if (document.body) startObserver()\n  else document.addEventListener('DOMContentLoaded', startObserver)\n}\n"},{"id":"6986ae7ecb6f50956b98ea28","selector":{"navigate_to_url_starts_with":"https://replit.com/signup"}}],"settings":{"mutation_observer_active":true,"track_only_activated_frames":false,"bot_traffic_ignore":true,"blocklist_ip_traffic_ignored":true,"bot_cloaking_enabled":false,"blocklist_cloaking_enabled":false,"analytics_integrations":null},"tags":[{"name":"Pricing Banner: `The Teams plan will be replaced soon by the new Pro plan.`","js":"(function () {\n  // ===============================\n  // CONFIG\n  // ===============================\n  var TARGET_PATH = \"/pricing\";\n\n  // ===============================\n  // INTERNAL STATE\n  // ===============================\n  var HAS_RUN = false;\n\n  function normalizePath(path) {\n    return path.replace(/\\/+$/, \"\");\n  }\n\n  function isTargetPage() {\n    return normalizePath(window.location.pathname) === TARGET_PATH;\n  }\n\n  function tryRun() {\n    if (HAS_RUN) return;\n    if (!isTargetPage()) return;\n\n    HAS_RUN = true;\n    runVariant();\n  }\n\n  // Initial check\n  tryRun();\n\n  // Observe DOM changes for SPA renders\n  var observer = new MutationObserver(function () {\n    tryRun();\n  });\n\n  observer.observe(document.documentElement, {\n    childList: true,\n    subtree: true\n  });\n\n  // Hook History API for SPA routing\n  [\"pushState\", \"replaceState\"].forEach(function (method) {\n    var original = history[method];\n    history[method] = function () {\n      var result = original.apply(this, arguments);\n      setTimeout(tryRun, 0);\n      return result;\n    };\n  });\n\n  // Back and forward navigation\n  window.addEventListener(\"popstate\", function () {\n    setTimeout(tryRun, 0);\n  });\n\n  // ===============================\n  // PASTE VARIANT CODE BELOW\n  // ===============================\n  function runVariant() {\n    /*! Code generated by Coframe AI Editor */\n/*! Transpiled: 2026-01-21T21:53:47.984Z */\n/*! Share ID: 62ed155b-663d-4bd5-8f99-da0baf0defd0 */\n(()=>{var d=Symbol.for(\"JSX.Fragment\"),p=\"http://www.w3.org/2000/svg\",h=new Set([\"svg\",\"animate\",\"animateMotion\",\"animateTransform\",\"circle\",\"clipPath\",\"defs\",\"desc\",\"ellipse\",\"feBlend\",\"feColorMatrix\",\"feComponentTransfer\",\"feComposite\",\"feConvolveMatrix\",\"feDiffuseLighting\",\"feDisplacementMap\",\"feDistantLight\",\"feDropShadow\",\"feFlood\",\"feFuncA\",\"feFuncB\",\"feFuncG\",\"feFuncR\",\"feGaussianBlur\",\"feImage\",\"feMerge\",\"feMergeNode\",\"feMorphology\",\"feOffset\",\"fePointLight\",\"feSpecularLighting\",\"feSpotLight\",\"feTile\",\"feTurbulence\",\"filter\",\"foreignObject\",\"g\",\"image\",\"line\",\"linearGradient\",\"marker\",\"mask\",\"metadata\",\"mpath\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialGradient\",\"rect\",\"set\",\"stop\",\"switch\",\"symbol\",\"text\",\"textPath\",\"title\",\"tspan\",\"use\",\"view\"]);function o(e,a,...i){if(e==null){let s=b(),u=a&&Object.keys(a).length>0,c=i&&i.length>0,f;u?f=`<${e}\n  ${Object.entries(a).map(([g,y])=>`${g}=${JSON.stringify(y)}`).join(`\n  `)}${c?\">\":\"\"}`:f=`<${e}${c?\">\":\"\"}`;let l;throw c?l=`\n  {/* children.length: ${i.length} */}\n</${e}>`:l=u?`\n/>`:\"/>\",new Error(`Invalid element type: \\`${e}\\`.\n\n**Hint**: Look for code like this:\n${f}${l}\n${s?`within ${JSON.stringify(s)}.`:\"\"}\n`)}if(e===d){let s=document.createDocumentFragment();return m(s,i),s}if(typeof e==\"function\")return e({...a||{},children:E(i)});let n=typeof e==\"string\"?e:String(e),t=h.has(n),r=t?document.createElementNS(p,n):document.createElement(n);return a&&S(r,a,t),m(r,i),r}function b(){return new Error().stack?.split(`\n`)?.[3]?.trim().replace(/^at\\s+/,\"\")}function S(e,a,i){for(let n in a){if(n===\"key\")continue;let t=a[n];if(n===\"ref\"){typeof t==\"function\"?t(e):t&&typeof t==\"object\"&&(t.current=e);continue}if(n===\"class\"||n===\"className\"){A(e,t,i);continue}if(n===\"style\"){w(e,t);continue}if(n===\"dataset\"&&t&&typeof t==\"object\"){for(let r in t)e.dataset[r]=String(t[r]);continue}if(n===\"dangerouslySetInnerHTML\"&&t&&typeof t==\"object\"){e.innerHTML=t.__html??\"\";continue}if(n.startsWith(\"on\")&&typeof t==\"function\"){let r=n.slice(2).toLowerCase();e.addEventListener(r,t);continue}if(!(t===!1||t==null))if(i)e.setAttribute(n,String(t));else{let r=n===\"for\"?\"htmlFor\":n;try{r in e&&typeof e[r]!=\"function\"?e[r]=t:e.setAttribute(n,String(t))}catch{e.setAttribute(n,String(t))}}}}function A(e,a,i){if(!a)return;let n;if(typeof a==\"string\")n=a;else if(Array.isArray(a))n=a.filter(Boolean).join(\" \");else if(typeof a==\"object\")n=Object.keys(a).filter(t=>a[t]).join(\" \");else return;i?e.setAttribute(\"class\",n):e.className=n}function w(e,a){if(!a)return;if(typeof a==\"string\"){e.style.cssText=a;return}let i=e.style;for(let n in a){let t=a[n];t==null||t===!1||(n in i?i[n]=String(t):e.style.setProperty(n,String(t)))}}function m(e,a){let i=n=>{n==null||n===!1||(Array.isArray(n)?n.forEach(i):n instanceof Node?e.appendChild(n):e.appendChild(document.createTextNode(String(n))))};a.forEach(i)}function E(e){return e.length<=1?e[0]:e}function L(){return o(\"div\",{id:\"cf-announcement-banner\",className:\"cf:bg-[#ABD5FF] cf:text-[#34577A] cf:py-2 cf:px-4 cf:text-center cf:w-full cf:z-[99] cf:relative cf:tracking-[-0.02em] cf:text-[14px]\"},o(\"div\",{className:\"cf:max-w-7xl cf:mx-auto\"},o(\"span\",null,\"The Teams plan will be replaced soon by the new Pro plan. These changes will take effect on February 20th, 2026.\",\" \",o(\"a\",{href:\"https://blog.replit.com/pro-plan\",className:\"cf:text-[#34577A] cf:underline cf:decoration-[#34577A]/50 cf:hover:decoration-[#34577A] cf:transition-all\"},\"Learn more about what's changing.\"))))}function N(){let e=document.querySelector(\"main#main-content\");if(!e){console.error(\"Main content not found\");return}document.getElementById(\"cf-announcement-banner\")||(e.parentNode?.insertBefore(o(L,null),e),window.CFQ=window.CFQ||[],window.CFQ.push({emit:\"variantRendered\"}))}function x(e,a){if(e()){a();return}let i=new MutationObserver(()=>{e()&&(a(),i.disconnect())});i.observe(document.documentElement,{childList:!0,subtree:!0})}x(()=>!!document.querySelector(\"main#main-content\"),N);})();\n\n(function(){try{var t=document.createElement(\"style\");t.type=\"text/css\",t.dataset.coframe=\"variant-css\",t.textContent='@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-tracking:initial}}}:root,:host{--cf-spacing:.25rem;--cf-container-7xl:80rem;--cf-default-transition-duration:.15s;--cf-default-transition-timing-function:cubic-bezier(.4,0,.2,1)}.cf\\\\:relative{position:relative}.cf\\\\:z-\\\\[99\\\\]{z-index:99}.cf\\\\:mx-auto{margin-inline:auto}.cf\\\\:w-full{width:100%}.cf\\\\:max-w-7xl{max-width:var(--cf-container-7xl)}.cf\\\\:bg-\\\\[\\\\#ABD5FF\\\\]{background-color:#abd5ff}.cf\\\\:px-4{padding-inline:calc(var(--cf-spacing)*4)}.cf\\\\:py-2{padding-block:calc(var(--cf-spacing)*2)}.cf\\\\:text-center{text-align:center}.cf\\\\:text-\\\\[14px\\\\]{font-size:14px}.cf\\\\:tracking-\\\\[-0\\\\.02em\\\\]{--tw-tracking:-.02em;letter-spacing:-.02em}.cf\\\\:text-\\\\[\\\\#34577A\\\\]{color:#34577a}.cf\\\\:underline{text-decoration-line:underline}.cf\\\\:decoration-\\\\[\\\\#34577A\\\\]\\\\/50{text-decoration-color:oklab(44.6319% -.0245865 -.0663818/.5)}.cf\\\\:transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--cf-default-transition-timing-function));transition-duration:var(--tw-duration,var(--cf-default-transition-duration))}@media (hover:hover){.cf\\\\:hover\\\\:decoration-\\\\[\\\\#34577A\\\\]:hover{text-decoration-color:#34577a}}@property --tw-tracking{syntax:\"*\";inherits:false}',document.head.appendChild(t)}catch(n){console.error(\"Failed to inject variant CSS\",n)}})();\n  }\n})();","state":"active"},{"name":"Pricing Header Kerning","js":"(function () {\n  // ===============================\n  // CONFIG\n  // ===============================\n  var TARGET_PATH = \"/pricing\";\n\n  // ===============================\n  // INTERNAL STATE\n  // ===============================\n  var HAS_RUN = false;\n\n  function normalizePath(path) {\n    return path.replace(/\\/+$/, \"\");\n  }\n\n  function isTargetPage() {\n    return normalizePath(window.location.pathname) === TARGET_PATH;\n  }\n\n  function tryRun() {\n    if (HAS_RUN) return;\n    if (!isTargetPage()) return;\n\n    HAS_RUN = true;\n    runVariant();\n  }\n\n  // Initial check\n  tryRun();\n\n  // Observe DOM changes for SPA renders\n  var observer = new MutationObserver(function () {\n    tryRun();\n  });\n\n  observer.observe(document.documentElement, {\n    childList: true,\n    subtree: true\n  });\n\n  // Hook History API for SPA routing\n  [\"pushState\", \"replaceState\"].forEach(function (method) {\n    var original = history[method];\n    history[method] = function () {\n      var result = original.apply(this, arguments);\n      setTimeout(tryRun, 0);\n      return result;\n    };\n  });\n\n  // Back and forward navigation\n  window.addEventListener(\"popstate\", function () {\n    setTimeout(tryRun, 0);\n  });\n\n  // ===============================\n  // PASTE VARIANT CODE BELOW\n  // ===============================\n  function runVariant() {\n    /*! Code generated by Coframe AI Editor */\n/*! Transpiled: 2026-01-21T22:02:17.863Z */\n/*! Share ID: 210cd650-20aa-47f6-a6c1-52caabf26866 */\n(()=>{var i=Symbol.for(\"JSX.Fragment\");function t(){let e=document.querySelector(\"h1.Membership-module__xXtGna__headerText\");return e?(e.style.letterSpacing=\"normal\",e.classList.remove(\"cf:tracking-[-2px]\"),e.setAttribute(\"data-cf-applied\",\"true\"),window.CFQ=window.CFQ||[],window.CFQ.push({emit:\"variantRendered\"}),!0):!1}function s(){if(t())return;new MutationObserver((r,n)=>{t()&&n.disconnect()}).observe(document.documentElement,{childList:!0,subtree:!0})}s();})();\n\n(function(){try{var t=document.createElement(\"style\");t.type=\"text/css\",t.dataset.coframe=\"variant-css\",t.textContent='@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-tracking:initial}}}.cf\\\\:tracking-\\\\[-2px\\\\]{--tw-tracking:-2px;letter-spacing:-2px}@property --tw-tracking{syntax:\"*\";inherits:false}',document.head.appendChild(t)}catch(e){console.error(\"Failed to inject variant CSS\",e)}})();\n  }\n})();","state":"active"}]}
          },
        });
        var Coframejs=function(e){"use strict";function t(){return window.location.href}function n(){var e,t;return Array.from(null!==(e=null===navigator||void 0===navigator?void 0:navigator.languages)&&void 0!==e?e:[null!==(t=null===navigator||void 0===navigator?void 0:navigator.language)&&void 0!==t?t:[]])}function o(){var e,t,n;return null!==(n=null!==(e=null===navigator||void 0===navigator?void 0:navigator.platform)&&void 0!==e?e:null===(t=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===t?void 0:t.platform)&&void 0!==n?n:""}function r(){try{return document.cookie}catch(e){return""}}function i(){const e=[],t=[],n=[];try{const t=r();if(t){const n=t.split(";").map(e=>e.trim());for(const t of n){const[n]=t.split("=");if(n){if(n.startsWith("coframe."))continue;e.push(n)}}}}catch(e){}try{if("undefined"!=typeof window&&window.localStorage){const e=Object.keys(window.localStorage);for(const n of e)t.push(n)}}catch(e){}try{if("undefined"!=typeof window&&window.sessionStorage){const e=Object.keys(window.sessionStorage);for(const t of e)n.push(t)}}catch(e){}return{cookie_keys:e,local_storage_keys:t,session_storage_keys:n}}function s(e,t){return new Function(`return (${e})`)()(t)}const a="coframe.user.token",l="coframe.lastVisitTime",c="coframe.cvc",d=()=>window.crypto&&crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),u=e=>{const t=r(),n=new RegExp(`(?:^| )${e}=([^;]*)`,"g");let o=null,i="";for(;o=n.exec(t),null!==o;)i=o[1];return i};let f=!1;const m=e=>{f=e},p=(e,t,n)=>{if(!f)return void n.error("Cookies are not enabled","setting_cookie_when_disabled");const o=new Date;o.setTime(o.getTime()+3456e7);const r=o.toUTCString(),i=n=>{!function(e){document.cookie=e}(n?`${e}=${t};path=/;domain=${n};expires=${r};secure`:`${e}=${t};path=/;expires=${r};secure`)},s=window.location.hostname;if("localhost"===s)i();else{const e=s.split(".");for(let t=e.length-2;t>=0;t--){let n=`${e.slice(t).join(".")}`;0!==t&&(n=`.${n}`),i(n)}}u(e)!==t&&n.error(`Failed to set cookie ${e} for domain: ${s}`,"failed_to_set_cookie",{name:e,hostname:s})},_=new WeakMap,h=(e,t)=>{const n={withDescendants:!0,cache:!0,...t};if(!1===n.cache)return v(e,t);const o=JSON.stringify(n);_.has(e)||_.set(e,new Map);const r=_.get(e);if(null==r?void 0:r.has(o)){const e=r.get(o);if(e)return e}const i=v(e,t);return r&&r.set(o,i),i},v=(e,t)=>{const n={withDescendants:!0,...t};function o(e){const t=e.childNodes;for(let e=0;e<t.length;e++){const n=t[e];if(n.nodeType===Node.TEXT_NODE&&n.nodeValue)return n.nodeValue.trim()}return null}const r=e=>e.parentElement||function(e){if(e===document.documentElement||e===document.body)return null;const t=e.getRootNode();return t instanceof ShadowRoot?t.host:null}(e),i=(e,t)=>{var n;const s={t:e.tagName.toLowerCase(),id:e.getAttribute("id")||void 0,text:o(e)||void 0,href:e.getAttribute("href")||void 0,dataTestId:e.getAttribute("data-test-id")||void 0,ariaLabel:e.getAttribute("aria-label")||void 0};for(const e of Object.keys(s))void 0===s[e]&&delete s[e];e.shadowRoot&&(s.isShadowRoot=!0);let a=0,l=0,c=null===(n=e.parentElement)||void 0===n?void 0:n.firstElementChild;for(;c;)c.tagName.toLowerCase()===s.t&&(l++,c===e&&(a=l)),c=c.nextElementSibling;a>0&&l>0&&(s.n={i:a,t:l});const d=r(e);if(d&&t){const e=i(d,t);e&&(s.p=e)}return s},s=i(e,!0),a=n.withDescendants?function(e,t){const n=[];return function e(o,r){if(!(r>t))for(let t=0;t<o.childNodes.length;t++){const i=o.childNodes[t];i.nodeType===Node.ELEMENT_NODE&&(n.push({element:i,depth:r}),e(i,r+1))}}(e,1),n}(e,3):[];for(const e of a){const t=i(e.element,!1);(t.id||t.dataTestId||t.ariaLabel||t.href||t.text)&&(s.descendants=s.descendants||[],s.descendants.push({depth:e.depth,sel:t}))}return s.fingerprint=(e=>{let t=0;if(0===e.length)return t.toString();for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t).toString(16)})(JSON.stringify(s)),s},g=(e,t)=>e.universal?w((null==t?void 0:t.context)||document,e.universal,(null==t?void 0:t.debug)||!1).element:e.css?((null==t?void 0:t.context)||document).querySelector(e.css):null,w=(e,t,n)=>{var o,r,i;const s=[],a=(e,t,o)=>{n&&s.push({xpath:t,message:e,element:o})},l=t=>{const n=t[0].xpath;let o=(t=>{if(!t)return null;let n;try{n=e.evaluate(t,e,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null)}catch(e){return console.error("[Coframe] Error evaluating xpath",t,e),null}if(1===n.snapshotLength){const e=n.snapshotItem(0);return"/html"!==t&&a("Found unique",t,e),e}return n.snapshotLength>1?(a("Found more than one element for xpath:",t),null):(a("No element found for xpath:",t),null)})(n);if(!o)return null;let r=o.shadowRoot||o,i=n;for(let n=1;n<t.length;n++){const s=t[n];if(s.isInsideShadowRoot){const e=r.querySelectorAll(s.css);if(0===e.length)return null;if(e.length>1)return a(`Found more than one element for css: ${s.css}`,i),null;const t=e[0];if(!t)return null;o=t,r=o.shadowRoot||o,i=`${i}/${s.xpath}`,a(`Found ${n} shadow element`,i,o)}else{let t;try{t=e.evaluate(s.xpath,o,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null)}catch(e){return console.error("[Coframe] Error evaluating xpath",s.xpath,e),null}const l=t.singleNodeValue;if(!l)return null;i=`${i}/${s.xpath}`,a(`Found ${n} element`,i,l),o=l,r=o.shadowRoot||o}}return o},c=b(t);let d=l(c[0]);if(d&&!n)return{element:d};const[u,f]=y(t,10);for(const e of u)if(d=l(e),d&&!n)return{element:d};if(t.text){const e=x(t.text,t.t);for(const t of e)if(d=l(t),d&&!n)return{element:d}}if(t.descendants)for(const e of t.descendants){const r={xpath:`/ancestor::*[${e.depth}][self::${t.t}]`,css:`:nth-ancestor(${e.depth}):is(${t.t})`},i=null===(o=y(e.sel,1)[0])||void 0===o?void 0:o[0];if(i&&i.length>0){if(d=l(k(i,r)),d&&!n)return{element:d}}if(e.sel.text){const t=x(e.sel.text,e.sel.t);for(const e of t)if(e&&e.length>0){if(d=l(k(e,r)),d&&!n)return{element:d}}}}for(const e of c.slice(1))if(d=l(e),d&&!n)return{element:d};for(const e of f)if(d=l(e),d&&!n)return{element:d};if(n){const e=c.length>0?c[c.length-1]:null,t=e&&e.length>0?e[e.length-1]:null,n=(null===(r=null==t?void 0:t.xpath)||void 0===r?void 0:r.replace(/^\//,""))||"";return{element:(null===(i=s.filter(e=>e.element).filter(e=>e.xpath.endsWith(n)).sort((e,t)=>{const n=t.xpath.length-e.xpath.length;return 0!==n?n:0})[0])||void 0===i?void 0:i.element)||null,debugList:s}}return{element:null}},b=e=>{var t,n;const o=[];let r=[{xpath:"",css:"",isInsideShadowRoot:!1}],i=e;for(;i;){const e=i.t;if(!e)break;let s=`/${e}`,a=e.toLowerCase();(null===(t=i.n)||void 0===t?void 0:t.i)&&(null===(n=i.n)||void 0===n?void 0:n.t)&&(s+=`[count(../${e})=${i.n.t}][${i.n.i}]`,a=`${a}:nth-of-type(${i.n.i})`);!0===i.isShadowRoot&&r.push({xpath:"",css:"",isInsideShadowRoot:!0});const l=r[r.length-1],c=r.slice(0,-1),d={xpath:`${s}${l.xpath}`,css:`${a} ${l.css}`.trim(),isInsideShadowRoot:I(i)};r=[...c,d],i=i.p;const u=(i?"/":"")+d.xpath,f=[{...d,xpath:u},...c.reverse()].filter(e=>!$(e));o.unshift(f)}return o},x=(e,t)=>{const n=[];for(const o of[t,"*"]){const t=e.split("'"),r=1===t.length?`'${e}'`:`concat(${t.map(e=>`'${e}'`).join(', "\'", ')})`;n.push([{isInsideShadowRoot:!1,xpath:`//${o}[not(self::script or self::style) and contains(text(), ${r})]`,css:`*:contains("${e}")`}])}return n},y=(e,t)=>{var n,o,r;const i=[],s=[];let a=[{xpath:"",css:""}],l=e;for(;l;){const e=l.t,c=[],d=[],u=[];l.id?c.push({xpath:`[@id="${l.id}"]`,css:`#${l.id}`}):l.dataTestId&&c.push({xpath:`[@data-test-id="${l.dataTestId}"]`,css:`${e}[data-test-id="${l.dataTestId}"]`}),l.ariaLabel&&d.push({xpath:`[@aria-label="${l.ariaLabel}"]`,css:`${e}[aria-label="${l.ariaLabel}"]`}),l.href&&d.push({xpath:`[@href="${l.href}"]`,css:`${e}[href="${l.href}"]`});const f={xpath:(null===(n=l.n)||void 0===n?void 0:n.i)&&(null===(o=l.n)||void 0===o?void 0:o.t)?`[count(../${e})=${l.n.t}][${l.n.i}]`:"",css:(null===(r=l.n)||void 0===r?void 0:r.i)?`${e}:nth-of-type(${l.n.i})`:e};for(const n of c)for(const o of a){if(i.push([{xpath:`//${e}${n.xpath}${o.xpath}`,css:n.css+(o.css?` ${o.css}`:""),isInsideShadowRoot:!1}]),i.length>=t)return[i,s]}for(const t of d)for(const n of a){const o=`/${e}${t.xpath}${n.xpath}`,r=t.css+(n.css?` > ${n.css}`:"");u.push({xpath:o,css:r});s.unshift([{xpath:`/${o}`,css:r,isInsideShadowRoot:!1}])}for(const t of a){u.push({xpath:`/${e}${f.xpath}${t.xpath}`,css:f.css+(t.css?` > ${t.css}`:"")})}a=u,l=l.p}return[i,s]},I=e=>!!e&&(!0===e.isShadowRoot||!(!e.p||!I(e.p))),k=(e,t)=>{if(0===e.length)return e;const n=[...e],o=n.pop();return[...n,{...o,xpath:`${o.xpath}${t.xpath}`,css:`${o.css} ${t.css}`}]},$=e=>""===e.xpath;function E(){return!!F||(L||S?(N(),!1):!(j&&!f)&&!(A&&!C))}let S=!1;let j=!1;let C=!1;const T=e=>{C=e};let A=!1;const D=e=>{A=e};let F=!1;let L=!1;let R=!1;function N(){R||(R=!0,console.warn("[Coframe] Events not sent. Use ?coframe_should_send_events=true to force sending events for testing"))}const U=[],O=[],M=[];function P(e,t){O.push(t),O.length>=e.batchSize&&V(e.projectId)}function q(e,t,n=!1){U.push(t),(n||U.length>=e.batchSize)&&V(e.projectId)}function V(e){if(E()&&(U.length>0&&(z(e,U,"batched_events"),U.length=0),O.length>0&&(z(e,O,"batched_monitoring"),O.length=0),M.length>0)){for(const e of M)B(e);M.length=0}}function H(e,{projectId:n,sessionId:o,eventType:r,orgId:i,userToken:s}){q(e,{type:r,project_id:n,session_id:o,time:new Date,url:t(),org_id:i,user_token:s})}function z(e,t,n="events"){const o=`https://ingest.app.coframe.com/ingest/v2/${n}/${e}/`;if(navigator.sendBeacon){const e=JSON.stringify(t),n=new Blob([e],{type:"text/plain"});navigator.sendBeacon(o,n)||console.warn("[Coframe] failed to send event beacon")}else console.warn("[Coframe] cannot send event beacon, feature unavailable")}function B(e){if(navigator.sendBeacon){const t=JSON.stringify(e),n=new Blob([t],{type:"text/plain"});navigator.sendBeacon("https://ingest.app.coframe.com/ingest/v2/session_result/",n)||console.warn("[Coframe] failed to send event beacon")}else console.warn("[Coframe] cannot send event beacon, feature unavailable")}function J({err:e,orgId:t,projectId:n,sessionId:o}){let r="Unknown error",i="";"string"==typeof e?r=e:e&&"object"==typeof e&&("message"in e&&"string"==typeof e.message&&(r=e.message),"stack"in e&&"string"==typeof e.stack&&(i=e.stack)),i||(i=(new Error).stack||"");try{z(n,{org_id:t,project_id:n,event_id:d(),variant_id:"",experiment_id:"",session_id:o,url:window.location.href,monitoring_type:"sdk_error",local_time:(new Date).toISOString(),metadata:{error_message:r,stack:i,user_agent:navigator.userAgent}},"monitoring")}catch(e){console.warn("[Coframe] Error in reportException:",e)}}const Q="largest-contentful-paint";const W="global_holdout",X="experiment_holdout",Y="CFQ";function G(e,t,n=Y){const o=function(e=Y){window[e]=window[e]||[];const t=window[e];if(t.__cfqHooked)return t;t.__cfqHooked=!0,t.__cfqListeners=[];const n=t.push.bind(t);return t.push=(...e)=>{const o=n(...e),r=t.__cfqListeners;for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<r.length;e++){const t=r[e];t.predicate(n)&&t.callback(n)}}return o},t}(n),r={predicate:e,callback:t};o.__cfqListeners.push(r);let i=!0;return()=>{if(!i)return;i=!1;const e=o.__cfqListeners,t=e.indexOf(r);-1!==t&&e.splice(t,1)}}function K(e,t=Y){const n=window[t]||[];for(let t=n.length-1;t>=0;t--)if(e(n[t]))return n[t]}function Z(e,t,n=36e5,o=Y){return new Promise(r=>{const i=K(e,o);if(i)return void r(i);const s=G(e,e=>{s(),clearTimeout(a),r(e)},o),a=setTimeout(()=>{s();const o=new Error(`Timeout waiting for command after ${n}ms for:\n${e.toString()}`);(null==t?void 0:t.projectId)&&(null==t?void 0:t.sessionId)&&J({err:o,orgId:t.orgId||"",projectId:t.projectId,sessionId:t.sessionId}),r(void 0)},n)})}function ee(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function te(e,t){return e<<t|e>>>32-t}function ne(e,t){const n=(e=e||"").length%4,o=e.length-n;let r=t=t||0,i=0;const s=3432918353,a=461845907;let l=0;for(l=0;l<o;l+=4)i=255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24,i=ee(i,s),i=te(i,15),i=ee(i,a),r^=i,r=te(r,13),r=ee(r,5)+3864292196;switch(i=0,n){case 3:i^=(255&e.charCodeAt(l+2))<<16;case 2:i^=(255&e.charCodeAt(l+1))<<8;case 1:i^=255&e.charCodeAt(l),i=ee(i,s),i=te(i,15),i=ee(i,a),r^=i}var c;return r^=e.length,c=r,c=ee(c^=c>>>16,2246822507),r=(c=ee(c^=c>>>13,3266489909))^c>>>16,r>>>0}const oe=(e,t,n)=>{const o=ne(t,e);return Math.floor(o/4294967295*(n-1))},re=(e,t,n,o)=>{const r=o,i=oe(n,e,1e5);let s="";e:for(const e in t)for(let n=0;n<t[e].length;n++){const[o,r]=t[e][n];if(i>=o&&i<=r){s=e;break e}}return""===s&&(s=r),s};async function ie(e,t,n,o,r,i,a,l){var d,f,m,p;const _=[],h=[],v="true"===e["x-is-bot"],g="true"===e["x-is-blocklist-ip"],w=({variantsAndElements:e,experimentsInfo:t,hasActivatedFrames:n=!1})=>({variantsAndElements:e||[],experimentsInfo:t||[],hasActivatedFrames:n}),b=null!==(d=null==n?void 0:n.split(",").map(e=>e.trim()).filter(Boolean))&&void 0!==d?d:[];if(b.length>0){const e=t.frames.flatMap(e=>e.experiments.flatMap(t=>t.variants.map(t=>({variant:t,elements:e.elements})))).filter(e=>b.includes(e.variant.id)),o=b.some(e=>e===t.holdout_info.holdout_variant_id||e===W);return e.length>0?w({variantsAndElements:e,hasActivatedFrames:!0}):(o||window.alert(`[Coframe] Variant preview unavailable: ${n}.`),w({}))}const x=Number.parseInt(u(c)||"0"),y=t.frames.filter(t=>{if(!t.experiments)return!1;return!!le(t.activation_condition,e,r,i,a,o,x,s,l)});if(0===y.length)return w({});if((null===(f=t.settings)||void 0===f?void 0:f.blocklist_cloaking_enabled)&&g)return w({});if((null===(m=t.settings)||void 0===m?void 0:m.bot_cloaking_enabled)&&v)return w({});const I=re(o,t.holdout_info.variant_bins,t.holdout_info.seed,t.holdout_info.holdout_variant_id);if(I===t.holdout_info.holdout_variant_id)return _.push({variant_id:t.holdout_info.holdout_variant_id,variant_slug:t.holdout_info.holdout_variant_slug,experiment_id:t.holdout_info.holdout_experiment_id,experiment_slug:t.holdout_info.holdout_experiment_slug,iteration_id:"",final_state:!0,level:W}),w({variantsAndElements:h,experimentsInfo:_,hasActivatedFrames:!0});_.push({variant_id:I,variant_slug:t.holdout_info.treatment_variant_slug,experiment_id:t.holdout_info.holdout_experiment_id,experiment_slug:t.holdout_info.holdout_experiment_slug,iteration_id:"",final_state:!1,level:W});let k=!1;for(const n of y){let c=!1;for(const d of n.experiments){if(c)break;const u=d.metadata,f=d.variants,m=n.elements,v=null===(p=u.activation_condition.audience_ids)||void 0===p?void 0:p[0];if(v){if(!le(t.audiences[v].selector,e,r,i,a,o,x,s,l))continue}c=!0,k=!0;const g=u.holdout_info;if(re(o,g.variant_bins,g.seed,g.holdout_variant_id)===g.holdout_variant_id){_.push({variant_id:g.holdout_variant_id,variant_slug:g.holdout_variant_slug,experiment_id:g.holdout_experiment_id,experiment_slug:g.holdout_experiment_slug,iteration_id:"",level:X,final_state:!0,holdout_experiment_id:g.holdout_experiment_id,holdout_experiment_slug:g.holdout_experiment_slug});continue}_.push({variant_id:g.treatment_variant_id,variant_slug:g.treatment_variant_slug,experiment_id:g.holdout_experiment_id,experiment_slug:g.holdout_experiment_slug,iteration_id:"",level:X,final_state:!1,holdout_experiment_id:g.holdout_experiment_id,holdout_experiment_slug:g.holdout_experiment_slug});const w=re(o,u.allocation,u.seed,""),b=f.find(e=>e.id===w);if(!b){l.error(`Variant not found for experiment ${u.experiment_id}`,"variant_not_found",{experiment_id:u.experiment_id});break}_.push({variant_id:b.id,variant_slug:b.slug,experiment_id:u.experiment_id,experiment_slug:u.slug,iteration_id:u.iteration_id,level:"experiment",final_state:!0,holdout_experiment_id:g.holdout_experiment_id,holdout_experiment_slug:g.holdout_experiment_slug}),h.push({variant:b,elements:m})}}return w({variantsAndElements:h,experimentsInfo:_,hasActivatedFrames:k})}function se(e){const t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=window.innerHeight}const ae="n/a";function le(e,t,n,o,r,i,s,a,l){if(e.and){const c=e.and.map(e=>le(e,t,n,o,r,i,s,a,l)),d=c.some(e=>e===ae);if(d){const e=c.some(e=>!1===e);if(d&&e)return!1;if(d&&!e)return ae}return c.every(e=>!0===e)}if(e.or){const c=e.or.map(e=>le(e,t,n,o,r,i,s,a,l));if(c.some(e=>!0===e))return!0;return!!c.some(e=>e===ae)&&ae}if(e.url&&"*"!==e.url&&!de(e.url,n))return!1;if(e.base_url_matches&&!de(e.base_url_matches,n,!0))return!1;if(e.url_regex)try{return new RegExp(e.url_regex).test(n)}catch(t){return l.error("Error parsing URL regex","url_regex_error",{error:t instanceof Error?t.message:String(t),url_regex:e.url_regex,currentUrl:n}),!1}if(e.search&&!function(e,t){const n=new URL(t).search;return e.some(e=>{const t=decodeURIComponent(n).toLowerCase(),o=e.operand.toLowerCase();return"equals"===e.operator?t===o:"contains"===e.operator?t.includes(o):"not_contains"===e.operator&&!t.includes(o)})}(e.search,n))return!1;if(e.language){if(o===ae)return ae;for(const t of e.language)if(o.some(e=>e.includes(t)))return!0;return!1}if(e.time){const t=new Date;if(e.time.before&&t>=e.time.before)return!1;if(e.time.after&&t<=e.time.after)return!1}if(e.platform)return r===ae?ae:function(e,t){const n=Array.isArray(e.platform)?e.platform:[e.platform];return n.some(e=>e&&t.toLowerCase().includes(e.toLowerCase()))}(e,r);if(e.country&&!function(e,t){return!!t&&e.includes(t["x-viewer-country"])}(e.country,t))return!1;if(e.first_time_vs_returning){if(s===ae)return!0;if(2!==e.first_time_vs_returning.length){if(e.first_time_vs_returning.includes("first_time")&&s>1)return!1;if(e.first_time_vs_returning.includes("returning")&&s<=1)return!1}}if(e.device){const n="true"===t["x-is-mobile-viewer"];if(e.device.includes("mobile")&&!n)return!1;if(e.device.includes("desktop")&&n)return!1}if(e.allocation){if(i===ae)return ae;return((e,t,n,o)=>{const r=oe(n,o,t);for(let t=0;t<e.length;t++){const[n,o]=e[t];if(r>=n&&r<=o)return!0}return!1})(e.allocation.allocation_bins,e.allocation.allocation_scale,e.allocation.seed,i)}if(e.js_function){if(void 0===a)return ae;try{const t=a(`(${e.js_function})`,{});return Boolean(t)}catch(t){return l.error("Error evaluating JS function","js_eval_error",{error:t instanceof Error?t.message:String(t),js_function:e.js_function}),!1}}return!0}const ce=(e,t)=>{const n=new URL(e),o=n.hostname.replace(/^www\./,""),r=n.pathname.endsWith("/")?n.pathname.slice(0,-1):n.pathname;return t?`${o}${r}`:`${o}${r}${n.search}${n.hash}`};function de(e,t,n){if(t.includes("localhost")||t.includes("0.0.0.0")){const o=new URL(e),r=new URL(t),i=e=>e.endsWith("/")?e.slice(0,-1):e;return n?i(r.pathname)===i(o.pathname):i(r.pathname)===i(o.pathname)&&r.search===o.search}return ce(e,n)===ce(t,n)}function ue(e,t){let n=null;return function(...o){n&&clearTimeout(n),n=setTimeout(()=>{e.apply(this,o)},t)}}function fe(e){if("undefined"!=typeof URLSearchParams){const t=new URLSearchParams(e);return{get:e=>t.get(e)}}const t=function(e){const t={},n=e.startsWith("?")?e.slice(1):e;if(!n)return t;for(const e of n.split("&")){if(!e)continue;const[n,o=""]=e.split("=").map(decodeURIComponent);n in t||(t[n]=o)}return t}(e);return{get:e=>{var n;return null!==(n=t[e])&&void 0!==n?n:null}}}const me=["submit","button","reset"];const pe=(e,t,n)=>{const{innerHTML:o,textContent:r,src:i,styles:s,onClick:a,...l}=t.attributes;if(o?e.innerHTML=o:r&&"string"==typeof r&&(!function(e){if("input"!==e.tagName.toLowerCase())return!1;const t=e.type;return!!t&&me.includes(t.toLowerCase())}(e)?e.textContent=r:e.value=r),i&&e.setAttribute("src",i),s){const t=(e=>{const t={};if(e)for(const n in e)t[n.replace(/_/g,"-")]=e[n];return t})(s);for(const[n,o]of Object.entries(t)){if(!o)continue;e.style.getPropertyValue(n)!==o&&e.style.setProperty(n,o,"important")}}return l&&Object.keys(l).length>0&&((null==n?void 0:n.warn)?n.warn("Unknown attributes","unknown_attributes",{otherAttributes:l}):console.warn("[Coframe] Unknown attributes",l)),!0},_e=(e,t,n)=>{const o=t.js;try{if(!o)return(null==n?void 0:n.warn)?n.warn("No JavaScript to execute"):console.warn("[Coframe] No JavaScript to execute"),!1;if((e=>e===document.body||e===document||e===document.documentElement)(e)){const e=document.createElement("script");e.id=`coframe-variant-script-${Math.random().toString(36).substring(2,15)}`,e.textContent=`\n        (function() {\n          ${o}\n        })();\n      `,document.head.appendChild(e),document.head.removeChild(e)}else{new Function("el",o)(e)}return!0}catch(t){return(null==n?void 0:n.error)?n.error("Error executing JavaScript:","error_execute_js",{error:t,javascript:o,element:e}):console.error("[Coframe] Error executing JavaScript:",t,o,e),!1}};function he(e){const t=ve(e);return null!==t&&0===t.length?null:t}function ve({selector:e,currentUrl:t,isQueryingAll:n=!1}){if(e.url_starts_with)return t.startsWith(e.url_starts_with)?[]:null;if(e.url){const n=new URL(t),o=new URL(e.url);return n.hostname===o.hostname&&n.pathname===o.pathname?[]:null}if(e.universal||e.css){const t=g(e);return t?[t]:null}if(e.navigate_to_url_starts_with){const n=((e,t)=>{const n=[],o=document.querySelectorAll(`a[href^="${t}"]`);n.push(...Array.from(o));const r=new URL(e),i=new URL(t);if(r.hostname===i.hostname){let e=i.pathname.replace(r.pathname,"");if(e){e.startsWith("/")||(e=`/${e}`);const t=document.querySelectorAll(`a[href^="${e}"]`);n.push(...Array.from(t))}}return n})(t,e.navigate_to_url_starts_with);return n.length>0?n:null}return e.and?function(e,t,n){if(0===e.length)return null;const o=[];for(const r of e){const e=ve({selector:r,currentUrl:t,isQueryingAll:n});if(null===e)return null;o.push(e)}for(let e=o.length-1;e>=0;e--){const t=o[e];if(t&&t.length>0)return t}return[]}(e.and,t,n):e.or?function(e,t,n){let o=null,r=!1;for(const i of e){const e=ve({selector:i,currentUrl:t,isQueryingAll:n});if(null!==e)if(r=!0,n)e.length>0&&(null===o&&(o=[]),o.push(...e));else if(e.length>0)return e}return n&&r?null!==o?o:[]:null}(e.or,t,n):null}let ge=!1;function we(){window.CFQ=window.CFQ||[],window.CFQ.push({emit:"variantRendered"})}const be=(e,t,n)=>{var o;const{variant:r,elements:i}=e;if(ge=!0,!r.modifications||0===Object.keys(r.modifications).length)return we(),!0;for(const[e,s]of Object.entries(r.modifications)){const s=i[e];let a=null;for(const e of s||[])if(a=null===(o=he({selector:e,currentUrl:t}))||void 0===o?void 0:o[0],a)break;if(!a){n.error(`element not found: elementId ${e}`,"element_not_found",{element_id:e,selectors:s,variant_id:r.id,experiment_id:r.experiment_id});continue}xe(a,r.modifications,e,n)&&a instanceof HTMLElement?a.setAttribute("coframe-exp-id",r.id):n.error("element not edited","element_not_edited",{selectedElement:a,variant_id:null==r?void 0:r.id,elementSelectors:s})}return!0},xe=(e,t,n,o)=>{if(!t[n])return o.warn("no modifications for element","no_modifications_for_element",{elementId:n,modifications:t}),!1;for(const r of t[n])switch(r.type){case"execute_js":_e(e,r,o);break;case"update":pe(e,r,o),we();break;case"delete":ye(e),we();break;default:return o.warn("unknown modification type","unknown_modification_type",{modificationType:r.type,elementId:n}),we(),!1}return!0},ye=e=>{var t;return null===(t=e.parentNode)||void 0===t||t.removeChild(e),!0};let Ie=null;const ke=new Set;function $e(e,n,o){var r;if(!o||0===o.length)return void n.warn("No metrics defined in the project config");Ie||(Ie=function(e,t,n=Y){const o=window[n]||[];for(let n=0;n<o.length;n++){const r=o[n];e(r)&&t(r)}return G(e,t,n)}(e=>void 0!==e.conversion||"conversion"===e.emit&&void 0!==e.payload,o=>{const r=o.conversion||("conversion"===o.emit?o.payload:void 0);if(!r||!r.metricId&&!r.metricName)return void n.error("Conversion event payload must have metricId or metricName","conversion_event_payload_error",{payload:r});const i={metadata:r.metadata};r.metricId&&(i.metric_ids=[r.metricId]),r.metricName&&(i.metric_names=[r.metricName]),r.value&&(i.value=r.value);const s={type:"conversion",project_id:e.projectId,session_id:e.sessionId,time:new Date,url:t(),user_token:e.userToken,content:i};q(e,s,!0)}));const i=document.querySelectorAll("[coframe-metric-ids]");for(let e=0;e<i.length;e++)i[e].removeAttribute("coframe-metric-ids");for(let e=0;e<o.length;e++){const i=o[e];if(i.js_binder){if(ke.has(i.js_binder))continue;ke.add(i.js_binder);try{s(i.js_binder,{metricId:i.id})}catch(e){n.error(`Failed to execute js_binder for metric ${i.id}`,"js_binder_execution_error",{error:e,metricId:i.id})}}else if(i.selector){const e=null!==(r=he({selector:i.selector,currentUrl:t(),isQueryingAll:!0}))&&void 0!==r?r:[];for(let t=0;t<e.length;t++){const n=e[t],o=n.getAttribute("coframe-metric-ids");if(o){const e=o.split(",");e.push(i.id),n.setAttribute("coframe-metric-ids",Array.from(new Set(e)).join(","))}else n.setAttribute("coframe-metric-ids",i.id)}}}}let Ee=null;const Se=1e4;let je,Ce=null,Te=null,Ae=!1,De=[],Fe=null,Le="",Re="",Ne=d();const Ue=new Set;function Oe(){const e=(new Date).getTime()-(je?je.getTime():0);!Ae&&e>=Se?(Ae=!0,H(He,{projectId:He.projectId,sessionId:Ne,eventType:"session_start",orgId:Le,userToken:Re})):setTimeout(Oe,Se-e)}function Me(e){return function(){for(const t of e){const e=t.variant;if(!Ue.has(e.id)){const t=document.querySelectorAll(`[coframe-exp-id="${e.id}"]`);for(const n of Array.from(t))se(n)&&(n.setAttribute("coframe-experienced","true"),Ue.add(e.id),q(He,{type:"view",project_id:He.projectId,session_id:Ne,experiment_id:e.experiment_id,variant_id:e.id,time:new Date,orgId:Le}))}}}}function Pe(){document.dispatchEvent(new CustomEvent("coframe:show",{}))}async function qe(e,n){const o=[];try{for(const r of e){be(r,t(),n)||o.push({message:"Original element not found",metadata:{description:"Original element not found",experiment_id:r.variant.experiment_id,variant_id:r.variant.id,org_id:Le}})}}catch(e){const t=e instanceof Error?e.stack||e.message:String(e);o.push({metadata:{description:e.toString(),org_id:Le},message:t})}for(const e of o)n.error(e.message,"failed_replacement",e.metadata)}const Ve=(e,r)=>{!function(e,t,n,o,r,i,s,a,l,c,d,u,f,m,p){M.push({org_id:t,project_id:n,session_id:o,experiments:i,method:"script",sdk_version:"2.1.0",metadata:{local_time:s,languages:c,platform:l,referrer:a,user_token:r,user_agent:d,session_metadata:JSON.stringify({url:u,storage_info:f}),ga_session_id:null==m?void 0:m.ga_session_id,ga_session_number:null==m?void 0:m.ga_session_number,coframe_user_id:p,url:u}}),M.length>=e.batchSize&&V(e.projectId)}(...[He,Le,e,Ne,Re,De,je,document.referrer,o(),n(),navigator&&navigator.userAgent||"",t(),i()]),H(He,{projectId:He.projectId,sessionId:Ne,eventType:"page_view",orgId:Le,userToken:Re}),setTimeout(()=>Oe(),Se)},He={status:{initialized:!1},projectId:"",orgId:"",variantsAndElements:[],userToken:Re,sessionId:Ne,batchSize:32,treatmentsData:null,treatmentsDataV2:null,experimentInfo:[],logger:{warn:()=>{},error:()=>{}}};function ze(){document.documentElement.style.setProperty("--cf-show","1")}He.logger=function(e){let n=0;function o(e,o,r,i,s){var a,l,c,u,f;if(n>=15)return void console.warn("[Coframe] Max log count reached, auto-mute");n++;const m="[Coframe]",p=o(),_=(null!=r?r:"").trim(),{org_id:h="",variant_id:v="",experiment_id:g="",...w}=s,b=Date.now(),x=new Date(b).toISOString(),y={org_id:h,variant_id:v,experiment_id:g,variant_ids:(null!==(a=p.variantsAndElements)&&void 0!==a?a:[]).map(e=>e.variant.id).filter(Boolean),project_id:null!==(l=p.projectId)&&void 0!==l?l:"",event_id:d(),session_id:null!==(c=p.sessionId)&&void 0!==c?c:"",url:t(),monitoring_type:`log_${i}`,local_time:x,metadata:{...w,message:_}};"warn"===e?console.warn(`${m} ${_}`,{...w}):console.error(`${m} ${_}`,{...w}),null===(f=null===(u=p.debug)||void 0===u?void 0:u.logs)||void 0===f||f.push({logger:e,timestamp:b,message:_,type:i,metadata:{...w}}),P(p,y),p.status&&(p.status.events||(p.status.events=[]),p.status.events.push({...y,timestamp:b}))}return{warn:(t,n="coframe_warn",r={})=>o("warn",e,t,n,r),error:(t,n="coframe_error",r={})=>o("error",e,t,n,r)}}(()=>He);const Be=(e,n)=>{document.addEventListener("visibilitychange",Oe),setTimeout(Oe,Se),document.addEventListener("coframe:dom-renderer:complete",Me(e)),document.addEventListener("scroll",Me(e)),document.dispatchEvent(new CustomEvent("coframe:dom-renderer:complete",{})),document.addEventListener("click",e=>function(e,n,o,{isEngaged:r,projectId:i,sessionId:s,orgId:a,duration:l=0,userToken:c}){var d;const u=performance.now();r||"click"!==n||(r=!0,H(e,{projectId:i,sessionId:s,eventType:"session_start",orgId:a,userToken:c||""}));const f=o.clientX+window.scrollX,m=o.clientY+window.scrollY,p=window.innerWidth,_=window.innerHeight,v=o.composedPath()[0],g=(null==v?void 0:v.closest("[coframe-metric-ids], a, button, input, [onclick], [href]"))||v,w=null===(d=g.getAttribute("coframe-metric-ids"))||void 0===d?void 0:d.split(","),b={type:n,project_id:i,session_id:s,time:new Date,url:t(),user_token:c,content:{universal_selector:h(g,{withDescendants:!1}),metric_ids:w,position:{x:Math.round(f),y:Math.round(m)},screen_size:{width:p,height:_},"duration-ms":Math.round(l)}};q(e,b,Boolean(null==w?void 0:w.length));const x=performance.now()-u;e.status&&(e.status.events||(e.status.events=[]),e.status.events.push({...b,processing_duration_ms:Math.round(x),timestamp:Date.now()}))}(He,"click",e,{projectId:n,isEngaged:Ae,sessionId:Ne,orgId:Le,userToken:Re}),!0);const o=ue(e=>{H(He,{projectId:He.projectId,sessionId:Ne,eventType:e,orgId:Le,userToken:Re}),V(He.projectId)},1);window.addEventListener("beforeunload",()=>o("before_unload")),window.addEventListener("pagehide",()=>o("page_hide")),window.addEventListener("visibilitychange",()=>{const e=document.hidden;o(e?"tab_hide":"tab_show")})};async function Je(){var e,r,i,s,f,_,h;const v=He.logger,g=await Z(e=>!!e.config,He);if(!g)return void v.error("Failed to wait for config cmd","wait_for_cmd_timeout");const w=g.config,b=(null==w?void 0:w.timeoutMs)?Math.min(w.timeoutMs,5e3):5e3,x=e=>{console.warn(`[Coframe] ${e}`),Pe(),ze()};if(w.waitForFeatureFlag){const e=await Z(e=>"boolean"==typeof(void 0!==e.featureFlagSet?e.featureFlagSet:"object"==typeof e.emit&&null!==e.emit&&"featureFlagSet"in e.emit?e.emit.featureFlagSet:void 0),He,b);if(!e)return x("Feature flag was not set after timeout, graceful exit");if(!1===(void 0!==e.featureFlagSet?e.featureFlagSet:"object"==typeof e.emit&&null!==e.emit&&"featureFlagSet"in e.emit?e.emit.featureFlagSet:void 0))return x("Feature flag is set to false, graceful exit")}He.batchSize=w.batchSize||32,Ce=(null==w?void 0:w.startTime)?new Date(w.startTime):null,je=new Date;const y=null==w?void 0:w.projectId;if(Z(e=>!0===e.variantRendered||"variantRendered"===e.emit,He,b).then(e=>{e||ge&&v.warn("Failed to wait for variant rendered command","missing_variant_rendered")}).finally(()=>{ze()}),!y)return v.error("No project ID","no_project_id",{description:"No Coframe Page ID"}),void we();He.projectId=y;const I=function(){const e=t(),n=e.indexOf("?");if(-1===n)return fe("");const o=e.indexOf("#",n);return fe(-1!==o?e.substring(n,o):e.substring(n))}(),k=I.get("coframe_variant_id"),$=I.get("coframe_should_send_events");F="true"===$,(e=>{S=e})(!!k),(e=>{j=e})(!!w.waitForCookiesEnabled);const C=null===(e=K(e=>!!e.projectData))||void 0===e?void 0:e.projectData;let A=(null==C?void 0:C.segmentationHeaders)||null,R=null==C?void 0:C.project;if(!R)return v.error("No Coframe Project Config","no_project_config",{previewVariantId:k}),void we();const N=!!(null===(r=null==R?void 0:R.settings)||void 0===r?void 0:r.track_only_activated_frames);D(N);const U=(null===(s=null===(i=null==R?void 0:R.settings)||void 0===i?void 0:i.blocklist_ip_traffic_ignored)||void 0===s||s)&&"true"===(null==A?void 0:A["x-is-blocklist-ip"]),O=(null===(_=null===(f=null==R?void 0:R.settings)||void 0===f?void 0:f.bot_traffic_ignore)||void 0===_||_)&&"true"===(null==A?void 0:A["x-is-bot"]);if((e=>{L=e})(U||O),w.waitForUserToken){const e=await Z(e=>!!e.setUserToken&&"string"==typeof e.setUserToken,He,b);if(!e||!e.setUserToken)return x("User token was not provided after timeout, graceful exit");Re=e.setUserToken}else Re=(()=>{let e=u(a);return e||(e=d()),e})();if((null==w?void 0:w.waitForCookiesEnabled)?(m(!1),we(),Z(e=>!0===e.cookiesEnabled||"cookiesEnabled"===e.emit,He).then(e=>{e?m(!0):v.warn("Failed to wait for cookies enabled command","wait_for_cmd_timeout")})):m(!0),He.userToken=Re,w.waitForHydration){if(!await Z(e=>!0===e.pageHydrated||"pageHydrated"===e.emit,He))return void v.warn("Failed to wait for page hydrated command","wait_for_cmd_timeout")}R.tags&&(((e,t)=>{for(const n of e)n.js&&_e(document.body,{js:n.js},t)})(R.tags,v),He.status.tags=R.tags);const{variantsAndElements:M,experimentsInfo:q,hasActivatedFrames:H}=await ie(A,R,k,Re,t(),n(),o(),v);let z,B,J;T(H),De=q,Fe=R,Le=R.org_id||"",He.orgId=Le,He.variantsAndElements=M,He.treatmentsData=null,He.treatmentsDataV2=null;let Y=!1;const G=()=>{if((z||B||J)&&(He.treatmentsData||He.treatmentsDataV2)&&!Y){if(He.treatmentsData&&z){for(const e of He.treatmentsData)z(e);Y=!0}He.treatmentsData&&B&&(B(He.treatmentsData),Y=!0),He.treatmentsDataV2&&J&&(J(He.treatmentsDataV2,De),Y=!0)}},ee=()=>{if(E()){const e=[],t=[];for(const n of De)if(n.final_state){const o={impressionId:Ne,userToken:Re,experimentId:n.experiment_id,variantId:n.variant_id,inGlobalHoldout:n.level===W,isBaseline:n.level===X,...n.holdout_experiment_id?{holdoutExperimentId:n.holdout_experiment_id}:{}};e.push(o),t.push({coframe_experiment_id:n.holdout_experiment_id||n.experiment_id,coframe_experiment_slug:n.holdout_experiment_slug||n.experiment_slug,coframe_variant_id:n.variant_id,coframe_variant_slug:n.variant_slug,coframe_user_token:Re,coframe_impression_id:Ne,coframe_in_global_holdout:n.level===W,coframe_in_exp_baseline:n.level===X})}if(k){const n=k.split(",");for(const o of n)e.push({impressionId:Ne,userToken:Re,experimentId:`preview_id_${o}`,holdoutExperimentId:`preview_holdout_id_${o}`,variantId:o,inGlobalHoldout:!1,isBaseline:!1}),t.push({coframe_experiment_id:`preview_id_${o}`,coframe_experiment_slug:`preview_id_${o}`,coframe_variant_id:o,coframe_variant_slug:o,coframe_user_token:Re,coframe_impression_id:Ne,coframe_in_global_holdout:!1,coframe_in_exp_baseline:!1})}He.treatmentsData=e,He.treatmentsDataV2=t,He.experimentInfo=De,G()}};if(!await((e=1e4)=>new Promise((t,n)=>{if(document.body)return void t(document.body);let o;const r=new MutationObserver(()=>{document.body&&(o&&clearTimeout(o),r.disconnect(),t(document.body))});o=setTimeout(()=>{r.disconnect(),n(new Error("Timeout waiting for document.body"))},e),r.observe(document.documentElement||document,{childList:!0,subtree:!0})}))(b).catch(()=>!1))return v.error("Timeout waiting for document.body, exiting gracefully","body_timeout"),void we();$e(He,v,null==R?void 0:R.metrics);M.length>0?qe(M,v).then(()=>{Pe()}):(Pe(),we());const te=()=>{(null==w?void 0:w.waitForUserToken)||(((e,t)=>{p(a,e,t)})(Re,v),(e=>{const t=u(c),n=Number.parseInt(u(l),10),o=Date.now();if(!n||o-n>72e5){const n=t?Number.parseInt(t,10)+1:1;p(c,n.toString(),e),p(l,o.toString(),e)}})(v))};if(null==w?void 0:w.waitForCookiesEnabled){Z(e=>!0===e.cookiesEnabled||"cookiesEnabled"===e.emit,He).then(e=>{e?(m(!0),te(),V(He.projectId),ee()):v.warn("Failed to wait for cookies enabled command","wait_for_cmd_timeout")})}else te();Ve(y),Z(e=>!("treatmentApplied"!==e.subscribe),He).then(e=>{if(e){if(!e.callback&&!e.bulkCallback&&!e.bulkCallbackV2)return void v.warn("treatmentApplied callback is not set, skipping","treatment_applied_callback_not_set");z=e.callback,B=e.bulkCallback,J=e.bulkCallbackV2,G()}}),ee(),Be(M,y),function({coframe:e,projectId:n,orgId:o,sessionId:r}){var i;if("undefined"==typeof PerformanceObserver||!(null===(i=PerformanceObserver.supportedEntryTypes)||void 0===i?void 0:i.includes(Q)))return;let s,a=!1;const l=new PerformanceObserver(e=>{const t=e.getEntries();t.length>0&&(s=t[t.length-1])});try{l.observe({type:Q,buffered:!0})}catch(e){return void console.warn("[Coframe] Failed to observe LCP:",e)}document.addEventListener("visibilitychange",()=>{var i,c,u,f;if("hidden"===document.visibilityState&&!a){const m=l.takeRecords();if(m.length>0&&(s=m[m.length-1]),s)try{const l=s;P(e,{event_id:d(),monitoring_type:"web_performance_lcp",local_time:(new Date).toISOString(),project_id:n,session_id:r,url:t(),org_id:o,metadata:{lcp:l.startTime,size:null!==(i=l.size)&&void 0!==i?i:0,element:null!==(u=null===(c=l.element)||void 0===c?void 0:c.tagName)&&void 0!==u?u:"",url:null!==(f=l.url)&&void 0!==f?f:""}}),a=!0}catch(e){console.warn("[Coframe] Error reporting LCP:",e)}l.disconnect()}})}({coframe:He,projectId:y,orgId:Le,sessionId:Ne});const ne=new Date,oe=Ce?ne.getTime()-Ce.getTime():0,re=ne.getTime()-je.getTime();He.status={initialized:!0,elapsedFromInstallation:oe,elapsedFromExecution:re,trackOnlyActivatedFrames:N},P(He,{event_id:d(),monitoring_type:"init",local_time:(new Date).toISOString(),project_id:y,session_id:Ne,url:t(),org_id:Le,metadata:{elapsedFromInstallation:oe,elapsedFromExecution:re}});let se=0;if(null===(h=null==Fe?void 0:Fe.settings)||void 0===h?void 0:h.mutation_observer_active){const e=ue(()=>{$e(He,v,null==Fe?void 0:Fe.metrics)},100),r=new MutationObserver(t=>{if(se++,se>=5e3)return v.error("Mutation callback infinite loop protection triggered, disconnecting mutation observer","mutation_observer_loop_protection",t),void r.disconnect();for(const n of t)"childList"===n.type&&e()});r.observe(document.body,{childList:!0,subtree:!0}),function(e,n){const o=()=>{const o=t(),r=Ee;r&&!de(o,r,e)&&(Ee=o,n(o,r))};Ee=t(),o(),window.addEventListener("popstate",o),window.addEventListener("hashchange",o);const r=e=>{const t=history[e];history[e]=function(...e){const n=t.apply(this,e);return setTimeout(o,0),n}};r("pushState"),r("replaceState")}(!0,async(e,t)=>{await new Promise(e=>requestAnimationFrame(e)),se=0,Ne=d(),He.sessionId=Ne;const{variantsAndElements:r,experimentsInfo:i,hasActivatedFrames:s}=await ie(A,Fe,k,Re,e,n(),o(),v);De=i,He.variantsAndElements=r,T(s),qe(r,v),Ve(y),Y=!1,ee()})}V(He.projectId),null!==Te&&clearInterval(Te),Te=setInterval(()=>V(He.projectId),3e3)}return He.debug={getSelector:h,getElement:g,getElementUniversal:w,waitForCmd:Z,flushQueuedEvents:()=>{V(He.projectId)},queuedEvents:U,shouldSendEvents:E,querySelector:he,logs:[]},window.Coframe=He,He.init=Je,He.init().catch(e=>{var t,n,o;console.error("[Coframe] Error initializing SDK",e),null===(n=null===(t=He.debug)||void 0===t?void 0:t.logs)||void 0===n||n.push({logger:"error",timestamp:(new Date).getTime(),message:"Error initializing SDK",metadata:{error:e instanceof Error?e.message:String(e)}}),J({err:e,projectId:null!==(o=He.projectId)&&void 0!==o?o:"",orgId:null!=Le?Le:"",sessionId:null!=Ne?Ne:""})}),e.init=Je,e}({});

      