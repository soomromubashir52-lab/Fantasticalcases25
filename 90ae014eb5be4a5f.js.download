;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="48e48b05-4d2f-6046-3677-9f1f83bba5c8")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,814688,e=>{"use strict";function t(){let e=window.location.pathname+window.location.search+window.location.hash;window.location.href="/login?goto="+encodeURIComponent(e)+"&error=unauthorized"}e.s(["default",()=>t])},639998,817512,541475,e=>{"use strict";var t,r,n=e.i(221042);let i=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},s=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{let s=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,c=i>>2,u=(3&i)<<4|a>>4,h=(15&a)<<2|l>>6,d=63&l;!o&&(d=64,s||(h=64)),n.push(r[c],r[u],r[h],r[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,a=++t<e.length?r[e.charAt(t)]:64,l=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==l)throw new o;let c=i<<2|s>>4;if(n.push(c),64!==a){let e=s<<4&240|a>>2;if(n.push(e),64!==l){let e=a<<6&192|l;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let l=function(e){let t=i(e);return a.encodeByteArray(t,!0)},c=function(e){return l(e).replace(/\./g,"")},u=function(e){try{return a.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},h=()=>{try{return("u">typeof self?self:"u">typeof window?window:e.g).__FIREBASE_DEFAULTS__||(()=>{if(void 0===n.default||void 0===n.default.env)return;let e=n.default.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)})()||(()=>{let e;if("u"<typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},d=e=>{var t,r;return null==(r=null==(t=h())?void 0:t.emulatorHosts)?void 0:r[e]},p=()=>{var e;return null==(e=h())?void 0:e.config},f=e=>{var t;return null==(t=h())?void 0:t[`_${e}`]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function m(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(e){return!1}}async function v(e){return(await fetch(e,{credentials:"include"})).ok}let _={},I=!1;function y(e,t){if("u"<typeof window||"u"<typeof document||!m(window.location.host)||_[e]===t||_[e]||I)return;function r(e){return`__firebase__banner__${e}`}_[e]=t;let n="__firebase__banner",i=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(_))_[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){let e,t,s=(e=document.getElementById(n),t=!1,e||((e=document.createElement("div")).setAttribute("id",n),t=!0),{created:t,element:e}),a=r("text"),o=document.getElementById(a)||document.createElement("span"),l=r("learnmore"),c=document.getElementById(l)||document.createElement("a"),u=r("preprendIcon"),h=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){let e,t=s.element;t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center",c.setAttribute("id",l),c.innerText="Learn more",c.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",c.setAttribute("target","__blank"),c.style.paddingLeft="5px",c.style.textDecoration="underline";let r=((e=document.createElement("span")).style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{let e;I=!0,(e=document.getElementById(n))&&e.remove()},e);h.setAttribute("width","24"),h.setAttribute("id",u),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px",t.append(h,o,c,r),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",h.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(h.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,o.innerText="Preview backend running in this workspace."),o.setAttribute("id",a)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function w(){return"u">typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function E(){return"u">typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function b(){return"u">typeof window||T()}function T(){return"u">typeof WorkerGlobalScope&&"u">typeof self&&self instanceof WorkerGlobalScope}function C(){return"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function S(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function A(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function P(){let e=w();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function k(){try{return"object"==typeof indexedDB}catch(e){return!1}}function R(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(e){t(e)}})}class O extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,O.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var r,n;let i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?(r=a,n=i,r.replace(L,(e,t)=>{let r=n[t];return null!=r?String(r):`<${t}?>`})):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new O(s,l,i)}}let L=/\{\$([^}]+)}/g;function D(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function M(e){return null!==e&&"object"==typeof e}function U(e){let t=[];for(let[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function F(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}),t}function x(e){let t=e.indexOf("?");if(!t)return"";let r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function V(e,t){let r=new j(e,t);return r.subscribe.bind(r)}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw Error("Missing Observer.");void 0===(n=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:r}:e).next&&(n.next=H),void 0===n.error&&(n.error=H),void 0===n.complete&&(n.complete=H);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"u">typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H(){}function W(e){return e&&e._delegate?e._delegate:e}e.s(["Deferred",()=>g,"ErrorFactory",()=>N,"FirebaseError",()=>O,"base64Decode",()=>u,"base64urlEncodeWithoutPadding",()=>c,"createSubscribe",()=>V,"deepEqual",()=>function e(t,r){if(t===r)return!0;let n=Object.keys(t),i=Object.keys(r);for(let s of n){if(!i.includes(s))return!1;let n=t[s],a=r[s];if(M(n)&&M(a)){if(!e(n,a))return!1}else if(n!==a)return!1}for(let e of i)if(!n.includes(e))return!1;return!0},"extractQuerystring",()=>x,"getDefaultAppConfig",()=>p,"getDefaultEmulatorHost",()=>d,"getExperimentalSetting",()=>f,"getModularInstance",()=>W,"getUA",()=>w,"isBrowser",()=>b,"isBrowserExtension",()=>S,"isCloudWorkstation",()=>m,"isCloudflareWorker",()=>C,"isEmpty",()=>D,"isIE",()=>P,"isIndexedDBAvailable",()=>k,"isMobileCordova",()=>E,"isReactNative",()=>A,"isWebWorker",()=>T,"pingServer",()=>v,"querystring",()=>U,"querystringDecode",()=>F,"updateEmulatorBanner",()=>y,"validateIndexedDBOpenable",()=>R],817512);class B{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let z="[DEFAULT]";class ${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!=(t=null==e?void 0:e.optional)&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}if(n)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:z})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=z){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=z){return this.instances.has(e)}getOptions(e=z){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!=(r=this.onInitCallbacks.get(n))?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var r;let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e)===z?void 0:r,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=z){return this.component?this.component.multipleInstances?e:z:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}e.s(["Component",()=>B,"ComponentContainer",()=>G],639998);let q=[];(t=r||(r={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT";let K={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},J=r.INFO,Y={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},X=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=Y[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Q{constructor(e){this.name=e,this._logLevel=J,this._logHandler=X,this._userLogHandler=null,q.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?K[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}function Z(e){q.forEach(t=>{t.setLogLevel(e)})}function ee(e,t){for(let n of q){let i=null;t&&t.level&&(i=K[t.level]),null===e?n.userLogHandler=null:n.userLogHandler=(t,n,...s)=>{let a=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:r[n].toLowerCase(),message:a,args:s,type:t.name})}}}e.s(["LogLevel",()=>r,"Logger",()=>Q,"setLogLevel",()=>Z,"setUserLogHandler",()=>ee],541475)},256967,e=>{"use strict";let t,r,n,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,c={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return u(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function u(e){if(e instanceof IDBRequest){let t;return(t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(u(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)})).then(t=>{t instanceof IDBCursor&&i.set(t,e)}).catch(()=>{}),l.set(t,e),t}if(o.has(e))return o.get(e);let t=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(h(this),t),u(i.get(this))}:function(...t){return u(e.apply(h(this),t))}:function(t,...r){let n=e.call(h(this),t,...r);return a.set(n,t.sort?t.sort():[t]),u(n)};return e instanceof IDBTransaction&&function(e){if(s.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});s.set(e,t)}(e),(r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,c):e}(e);return t!==e&&(o.set(e,t),l.set(t,e)),t}let h=e=>l.get(e);function d(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let a=indexedDB.open(e,t),o=u(a);return n&&a.addEventListener("upgradeneeded",e=>{n(u(a.result),e.oldVersion,e.newVersion,u(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}function p(e,{blocked:t}={}){let r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",e=>t(e.oldVersion,e)),u(r).then(()=>void 0)}let f=["get","getKey","getAll","getAllKeys","count"],g=["put","add","delete","clear"],m=new Map;function v(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(m.get(t))return m.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=g.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||f.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),i&&s.done]))[0]};return m.set(t,s),s}c={...t=c,get:(e,r,n)=>v(e,r)||t.get(e,r,n),has:(e,r)=>!!v(e,r)||t.has(e,r)},e.s(["deleteDB",()=>p,"openDB",()=>d],256967)},73140,657799,136596,e=>{"use strict";var t,r=e.i(639998),n=e.i(541475),i=e.i(817512),s=e.i(256967);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{let t;if((null==(t=e.getComponent())?void 0:t.type)!=="VERSION")return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let o="@firebase/app",l="0.13.2",c=new n.Logger("@firebase/app"),u="[DEFAULT]",h={[o]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,p=new Map,f=new Map;function g(e,t){try{e.container.addComponent(t)}catch(r){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function v(e){let t=e.name;if(f.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(f.set(t,e),d.values()))g(r,e);for(let t of p.values())g(t,e);return!0}function _(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function I(e,t,r=u){_(e,t).clearInstance(r)}function y(e){return void 0!==e.options}function w(e){return null!=e&&void 0!==e.settings}function E(){f.clear()}let b=new i.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class T{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}function C(e,t){let r=(0,i.base64Decode)(e.split(".")[1]);null===r?console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`):void 0===JSON.parse(r).exp?console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):1e3*JSON.parse(r).exp-new Date().getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class S extends T{constructor(e,t,r,n){const i=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:r,automaticDataCollectionEnabled:i};void 0!==e.apiKey?super(e,s,n):super(e.options,s,n),this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._serverConfig.authIdToken&&C(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&C(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"u">typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,L(o,l,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){N(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw b.create("server-app-deleted")}}let A="11.10.0";function P(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});let s=Object.assign({name:u,automaticDataCollectionEnabled:!0},t),a=s.name;if("string"!=typeof a||!a)throw b.create("bad-app-name",{appName:String(a)});if(n||(n=(0,i.getDefaultAppConfig)()),!n)throw b.create("no-options");let o=d.get(a);if(o)if((0,i.deepEqual)(n,o.options)&&(0,i.deepEqual)(s,o.config))return o;else throw b.create("duplicate-app",{appName:a});let l=new r.ComponentContainer(a);for(let e of f.values())l.addComponent(e);let c=new T(n,s,l);return d.set(a,c),c}function k(e,t){let n;if((0,i.isBrowser)()&&!(0,i.isWebWorker)())throw b.create("invalid-server-app-environment");void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!0),n=y(e)?e.options:e;let s=Object.assign(Object.assign({},t),n);if(void 0!==s.releaseOnDeref&&delete s.releaseOnDeref,void 0!==t.releaseOnDeref&&"u"<typeof FinalizationRegistry)throw b.create("finalization-registry-not-supported",{});let a=""+[...JSON.stringify(s)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),o=p.get(a);if(o)return o.incRefCount(t.releaseOnDeref),o;let l=new r.ComponentContainer(a);for(let e of f.values())l.addComponent(e);let c=new S(n,t,a,l);return p.set(a,c),c}function R(e=u){let t=d.get(e);if(!t&&e===u&&(0,i.getDefaultAppConfig)())return P();if(!t)throw b.create("no-app",{appName:e});return t}function O(){return Array.from(d.values())}async function N(e){let t=!1,r=e.name;d.has(r)?(t=!0,d.delete(r)):p.has(r)&&0>=e.decRefCount()&&(p.delete(r),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function L(e,t,n){var i;let s=null!=(i=h[e])?i:e;n&&(s+=`-${n}`);let a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){let e=[`Unable to register library "${s}" with version "${t}":`];a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),c.warn(e.join(" "));return}v(new r.Component(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function D(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");(0,n.setUserLogHandler)(e,t)}function M(e){(0,n.setLogLevel)(e)}let U="firebase-heartbeat-store",F=null;function x(){return F||(F=(0,s.openDB)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(U)}catch(e){console.warn(e)}}}).catch(e=>{throw b.create("idb-open",{originalErrorMessage:e.message})})),F}async function V(e){try{let t=(await x()).transaction(U),r=await t.objectStore(U).get(H(e));return await t.done,r}catch(e){if(e instanceof i.FirebaseError)c.warn(e.message);else{let t=b.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});c.warn(t.message)}}}async function j(e,t){try{let r=(await x()).transaction(U,"readwrite"),n=r.objectStore(U);await n.put(t,H(e)),await r.done}catch(e){if(e instanceof i.FirebaseError)c.warn(e.message);else{let t=b.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});c.warn(t.message)}}}function H(e){return`${e.name}!${e.options.appId}`}class W{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new z(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=B();if((null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){c.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=B(),{heartbeatsToSend:r,unsentEntries:n}=function(e,t=1024){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),$(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),$(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),s=(0,i.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return c.warn(e),""}}}function B(){return new Date().toISOString().substring(0,10)}class z{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.isIndexedDBAvailable)()&&(0,i.validateIndexedDBOpenable)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await V(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return j(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return j(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function $(e){return(0,i.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}v(new r.Component("platform-logger",e=>new a(e),"PRIVATE")),v(new r.Component("heartbeat",e=>new W(e),"PRIVATE")),L(o,l,""),L(o,l,"esm2017"),L("fire-js",""),e.s(["SDK_VERSION",()=>A,"_DEFAULT_ENTRY_NAME",()=>u,"_addComponent",()=>g,"_addOrOverwriteComponent",()=>m,"_apps",()=>d,"_clearComponents",()=>E,"_components",()=>f,"_getProvider",()=>_,"_isFirebaseApp",()=>y,"_isFirebaseServerApp",()=>w,"_registerComponent",()=>v,"_removeServiceInstance",()=>I,"_serverApps",()=>p,"deleteApp",()=>N,"getApp",()=>R,"getApps",()=>O,"initializeApp",()=>P,"initializeServerApp",()=>k,"onLog",()=>D,"registerVersion",()=>L,"setLogLevel",()=>M],657799);var G=i,q=e.i(364567);let K={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function J(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let Y=new G.ErrorFactory("auth","Firebase",J()),X=new n.Logger("@firebase/auth");function Q(e,...t){X.logLevel<=n.LogLevel.ERROR&&X.error(`Auth (${A}): ${e}`,...t)}function Z(e,...t){throw ei(e,...t)}function ee(e,...t){return ei(e,...t)}function et(e,t,r){let n=Object.assign(Object.assign({},J()),{[t]:r});return new G.ErrorFactory("auth","Firebase",n).create(t,{appName:e.name})}function er(e){return et(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function en(e,t,r){if(!(t instanceof r))throw r.name!==t.constructor.name&&Z(e,"argument-error"),et(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ei(e,...t){if("string"!=typeof e){let r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return Y.create(e,...t)}function es(e,t,...r){if(!e)throw ei(t,...r)}function ea(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Q(t),Error(t)}function eo(){var e;return"u">typeof self&&(null==(e=self.location)?void 0:e.href)||""}function el(){var e;return"u">typeof self&&(null==(e=self.location)?void 0:e.protocol)||null}class ec{constructor(e,t){this.shortDelay=e,this.longDelay=t,function(e,t){e||ea(t)}(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,G.isMobileCordova)()||(0,G.isReactNative)()}get(){return!("u">typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===el()||"https:"===el()||(0,G.isBrowserExtension)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function eu(e,t){var r,n;r=e.emulator,n="Emulator should always be set here",r||ea(n);let{url:i}=e.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class eh{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"u">typeof self&&"fetch"in self?self.fetch:"u">typeof globalThis&&globalThis.fetch?globalThis.fetch:"u">typeof fetch?fetch:void ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"u">typeof self&&"Headers"in self?self.Headers:"u">typeof globalThis&&globalThis.Headers?globalThis.Headers:"u">typeof Headers?Headers:void ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"u">typeof self&&"Response"in self?self.Response:"u">typeof globalThis&&globalThis.Response?globalThis.Response:"u">typeof Response?Response:void ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let ed={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ep=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ef=new ec(3e4,6e4);function eg(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function em(e,t,r,n,i={}){return ev(e,i,async()=>{let i={},s={};n&&("GET"===t?s=n:i={body:JSON.stringify(n)});let a=(0,G.querystring)(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);let l=Object.assign({method:t,headers:o},i);return(0,G.isCloudflareWorker)()||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,G.isCloudWorkstation)(e.emulatorConfig.host)&&(l.credentials="include"),eh.fetch()(await eI(e,e.config.apiHost,r,a),l)})}async function ev(e,t,r){e._canInitEmulator=!1;let n=Object.assign(Object.assign({},ed),t);try{let t=new ey(e),i=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();let s=await i.json();if("needConfirmation"in s)throw ew(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{let[t,r]=(i.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw ew(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw ew(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw ew(e,"user-disabled",s);let a=n[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(r)throw et(e,a,r);Z(e,a)}}catch(t){if(t instanceof G.FirebaseError)throw t;Z(e,"network-request-failed",{message:String(t)})}}async function e_(e,t,r,n,i={}){let s=await em(e,t,r,n,i);return"mfaPendingCredential"in s&&Z(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function eI(e,t,r,n){let i=`${t}${r}?${n}`,s=e.config.emulator?eu(e.config,i):`${e.config.apiScheme}://${i}`;return ep.includes(r)&&(await e._persistenceManagerAvailable,"COOKIE"===e._getPersistenceType())?e._getPersistence()._getFinalTarget(s).toString():s}class ey{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ee(this.auth,"network-request-failed")),ef.get())})}}function ew(e,t,r){let n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);let i=ee(e,t,n);return i.customData._tokenResponse=r,i}function eE(e){return void 0!==e&&void 0!==e.enterprise}class eb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)switch(t.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eT(e,t){return em(e,"GET","/v2/recaptchaConfig",eg(e,t))}async function eC(e,t){return em(e,"POST","/v1/accounts:delete",t)}async function eS(e,t){return em(e,"POST","/v1/accounts:update",t)}async function eA(e,t){return em(e,"POST","/v1/accounts:lookup",t)}function eP(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function ek(e,t=!1){let r=(0,G.getModularInstance)(e),n=await r.getIdToken(t),i=eO(n);es(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");let s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:eP(eR(i.auth_time)),issuedAtTime:eP(eR(i.iat)),expirationTime:eP(eR(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function eR(e){return 1e3*Number(e)}function eO(e){let[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return Q("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,G.base64Decode)(r);if(!e)return Q("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return Q("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function eN(e){let t=eO(e);return es(t,"internal-error"),es(void 0!==t.exp,"internal-error"),es(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function eL(e,t,r=!1){if(r)return t;try{return await t}catch(t){throw t instanceof G.FirebaseError&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class eD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(!e)return this.errorBackoff=3e4,Math.max(0,(null!=(t=this.user.stsTokenManager.expirationTime)?t:0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class eM{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=eP(this.lastLoginAt),this.creationTime=eP(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function eU(e){var t,r,n;let i=e.auth,s=await e.getIdToken(),a=await eL(e,eA(i,{idToken:s}));es(null==a?void 0:a.users.length,i,"internal-error");let o=a.users[0];e._notifyReloadListener(o);let l=(null==(t=o.providerUserInfo)?void 0:t.length)?ex(o.providerUserInfo):[],c=(r=e.providerData,n=l,[...r.filter(e=>!n.some(t=>t.providerId===e.providerId)),...n]),u=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null==c?void 0:c.length);Object.assign(e,{uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new eM(o.createdAt,o.lastLoginAt),isAnonymous:!!u&&h})}async function eF(e){let t=(0,G.getModularInstance)(e);await eU(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ex(e){return e.map(e=>{var{providerId:t}=e,r=(0,q.__rest)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function eV(e,t){let r=await ev(e,{},async()=>{let r=(0,G.querystring)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:i}=e.config,s=await eI(e,n,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let o={method:"POST",headers:a,body:r};return e.emulatorConfig&&(0,G.isCloudWorkstation)(e.emulatorConfig.host)&&(o.credentials="include"),eh.fetch()(s,o)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function ej(e,t){return em(e,"POST","/v2/accounts:revokeToken",eg(e,t))}class eH{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){es(e.idToken,"internal-error"),es(void 0!==e.idToken,"internal-error"),es(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):eN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){es(0!==e.length,"internal-error");let t=eN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(es(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:n,expiresIn:i}=await eV(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){let{refreshToken:r,accessToken:n,expirationTime:i}=t,s=new eH;return r&&(es("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),n&&(es("string"==typeof n,"internal-error",{appName:e}),s.accessToken=n),i&&(es("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eH,this.toJSON())}_performRefresh(){return ea("not implemented")}}function eW(e,t){es("string"==typeof e||void 0===e,"internal-error",{appName:t})}class eB{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,i=(0,q.__rest)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new eM(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await eL(this,this.stsTokenManager.getToken(this.auth,e));return es(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ek(this,e)}reload(){return eF(this)}_assign(e){this!==e&&(es(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new eB(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){es(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await eU(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(w(this.auth.app))return Promise.reject(er(this.auth));let e=await this.getIdToken();return await eL(this,eC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,s,a,o,l,c;let u=null!=(r=t.displayName)?r:void 0,h=null!=(n=t.email)?n:void 0,d=null!=(i=t.phoneNumber)?i:void 0,p=null!=(s=t.photoURL)?s:void 0,f=null!=(a=t.tenantId)?a:void 0,g=null!=(o=t._redirectEventId)?o:void 0,m=null!=(l=t.createdAt)?l:void 0,v=null!=(c=t.lastLoginAt)?c:void 0,{uid:_,emailVerified:I,isAnonymous:y,providerData:w,stsTokenManager:E}=t;es(_&&E,e,"internal-error");let b=eH.fromJSON(this.name,E);es("string"==typeof _,e,"internal-error"),eW(u,e.name),eW(h,e.name),es("boolean"==typeof I,e,"internal-error"),es("boolean"==typeof y,e,"internal-error"),eW(d,e.name),eW(p,e.name),eW(f,e.name),eW(g,e.name),eW(m,e.name),eW(v,e.name);let T=new eB({uid:_,auth:e,email:h,emailVerified:I,displayName:u,isAnonymous:y,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:b,createdAt:m,lastLoginAt:v});return w&&Array.isArray(w)&&(T.providerData=w.map(e=>Object.assign({},e))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t,r=!1){let n=new eH;n.updateFromServerResponse(t);let i=new eB({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await eU(i),i}static async _fromGetAccountInfoResponse(e,t,r){let n=t.users[0];es(void 0!==n.localId,"internal-error");let i=void 0!==n.providerUserInfo?ex(n.providerUserInfo):[],s=!(n.email&&n.passwordHash)&&!(null==i?void 0:i.length),a=new eH;a.updateFromIdToken(r);let o=new eB({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return Object.assign(o,{uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new eM(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(null==i?void 0:i.length)}),o}}let ez=new Map;function e$(e){var t,r;t="Expected a class definition",e instanceof Function||ea(t);let n=ez.get(e);return n?(r="Instance stored in cache mismatched with class",n instanceof e||ea(r)):(n=new e,ez.set(e,n)),n}class eG{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function eq(e,t,r){return`firebase:${e}:${t}:${r}`}eG.type="NONE";class eK{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:i}=this.auth;this.fullUserKey=eq(this.userKey,n.apiKey,i),this.fullPersistenceKey=eq("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){let t=await eA(this.auth,{idToken:e}).catch(()=>void 0);return t?eB._fromGetAccountInfoResponse(this.auth,t,e):null}return eB._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new eK(e$(eG),e,r);let n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),i=n[0]||e$(eG),s=eq(r,e.config.apiKey,e.name),a=null;for(let r of t)try{let t=await r._get(s);if(t){let n;if("string"==typeof t){let r=await eA(e,{idToken:t}).catch(()=>void 0);if(!r)break;n=await eB._fromGetAccountInfoResponse(e,r,t)}else n=eB._fromJSON(e,t);r!==i&&(a=n),i=r;break}}catch(e){}let o=n.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length&&(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new eK(i,e,r)}}function eJ(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(eZ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(eY(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(e1(t))return"Blackberry";if(e6(t))return"Webos";if(eX(t))return"Safari";if((t.includes("chrome/")||eQ(t))&&!t.includes("edge/"))return"Chrome";if(e0(t))return"Android";let r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==r?void 0:r.length)===2)return r[1]}return"Other"}function eY(e=(0,G.getUA)()){return/firefox\//i.test(e)}function eX(e=(0,G.getUA)()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function eQ(e=(0,G.getUA)()){return/crios\//i.test(e)}function eZ(e=(0,G.getUA)()){return/iemobile/i.test(e)}function e0(e=(0,G.getUA)()){return/android/i.test(e)}function e1(e=(0,G.getUA)()){return/blackberry/i.test(e)}function e6(e=(0,G.getUA)()){return/webos/i.test(e)}function e3(e=(0,G.getUA)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function e2(e=(0,G.getUA)()){return e3(e)||e0(e)||e6(e)||e1(e)||/windows phone/i.test(e)||eZ(e)}function e4(e,t=[]){let r;switch(e){case"Browser":r=eJ((0,G.getUA)());break;case"Worker":r=`${eJ((0,G.getUA)())}-${e}`;break;default:r=e}let n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${A}/${n}`}class e5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=t=>new Promise((r,n)=>{try{let n=e(t);r(n)}catch(e){n(e)}});r.onAbort=t,this.queue.push(r);let n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}async function e8(e,t={}){return em(e,"GET","/v2/passwordPolicy",eg(e,t))}class e7{constructor(e){var t,r,n,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!=(t=s.minPasswordLength)?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!=(n=null==(r=e.allowedNonAlphanumericCharacters)?void 0:r.join(""))?n:"",this.forceUpgradeOnSignin=null!=(i=e.forceUpgradeOnSignin)&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,i,s,a;let o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null==(t=o.meetsMinPasswordLength)||t),o.isValid&&(o.isValid=null==(r=o.meetsMaxPasswordLength)||r),o.isValid&&(o.isValid=null==(n=o.containsLowercaseLetter)||n),o.isValid&&(o.isValid=null==(i=o.containsUppercaseLetter)||i),o.isValid&&(o.isValid=null==(s=o.containsNumericCharacter)||s),o.isValid&&(o.isValid=null==(a=o.containsNonAlphanumericCharacter)||a),o}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class e9{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tt(this),this.idTokenSubscription=new tt(this),this.beforeStateQueue=new e5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=e$(t)),this._initializationPromise=this.queue(async()=>{var r,n,i;if(!this._deleted){if(this.persistenceManager=await eK.create(this,e),null==(r=this._resolvePersistenceManagerAvailable)||r.call(this),!this._deleted){if(null==(n=this._popupRedirectResolver)?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null==(i=this.currentUser)?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await eA(this,{idToken:e}),r=await eB._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(w(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=null==(t=this.redirectUser)?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!r||r===s)&&(null==a?void 0:a.user)&&(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return(es(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId)?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await eU(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("u"<typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(w(this.app))return Promise.reject(er(this));let t=e?(0,G.getModularInstance)(e):null;return t&&es(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&es(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return w(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return w(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(e$(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new e7(await e8(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new G.ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await ej(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(e=this._currentUser)?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&e$(e)||this._popupRedirectResolver;es(t,this,"argument-error"),this.redirectPersistenceManager=await eK.create(this,[e$(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return(this._isInitialized&&await this.queue(async()=>{}),(null==(t=this._currentUser)?void 0:t._redirectEventId)===e)?this._currentUser:(null==(r=this.redirectUser)?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=null!=(t=null==(e=this.currentUser)?void 0:e.uid)?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};let i="function"==typeof t?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(es(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"==typeof t){let i=e.addObserver(t,r,n);return()=>{s=!0,i()}}{let r=e.addObserver(t);return()=>{s=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return es(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await (null==(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;if(w(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await (null==(e=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){X.logLevel<=n.LogLevel.WARN&&X.warn(`Auth (${A}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function te(e){return(0,G.getModularInstance)(e)}class tt{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,G.createSubscribe)(e=>this.observer=e)}get next(){return es(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let tr={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ti{constructor(){this.enterprise=new ts}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ts{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}let ta="NO_RECAPTCHA";class to{constructor(e){this.type="recaptcha-enterprise",this.auth=te(e)}async verify(e="verify",t=!1){async function r(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,r)=>{eT(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0===n.recaptchaKey)r(Error("recaptcha Enterprise site key undefined"));else{let r=new eb(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}}).catch(e=>{r(e)})})}function n(t,r,n){let i=window.grecaptcha;eE(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{r(e)}).catch(()=>{r(ta)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ti().execute("siteKey",{action:"verify"}):new Promise((e,i)=>{r(this.auth).then(r=>{if(!t&&eE(window.grecaptcha))n(r,e,i);else{var s;if("u"<typeof window)return void i(Error("RecaptchaVerifier is only supported in browser"));let t=tr.recaptchaEnterpriseScript;0!==t.length&&(t+=r),(s=t,tr.loadJS(s)).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function tl(e,t,r,n=!1,i=!1){let s,a=new to(e);if(i)s=ta;else try{s=await a.verify(r)}catch(e){s=await a.verify(r,!0)}let o=Object.assign({},t);if("mfaSmsEnrollment"===r||"mfaSmsSignIn"===r){if("phoneEnrollmentInfo"in o){let e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){let e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function tc(e,t,r,n,i){var s,a;if("EMAIL_PASSWORD_PROVIDER"===i)if(null==(s=e._getRecaptchaConfig())||!s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return n(e,t).catch(async i=>{if("auth/missing-recaptcha-token"!==i.code)return Promise.reject(i);{console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let i=await tl(e,t,r,"getOobCode"===r);return n(e,i)}});else{let i=await tl(e,t,r,"getOobCode"===r);return n(e,i)}if("PHONE_PROVIDER"!==i)return Promise.reject(i+" provider is not supported.");if(null==(a=e._getRecaptchaConfig())?void 0:a.isProviderEnabled("PHONE_PROVIDER")){let i=await tl(e,t,r);return n(e,i).catch(async i=>{var s;if((null==(s=e._getRecaptchaConfig())?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);let i=await tl(e,t,r,!1,!0);return n(e,i)}return Promise.reject(i)})}{let i=await tl(e,t,r,!1,!0);return n(e,i)}}async function tu(e){let t=te(e),r=new eb(await eT(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new to(t).verify()}function th(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function td(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class tp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ea("not implemented")}_getIdTokenResponse(e){return ea("not implemented")}_linkToIdToken(e,t){return ea("not implemented")}_getReauthenticationResolver(e){return ea("not implemented")}}async function tf(e,t){return em(e,"POST","/v1/accounts:resetPassword",eg(e,t))}async function tg(e,t){return em(e,"POST","/v1/accounts:update",t)}async function tm(e,t){return em(e,"POST","/v1/accounts:signUp",t)}async function tv(e,t){return em(e,"POST","/v1/accounts:update",eg(e,t))}async function t_(e,t){return e_(e,"POST","/v1/accounts:signInWithPassword",eg(e,t))}async function tI(e,t){return e_(e,"POST","/v1/accounts:signInWithEmailLink",eg(e,t))}async function ty(e,t){return e_(e,"POST","/v1/accounts:signInWithEmailLink",eg(e,t))}class tw extends tp{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new tw(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new tw(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return tc(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",t_,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tI(e,{email:this._email,oobCode:this._password});default:Z(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return tc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tm,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ty(e,{idToken:t,email:this._email,oobCode:this._password});default:Z(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tE(e,t){return e_(e,"POST","/v1/accounts:signInWithIdp",eg(e,t))}class tb extends tp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new tb(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Z("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,i=(0,q.__rest)(t,["providerId","signInMethod"]);if(!r||!n)return null;let s=new tb(r,n);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return tE(e,this.buildRequest())}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,tE(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,tE(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,G.querystring)(t)}return e}}async function tT(e,t){return em(e,"POST","/v1/accounts:sendVerificationCode",eg(e,t))}async function tC(e,t){return e_(e,"POST","/v1/accounts:signInWithPhoneNumber",eg(e,t))}async function tS(e,t){let r=await e_(e,"POST","/v1/accounts:signInWithPhoneNumber",eg(e,t));if(r.temporaryProof)throw ew(e,"account-exists-with-different-credential",r);return r}let tA={USER_NOT_FOUND:"user-not-found"};async function tP(e,t){return e_(e,"POST","/v1/accounts:signInWithPhoneNumber",eg(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),tA)}class tk extends tp{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new tk({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new tk({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return tC(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return tS(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return tP(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return r||t||n||i?new tk({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}):null}}class tR{constructor(e){var t,r,n,i,s,a;const o=(0,G.querystringDecode)((0,G.extractQuerystring)(e)),l=null!=(t=o.apiKey)?t:null,c=null!=(r=o.oobCode)?r:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!=(n=o.mode)?n:null);es(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!=(i=o.continueUrl)?i:null,this.languageCode=null!=(s=o.lang)?s:null,this.tenantId=null!=(a=o.tenantId)?a:null}static parseLink(e){let t,r,n,i=(r=(t=(0,G.querystringDecode)((0,G.extractQuerystring)(e)).link)?(0,G.querystringDecode)((0,G.extractQuerystring)(t)).deep_link_id:null,((n=(0,G.querystringDecode)((0,G.extractQuerystring)(e)).deep_link_id)?(0,G.querystringDecode)((0,G.extractQuerystring)(n)).link:null)||n||r||t||e);try{return new tR(i)}catch(e){return null}}}class tO{constructor(){this.providerId=tO.PROVIDER_ID}static credential(e,t){return tw._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=tR.parseLink(t);return es(r,"argument-error"),tw._fromEmailAndCode(e,r.code,r.tenantId)}}tO.PROVIDER_ID="password",tO.EMAIL_PASSWORD_SIGN_IN_METHOD="password",tO.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tL extends tN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class tD extends tL{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return es("providerId"in t&&"signInMethod"in t,"argument-error"),tb._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return es(e.idToken||e.accessToken,"argument-error"),tb._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return tD.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return tD.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:n,pendingToken:i,nonce:s,providerId:a}=e;if(!r&&!n&&!t&&!i||!a)return null;try{return new tD(a)._credential({idToken:t,accessToken:r,nonce:s,pendingToken:i})}catch(e){return null}}}class tM extends tL{constructor(){super("facebook.com")}static credential(e){return tb._fromParams({providerId:tM.PROVIDER_ID,signInMethod:tM.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tM.credentialFromTaggedObject(e)}static credentialFromError(e){return tM.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tM.credential(e.oauthAccessToken)}catch(e){return null}}}tM.FACEBOOK_SIGN_IN_METHOD="facebook.com",tM.PROVIDER_ID="facebook.com";class tU extends tL{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tb._fromParams({providerId:tU.PROVIDER_ID,signInMethod:tU.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tU.credentialFromTaggedObject(e)}static credentialFromError(e){return tU.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return tU.credential(t,r)}catch(e){return null}}}tU.GOOGLE_SIGN_IN_METHOD="google.com",tU.PROVIDER_ID="google.com";class tF extends tL{constructor(){super("github.com")}static credential(e){return tb._fromParams({providerId:tF.PROVIDER_ID,signInMethod:tF.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tF.credentialFromTaggedObject(e)}static credentialFromError(e){return tF.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tF.credential(e.oauthAccessToken)}catch(e){return null}}}tF.GITHUB_SIGN_IN_METHOD="github.com",tF.PROVIDER_ID="github.com";class tx extends tp{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return tE(e,this.buildRequest())}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,tE(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,tE(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let{providerId:t,signInMethod:r,pendingToken:n}="string"==typeof e?JSON.parse(e):e;return t&&r&&n&&t===r?new tx(t,n):null}static _create(e,t){return new tx(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class tV extends tN{constructor(e){es(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return tV.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return tV.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let t=tx.fromJSON(e);return es(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return tx._create(r,t)}catch(e){return null}}}class tj extends tL{constructor(){super("twitter.com")}static credential(e,t){return tb._fromParams({providerId:tj.PROVIDER_ID,signInMethod:tj.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tj.credentialFromTaggedObject(e)}static credentialFromError(e){return tj.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return tj.credential(t,r)}catch(e){return null}}}async function tH(e,t){return e_(e,"POST","/v1/accounts:signUp",eg(e,t))}tj.TWITTER_SIGN_IN_METHOD="twitter.com",tj.PROVIDER_ID="twitter.com";class tW{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){return new tW({user:await eB._fromIdTokenResponse(e,r,n),providerId:tB(r),_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){return await e._updateTokensIfNecessary(r,!0),new tW({user:e,providerId:tB(r),_tokenResponse:r,operationType:t})}}function tB(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function tz(e){var t;if(w(e.app))return Promise.reject(er(e));let r=te(e);if(await r._initializationPromise,null==(t=r.currentUser)?void 0:t.isAnonymous)return new tW({user:r.currentUser,providerId:null,operationType:"signIn"});let n=await tH(r,{returnSecureToken:!0}),i=await tW._fromIdTokenResponse(r,"signIn",n,!0);return await r._updateCurrentUser(i.user),i}class t$ extends G.FirebaseError{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,t$.prototype),this.customData={appName:e.name,tenantId:null!=(i=e.tenantId)?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new t$(e,t,r,n)}}function tG(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw t$._fromErrorAndOperation(e,r,t,n);throw r})}function tq(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function tK(e,t){let r=(0,G.getModularInstance)(e);await tY(!0,r,t);let{providerUserInfo:n}=await eS(r.auth,{idToken:await r.getIdToken(),deleteProvider:[t]}),i=tq(n||[]);return r.providerData=r.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(r.phoneNumber=null),await r.auth._persistUserIfCurrent(r),r}async function tJ(e,t,r=!1){let n=await eL(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return tW._forOperation(e,"link",n)}async function tY(e,t,r){await eU(t),es(tq(t.providerData).has(r)===e,t.auth,!1===e?"provider-already-linked":"no-such-provider")}async function tX(e,t,r=!1){let{auth:n}=e;if(w(n.app))return Promise.reject(er(n));let i="reauthenticate";try{let s=await eL(e,tG(n,i,t,e),r);es(s.idToken,n,"internal-error");let a=eO(s.idToken);es(a,n,"internal-error");let{sub:o}=a;return es(e.uid===o,n,"user-mismatch"),tW._forOperation(e,i,s)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&Z(n,"user-mismatch"),e}}async function tQ(e,t,r=!1){if(w(e.app))return Promise.reject(er(e));let n="signIn",i=await tG(e,n,t),s=await tW._fromIdTokenResponse(e,n,i);return r||await e._updateCurrentUser(s.user),s}async function tZ(e,t){return tQ(te(e),t)}async function t0(e,t){return e_(e,"POST","/v1/accounts:signInWithCustomToken",eg(e,t))}async function t1(e,t){if(w(e.app))return Promise.reject(er(e));let r=te(e),n=await t0(r,{token:t,returnSecureToken:!0}),i=await tW._fromIdTokenResponse(r,"signIn",n);return await r._updateCurrentUser(i.user),i}class t6{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?t3._fromServerResponse(e,t):"totpInfo"in t?t2._fromServerResponse(e,t):Z(e,"internal-error")}}class t3 extends t6{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new t3(t)}}class t2 extends t6{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new t2(t)}}async function t4(e){let t=te(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function t5(e,t,r){await tf((0,G.getModularInstance)(e),{oobCode:t,newPassword:r}).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&t4(e),t})}async function t8(e,t){await tv((0,G.getModularInstance)(e),{oobCode:t})}async function t7(e,t){let r=(0,G.getModularInstance)(e),n=await tf(r,{oobCode:t}),i=n.requestType;switch(es(i,r,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":es(n.newEmail,r,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":es(n.mfaInfo,r,"internal-error");default:es(n.email,r,"internal-error")}let s=null;return n.mfaInfo&&(s=t6._fromServerResponse(te(r),n.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===n.requestType?n.newEmail:n.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===n.requestType?n.email:n.newEmail)||null,multiFactorInfo:s},operation:i}}function t9(e,t){let r=(0,G.getModularInstance)(e);return w(r.auth.app)?Promise.reject(er(r.auth)):re(r,t,null)}async function re(e,t,r){let{auth:n}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),r&&(i.password=r);let s=await eL(e,tg(n,i));await e._updateTokensIfNecessary(s,!0)}function rt(e){return tu(e)}function rr(e,t,r,n){return(0,G.getModularInstance)(e).onIdTokenChanged(t,r,n)}function rn(e,t){return em(e,"POST","/v2/accounts/mfaEnrollment:start",eg(e,t))}new WeakMap;let ri="__sak";class rs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(ri,"1"),this.storage.removeItem(ri),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ra extends rs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=e2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});let r=e.key;t?this.detachListener():this.stopPolling();let n=()=>{let e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},i=this.storage.getItem(r);(0,G.isIE)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ra.type="LOCAL";class ro extends rs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ro.type="SESSION";class rl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let r=new rl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:r,data:n}=e.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:r});let s=Array.from(i).map(async t=>t(e.origin,n)),a=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function rc(e="",t=10){let r="";for(let e=0;e<t;e++)r+=Math.floor(10*Math.random());return e+r}rl.receivers=[];class ru{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let n,i,s="u">typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((a,o)=>{let l=rc("",20);s.port1.start();let c=setTimeout(()=>{o(Error("unsupported_event"))},r);i={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),n=setTimeout(()=>{o(Error("timeout"))},3e3);break;case"done":clearTimeout(n),a(e.data.response);break;default:clearTimeout(c),clearTimeout(n),o(Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function rh(){return window}function rd(){return void 0!==rh().WorkerGlobalScope&&"function"==typeof rh().importScripts}async function rp(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}let rf="firebaseLocalStorageDb",rg="firebaseLocalStorage",rm="fbase_key";class rv{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function r_(e,t){return e.transaction([rg],t?"readwrite":"readonly").objectStore(rg)}function rI(){let e=indexedDB.open(rf,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(rg,{keyPath:rm})}catch(e){r(e)}}),e.addEventListener("success",async()=>{let r=e.result;r.objectStoreNames.contains(rg)?t(r):(r.close(),await new rv(indexedDB.deleteDatabase(rf)).toPromise(),t(await rI()))})})}async function ry(e,t,r){return new rv(r_(e,!0).put({[rm]:t,value:r})).toPromise()}async function rw(e,t){let r=r_(e,!1).get(t),n=await new rv(r).toPromise();return void 0===n?null:n.value}function rE(e,t){return new rv(r_(e,!0).delete(t)).toPromise()}class rb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await rI()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rl._getInstance(rd()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await rp(),!this.activeServiceWorker)return;this.sender=new ru(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&(null==(e=r[0])?void 0:e.fulfilled)&&(null==(t=r[0])?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null==(t=null==navigator?void 0:navigator.serviceWorker)?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await rI();return await ry(e,ri,"1"),await rE(e,ri),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ry(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>rw(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new rv(r_(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],r=new Set;if(0!==e.length)for(let{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(let e of Object.keys(this.localCache))this.localCache[e]&&!r.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}function rT(e,t){return em(e,"POST","/v2/accounts/mfaSignIn:start",eg(e,t))}rb.type="LOCAL",tn("rcb"),new ec(3e4,6e4);let rC="recaptcha";async function rS(e,t,r){var n;if(!e._getRecaptchaConfig())try{await tu(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"==typeof t?{phoneNumber:t}:t,"session"in i){let t=i.session;if("phoneNumber"in i){es("enroll"===t.type,e,"internal-error");let n={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===ta){es((null==r?void 0:r.type)===rC,e,"argument-error");let n=await rA(e,t,r);return rn(e,n)}return rn(e,t)},a=tc(e,n,"mfaSmsEnrollment",s,"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{es("signin"===t.type,e,"internal-error");let s=(null==(n=i.multiFactorHint)?void 0:n.uid)||i.multiFactorUid;es(s,e,"missing-multi-factor-info");let a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===ta){es((null==r?void 0:r.type)===rC,e,"argument-error");let n=await rA(e,t,r);return rT(e,n)}return rT(e,t)},l=tc(e,a,"mfaSmsSignIn",o,"PHONE_PROVIDER");return(await l.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{let t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},n=async(e,t)=>{if(t.captchaResponse===ta){es((null==r?void 0:r.type)===rC,e,"argument-error");let n=await rA(e,t,r);return tT(e,n)}return tT(e,t)},s=tc(e,t,"sendVerificationCode",n,"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{null==r||r._reset()}}async function rA(e,t,r){es(r.type===rC,e,"argument-error");let n=await r.verify();es("string"==typeof n,e,"argument-error");let i=Object.assign({},t);if("phoneEnrollmentInfo"in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,r=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n,captchaResponse:t,clientType:r,recaptchaVersion:s}}),i}if(!("phoneSignInInfo"in i))return Object.assign(i,{recaptchaToken:n}),i;{let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,r=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:e,clientType:t,recaptchaVersion:r}}),i}}class rP{constructor(e){this.providerId=rP.PROVIDER_ID,this.auth=te(e)}verifyPhoneNumber(e,t){return rS(this.auth,e,(0,G.getModularInstance)(t))}static credential(e,t){return tk._fromVerification(e,t)}static credentialFromResult(e){return rP.credentialFromTaggedObject(e)}static credentialFromError(e){return rP.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?tk._fromTokenResponse(t,r):null}}function rk(e,t){return t?e$(t):(es(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rP.PROVIDER_ID="phone",rP.PHONE_SIGN_IN_METHOD="phone";class rR extends tp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rO(e){return tQ(e.auth,new rR(e),e.bypassAuthState)}function rN(e){let{auth:t,user:r}=e;return es(r,t,"internal-error"),tX(r,new rR(e),e.bypassAuthState)}async function rL(e){let{auth:t,user:r}=e;return es(r,t,"internal-error"),tJ(r,new rR(e),e.bypassAuthState)}class rD{constructor(e,t,r,n,i=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:n,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);let o={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rO;case"linkViaPopup":case"linkViaRedirect":return rL;case"reauthViaPopup":case"reauthViaRedirect":return rN;default:Z(this.auth,"internal-error")}}resolve(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||ea(r),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||ea(r),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let rM=new ec(2e3,1e4);async function rU(e,t,r){if(w(e.app))return Promise.reject(ee(e,"operation-not-supported-in-this-environment"));let n=te(e);en(e,t,tN);let i=rk(n,r);return new rF(n,"signInViaPopup",t,i).executeNotNull()}class rF extends rD{constructor(e,t,r,n,i){super(e,t,n,i),this.provider=r,this.authWindow=null,this.pollId=null,rF.currentPopupAction&&rF.currentPopupAction.cancel(),rF.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return es(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||ea(t);let r=rc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],r),this.authWindow.associatedEvent=r,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ee(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null==(e=this.authWindow)?void 0:e.associatedEvent)||null}cancel(){this.reject(ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rF.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if(null==(r=null==(t=this.authWindow)?void 0:t.window)?void 0:r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ee(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rM.get())};e()}}rF.currentPopupAction=null;let rx=new Map;class rV extends rD{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=rx.get(this.auth._key());if(!e){try{let t=await rj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}rx.set(this.auth._key(),e)}return this.bypassAuthState||rx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rj(e,t){let r=rz(t),n=rB(e);if(!await n._isAvailable())return!1;let i=await n._get(r)==="true";return await n._remove(r),i}async function rH(e,t){return rB(e)._set(rz(t),"true")}function rW(e,t){rx.set(e._key(),t)}function rB(e){return e$(e._redirectPersistence)}function rz(e){return eq("pendingRedirect",e.config.apiKey,e.name)}function r$(e,t,r){return rG(e,t,r)}async function rG(e,t,r){if(w(e.app))return Promise.reject(er(e));let n=te(e);en(e,t,tN),await n._initializationPromise;let i=rk(n,r);return await rH(i,n),i._openRedirect(n,t,"signInViaRedirect")}function rq(e,t,r){return rK(e,t,r)}async function rK(e,t,r){let n=(0,G.getModularInstance)(e);en(n.auth,t,tN),await n.auth._initializationPromise;let i=rk(n.auth,r);await tY(!1,n,t.providerId),await rH(i,n.auth);let s=await rX(n);return i._openRedirect(n.auth,t,"linkViaRedirect",s)}async function rJ(e,t){return await te(e)._initializationPromise,rY(e,t,!1)}async function rY(e,t,r=!1){if(w(e.app))return Promise.reject(er(e));let n=te(e),i=rk(n,t),s=new rV(n,i,r),a=await s.execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,t)),a}async function rX(e){let t=rc(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class rQ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r0(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!r0(e)){let n=(null==(r=e.error.code)?void 0:r.split("auth/")[1])||"internal-error";t.onError(ee(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rZ(e))}saveEventToCache(e){this.cachedEventUids.add(rZ(e)),this.lastProcessedEventTime=Date.now()}}function rZ(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function r0({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}async function r1(e,t={}){return em(e,"GET","/v1/projects",t)}let r6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r3=/^https?/;async function r2(e){if(e.config.emulator)return;let{authorizedDomains:t}=await r1(e);for(let e of t)try{if(function(e){let t=eo(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){let i=new URL(e);return""===i.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===n}if(!r3.test(r))return!1;if(r6.test(e))return n===e;let i=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}(e))return}catch(e){}Z(e,"unauthorized-domain")}let r4=new ec(3e4,6e4);function r5(){let e=rh().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let r8=null,r7=new ec(5e3,15e3),r9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ne=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function nt(e){let t,r,n,i,s,a=await (r8=r8||new Promise((t,r)=>{var n,i,s,a;function o(){r5(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{r5(),r(ee(e,"network-request-failed"))},timeout:r4.get()})}if(null==(i=null==(n=rh().gapi)?void 0:n.iframes)?void 0:i.Iframe)t(gapi.iframes.getContext());else if(null==(s=rh().gapi)?void 0:s.load)o();else{let t=tn("iframefcb");return rh()[t]=()=>{gapi.load?o():r(ee(e,"network-request-failed"))},(a=`${tr.gapiScript}?onload=${t}`,tr.loadJS(a)).catch(e=>r(e))}}).catch(e=>{throw r8=null,e})),o=rh().gapi;return es(o,e,"internal-error"),a.open({where:document.body,url:(es((t=e.config).authDomain,e,"auth-domain-config-required"),r=t.emulator?eu(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,n={apiKey:t.apiKey,appName:e.name,v:A},(i=ne.get(e.config.apiHost))&&(n.eid=i),(s=e._getFrameworks()).length&&(n.fw=s.join(",")),`${r}?${(0,G.querystring)(n).slice(1)}`),messageHandlersFilter:o.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r9,dontclear:!0},t=>new Promise(async(r,n)=>{await t.restyle({setHideOnLeave:!1});let i=ee(e,"network-request-failed"),s=rh().setTimeout(()=>{n(i)},r7.get());function a(){rh().clearTimeout(s),r(t)}t.ping(a).then(a,()=>{n(i)})}))}let nr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let ni=encodeURIComponent("fac");async function ns(e,t,r,n,i,s){es(e.config.authDomain,e,"auth-domain-config-required"),es(e.config.apiKey,e,"invalid-api-key");let a={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:A,eventId:i};if(t instanceof tN)for(let[r,n]of(t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",(0,G.isEmpty)(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))a[r]=n;if(t instanceof tL){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}for(let t of(e.tenantId&&(a.tid=e.tenantId),Object.keys(a)))void 0===a[t]&&delete a[t];let o=await e._getAppCheckToken(),l=o?`#${ni}=${encodeURIComponent(o)}`:"";return`${function({config:e}){return e.emulator?eu(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,G.querystring)(a).slice(1)}${l}`}let na="webStorageSupport",no=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=rY,this._overrideRedirectResult=rW}async _openPopup(e,t,r,n){var i,s,a;s=null==(i=this.eventManagers[e._key()])?void 0:i.manager,a="_initialize() not called before _openPopup()",s||ea(a);let o=await ns(e,t,r,eo(),n);return function(e,t,r,n=500,i=600){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString(),o="",l=Object.assign(Object.assign({},nr),{width:n.toString(),height:i.toString(),top:s,left:a}),c=(0,G.getUA)().toLowerCase();r&&(o=eQ(c)?"_blank":r),eY(c)&&(t=t||"http://localhost",l.scrollbars="yes");let u=Object.entries(l).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=(0,G.getUA)()){var t;return e3(e)&&!!(null==(t=window.navigator)?void 0:t.standalone)}(c)&&"_self"!==o){var h,d;let e,r;return h=t||"",d=o,(e=document.createElement("a")).href=h,e.target=d,(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r),new nn(null)}let p=window.open(t||"",o,u);es(p,e,"popup-blocked");try{p.focus()}catch(e){}return new nn(p)}(e,o,rc())}async _openRedirect(e,t,r,n){var i;return await this._originValidation(e),i=await ns(e,t,r,eo(),n),rh().location.href=i,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var r;let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(r="If manager is not set, promise should be",n||ea(r),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await nt(e),r=new rQ(e);return t.register("authEvent",t=>(es(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(na,{type:na},r=>{var n;let i=null==(n=null==r?void 0:r[0])?void 0:n[na];void 0!==i&&t(!!i),Z(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=r2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return e2()||eX()||e3()}};var nl="@firebase/auth",nc="1.10.8";class nu{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null==(e=this.auth.currentUser)?void 0:e.uid)||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){es(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let nh=(0,G.getExperimentalSetting)("authIdTokenMaxAge")||300,nd=null;function np(e=R()){let t=_(e,"auth");if(t.isInitialized())return t.getImmediate();let r=function(e,t){let r=_(e,"auth");if(r.isInitialized()){let e=r.getImmediate(),n=r.getOptions();if((0,G.deepEqual)(n,null!=t?t:{}))return e;Z(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:no,persistence:[rb,ra,ro]}),n=(0,G.getExperimentalSetting)("authTokenSyncURL");if(n&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(n,location.origin);if(location.origin===e.origin){let t,n=(t=e.toString(),async e=>{let r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>nh)return;let i=null==r?void 0:r.token;nd!==i&&(nd=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});(0,G.getModularInstance)(r).beforeAuthStateChanged(n,()=>n(r.currentUser)),rr(r,e=>n(e))}}let i=(0,G.getDefaultEmulatorHost)("auth");return i&&function(e,t,r){let n=te(e);es(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let i=th(t),{host:s,port:a}=function(e){let t=th(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};let n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){let e=i[1];return{host:e,port:td(n.substr(e.length+1))}}{let[e,t]=n.split(":");return{host:e,port:td(t)}}}(t),o=null===a?"":`:${a}`,l={url:`${i}//${s}${o}/`},c=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!n._canInitEmulator){es(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),es((0,G.deepEqual)(l,n.config.emulator)&&(0,G.deepEqual)(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=l,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,(0,G.isCloudWorkstation)(s)?((0,G.pingServer)(`${i}//${s}${o}`),(0,G.updateEmulatorBanner)("Auth",!0)):function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"u">typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"u">typeof window&&"u">typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(r,`http://${i}`),r}tr={loadJS:e=>new Promise((t,r)=>{var n,i;let s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=e=>{let t=ee("internal-error");t.customData=e,r(t)},s.type="text/javascript",s.charset="UTF-8",(null!=(i=null==(n=document.getElementsByTagName("head"))?void 0:n[0])?i:document).appendChild(s)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},t="Browser",v(new r.Component("auth",(e,{options:r})=>{let n,i,s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=s.options;es(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});let u=new e9(s,a,o,{apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e4(t)});return i=(Array.isArray(n=(null==r?void 0:r.persistence)||[])?n:[n]).map(e$),(null==r?void 0:r.errorMap)&&u._updateErrorMap(r.errorMap),u._initializeWithPersistence(i,null==r?void 0:r.popupRedirectResolver),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),v(new r.Component("auth-internal",e=>new nu(te(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),L(nl,nc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),L(nl,nc,"esm2017"),e.s([],395066),e.s([],73140),e.i(395066),e.s(["ActionCodeOperation",()=>K,"FacebookAuthProvider",()=>tM,"GithubAuthProvider",()=>tF,"GoogleAuthProvider",()=>tU,"OAuthProvider",()=>tD,"SAMLAuthProvider",()=>tV,"TwitterAuthProvider",()=>tj,"applyActionCode",()=>t8,"checkActionCode",()=>t7,"confirmPasswordReset",()=>t5,"getAuth",()=>np,"getRedirectResult",()=>rJ,"initializeRecaptchaConfig",()=>rt,"linkWithRedirect",()=>rq,"onIdTokenChanged",()=>rr,"signInAnonymously",()=>tz,"signInWithCredential",()=>tZ,"signInWithCustomToken",()=>t1,"signInWithPopup",()=>rU,"signInWithRedirect",()=>r$,"unlink",()=>tK,"updateEmail",()=>t9],136596)},620622,628263,379227,e=>{"use strict";var t=e.i(657799);(0,t.registerVersion)("firebase","11.10.0","app"),e.s([],628263);var r=t,n=e.i(817512);e.s(["FirebaseError",()=>n.FirebaseError,"getApps",()=>r.getApps,"initializeApp",()=>r.initializeApp],379227);var r=t;e.i(73140);var i=e.i(136596);e.s(["setupAuthClient",0,e=>{let t,n=0!==(t=(0,r.getApps)()).length?t[0]:(0,r.initializeApp)(e);return(0,i.getAuth)(n)}],620622)},694387,e=>{"use strict";let t="apple.com",r="facebook.com",n="github.com",i="google.com",s="x.com",a="figma.com",o=[t,r,n,i,s,a];[...o];let l={[t]:"Apple",[r]:"Facebook",[n]:"GitHub",[i]:"Google",[s]:"X",[a]:"Figma"},c={"twitter.com":s};function u(e){if(e)return o.includes(e)?l[e]:c[e]?l[c[e]]:e}e.s(["AppleProviderId",0,t,"FacebookProviderId",0,r,"FigmaProviderId",0,a,"GitHubProviderId",0,n,"GoogleProviderId",0,i,"PasswordProviderId",0,"password","XProviderId",0,s,"getOAuthProviderName",()=>u])},471225,e=>{"use strict";e.i(73140);var t=e.i(136596);e.i(628263);var r=e.i(379227);e.i(569910);let n=async(e,n)=>{try{let e=await n();return{type:"success",result:e}}catch(n){e.logger.error(`Failed to execute Firebase Client SDK command: ${n.message}`,{command:e.command,errorCode:n.code});if(!(n instanceof r.FirebaseError))return{type:"error",treatment:"unknown"};switch(n.code){case"auth/account-exists-with-different-credential":{let e=n.customData?.email,r=t.OAuthProvider.credentialFromError(n);if(!r||!e)return{type:"error",treatment:"unhandled"};return{type:"error",treatment:"requires-provider-link",context:{credential:r,email:e}}}case"auth/auth-domain-config-required":case"auth/unauthorized-domain":return{type:"error",treatment:"configuration-error"};case"auth/credential-already-in-use":return{type:"error",treatment:"credential-conflict"};case"auth/email-already-in-use":return{type:"error",treatment:"email-conflict"};case"auth/expired-action-code":return{type:"error",treatment:"expired-input"};case"auth/invalid-action-code":return{type:"error",treatment:"invalid-input"};case"auth/invalid-credential":return{type:"error",treatment:"invalid-credential"};case"auth/invalid-email":return{type:"error",treatment:"invalid-email"};case"auth/no-such-provider":return{type:"error",treatment:"provider-not-linked"};case"auth/operation-not-allowed":case"auth/operation-not-supported-in-this-environment":return{type:"error",treatment:"forbidden-operation"};case"auth/popup-blocked":return{type:"error",treatment:"popup-blocked"};case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":return{type:"error",treatment:"popup-closed-by-user"};case"auth/provider-already-linked":return{type:"error",treatment:"provider-exists"};case"auth/timeout":return{type:"error",treatment:"timeout"};case"auth/too-many-requests":return{type:"error",treatment:"too-many-requests"};case"auth/user-disabled":return{type:"error",treatment:"banned-user"};case"auth/user-not-found":return{type:"error",treatment:"missing-user"};case"auth/weak-password":return{type:"error",treatment:"weak-password"};case"auth/wrong-password":return{type:"error",treatment:"wrong-password"};default:return{type:"error",treatment:"unhandled"}}}};t.ActionCodeOperation;let i=async({logger:e},{user:r,providerId:i})=>await n({logger:e,command:"unlink"},()=>(0,t.unlink)(r,i)),s=async({auth:e,logger:r})=>await n({logger:r,command:"signInAnonymously"},()=>(0,t.signInAnonymously)(e));e.s(["exec",0,n,"signInAnonymousUser",0,s,"unlinkProvider",0,i],471225)},203615,e=>{"use strict";var t,r,n,i=((t={}).AUTH="auth",t.EMAIL_VERIFICATION="email-verification",t),s=((r={}).SIGN_OUT="signOut",r),a=((n={}).POLLING="emailVerificationPolling",n);class o{static channels={};static available(){return"u">typeof BroadcastChannel}static getChannel(e){if(!this.available())return null;if(!this.channels[e])try{this.channels[e]=new BroadcastChannel(e)}catch(e){return null}return this.channels[e]}static postMessage(e,t,r){let n=this.getChannel(e);if(n)try{n.postMessage({type:t,data:r})}catch(e){}}static addEventListener(e,t,r){let n=this.getChannel(e);if(!n)return;let i=e=>{e.data.type===t&&r(e.data.data)};try{return n.addEventListener("message",i),()=>{n.removeEventListener("message",i)}}catch(e){}}static close(e){let t=this.channels[e];if(t)try{t.close(),delete this.channels[e]}catch(e){}}}e.s(["AuthMessageType",()=>s,"BroadcastChannelType",()=>i,"EmailVerificationMessageType",()=>a,"default",()=>o])},278598,e=>{"use strict";var t=e.i(960933),r=e.i(862927),n=e.i(694387),i=e.i(282453);let s="replit_last_login_method",a=t.Type.Union([t.Type.Literal("password"),t.Type.Literal(n.GoogleProviderId),t.Type.Literal(n.GitHubProviderId),t.Type.Literal(n.XProviderId),t.Type.Literal(n.AppleProviderId),t.Type.Literal(n.FacebookProviderId)]);function o(e){return r.Value.Check(a,e)}let l=t.Type.Object({method:t.Type.Optional(a),pending:t.Type.Optional(a)});function c(){return i.default.get(s,l)??{}}function u(e){i.default.set(s,e)}function h(e){u({...c(),method:e})}function d(){return c().method??null}function p(e){u({...c(),pending:e})}function f(){return c().pending??null}function g(){u({method:c().method})}e.s(["LAST_LOGIN_METHOD_KEY",0,s,"LoginMethodSchema",0,a,"clearPendingLoginMethod",()=>g,"getLastLoginMethod",()=>d,"getPendingLoginMethod",()=>f,"isValidLoginMethod",()=>o,"saveLastLoginMethod",()=>h,"savePendingLoginMethod",()=>p])},294426,e=>{"use strict";var t=e.i(389959),r=e.i(830675);e.i(73140);var n=e.i(136596),i=e.i(569910),s=e.i(620622),a=e.i(694387),o=e.i(471225),l=e.i(365669),c=e.i(17266),u=e.i(814688),h=e.i(203615),d=e.i(664152),p=e.i(282453),f=e.i(278598);let g=(()=>{let e=l.publicEnv.NEXT_PUBLIC_FIREBASE_API_KEY;if(!e)throw Error("NEXT_PUBLIC_FIREBASE_API_KEY is required");let t=window.location.origin;if(!t)throw Error("ORIGIN is required");try{return(0,s.setupAuthClient)({apiKey:e,authDomain:new URL(t).host,projectId:l.publicEnv.NEXT_PUBLIC_FIREBASE_PROJECT_ID,appId:l.publicEnv.NEXT_PUBLIC_FIREBASE_APP_ID})}catch(e){throw r.withScope(t=>{t.setExtra("setupAuthClient","true"),r.captureException(e)}),e}})(),m=async()=>{try{await (0,n.initializeRecaptchaConfig)(g)}catch(e){d.logger.error(`Failed to initialize reCAPTCHA: ${e.message}`)}},v=async e=>{await g.signOut(),await e.clearStore();let t=p.default.get(f.LAST_LOGIN_METHOD_KEY,f.LoginMethodSchema);p.default.clear(),t&&p.default.set(f.LAST_LOGIN_METHOD_KEY,t),delete window[c.STATSIG_KEY],delete window[c.STATSIG_USER_KEY],h.default.postMessage(h.BroadcastChannelType.AUTH,h.AuthMessageType.SIGN_OUT)},_=async e=>{let t=await e.getIdTokenResult();return!e.isAnonymous&&"anonymous"!==t.signInProvider&&t.authTime!==t.issuedAtTime&&(new Date().getTime()-new Date(t.issuedAtTime).getTime())/1e3<60},I=async({tenantId:e,provider:t})=>{let i;i="saml"===t.type?new n.SAMLAuthProvider(t.providerId):w(t.providerId),g.tenantId=e??null;let s=await (0,o.exec)({logger:d.logger,command:"signInWithRedirect"},()=>(0,n.signInWithRedirect)(g,i));return"error"===s.type&&r.withScope(e=>{e.setExtras({provider:t,result:s}),r.captureException(Error("Failed to initiate OAuth flow"))}),s},y=async({providerId:e})=>{let t=w(e),i=await (0,o.exec)({logger:d.logger,command:"signInWithPopup"},()=>(0,n.signInWithPopup)(g,t));if("success"===i.type){d.logger.info(`Auth: Successful OAuth popup auth for uid: ${i.result.user.uid}`);let e=i.result.user;if(null===e.email&&e.providerData.length>0&&e.providerData[0].email&&(await (0,n.updateEmail)(e,e.providerData[0].email),await e.reload()),null===e.email)return r.withScope(e=>{e.setExtras({result:i}),r.captureException(Error("OAuth provider popup login resulted in a user without an email address"))}),{type:"error",treatment:"user-needs-email",credential:i.result}}return"error"===i.type&&"popup-blocked"!==i.treatment&&"popup-closed-by-user"!==i.treatment&&r.withScope(t=>{t.setExtras({providerId:e,result:i}),r.captureException(Error("Failed OAuth popup flow"))}),i},w=e=>{let t;switch(e){case a.AppleProviderId:t=new n.OAuthProvider(e);break;case a.FacebookProviderId:t=new n.FacebookAuthProvider;break;case a.GitHubProviderId:t=new n.GithubAuthProvider;break;case a.GoogleProviderId:t=new n.GoogleAuthProvider;break;case a.XProviderId:t=new n.TwitterAuthProvider;break;case a.FigmaProviderId:t=new n.OAuthProvider(e);break;default:(0,i.default)(e)}return t},E=async()=>{let e=await (0,o.exec)({logger:d.logger,command:"getRedirectResult"},()=>(0,n.getRedirectResult)(g));if("success"===e.type&&e.result&&d.logger.info(`Auth: Successful OAuth auth for uid: ${e.result.user.uid}`),"success"===e.type&&e.result){let t=e.result.user;if(null===t.email&&t.providerData.length>0&&t.providerData[0].email&&(await (0,n.updateEmail)(t,t.providerData[0].email),await t.reload()),null===t.email)return r.withScope(t=>{t.setExtras({redirectResult:e}),r.captureException(Error("OAuth provider login resulted in a user without an email address"))}),{type:"error",treatment:"user-needs-email",credential:e.result}}return"error"===e.type&&"email-conflict"!==e.treatment&&r.withScope(t=>{t.setExtras({redirectResult:e}),r.captureException(Error("Failed to handle OAuth redirect"))}),e},b=async(e,t,i={})=>{let s=w(t);if(i.scopes)for(let e of i.scopes)s.addScope(e);let a=await (0,o.exec)({logger:d.logger,command:"linkWithRedirect"},()=>(0,n.linkWithRedirect)(e,s));return"error"===a.type&&r.withScope(e=>{e.setExtras({result:a}),r.captureException(Error("Failed to initiate linking an additional OAuth provider"))}),a},T=async(e,t)=>{let n=await (0,o.unlinkProvider)({auth:g,logger:d.logger},{user:e,providerId:t});return"error"===n.type&&r.withScope(e=>{e.setExtras({result:n}),r.captureException(Error("Failed to unlink provider"))}),n},C=async()=>{let e=await (0,o.signInAnonymousUser)({auth:g,logger:d.logger});return"error"===e.type&&r.withScope(t=>{t.setExtras({result:e}),r.captureException(Error("Failed to create anonymous user"))}),e},S=async()=>(await Promise.race([g._getRecaptchaConfig(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),new Promise((e,t)=>setTimeout(()=>t(Error("Could not fetch reCAPTCHA site key in 5s")),5e3))])).siteKey,A=async({action:e})=>{let t=await S();return await window.grecaptcha.enterprise.execute(t,{action:e})},P=async({response:e})=>{let t;if(g.currentUser)t=g.currentUser;else{let e=await C();if("error"===e.type)return{type:"error",message:"Something went wrong configuring your session, please try again."};t=e.result.user}let r=await Object.getPrototypeOf(t).constructor._fromIdTokenResponse(g,e);return g.updateCurrentUser(r),{type:"success",user:r}};h.default.available()&&h.default.addEventListener(h.BroadcastChannelType.AUTH,h.AuthMessageType.SIGN_OUT,()=>{window.alert("You have been logged out in another tab.\n\nYou will be redirected to the login page which will take you back here once you log in."),(0,u.default)()}),e.s(["EMAIL_VERIFICATION_POLL_INTERVAL",0,500,"configureAuth",0,m,"getAccessTokenFromCredential",0,(e,t)=>{switch(e){case a.AppleProviderId:return n.OAuthProvider.credentialFromResult(t);case a.FacebookProviderId:return n.FacebookAuthProvider.credentialFromResult(t);case a.GitHubProviderId:return n.GithubAuthProvider.credentialFromResult(t);case a.GoogleProviderId:return n.GoogleAuthProvider.credentialFromResult(t);case a.XProviderId:return n.TwitterAuthProvider.credentialFromResult(t);case a.FigmaProviderId:return n.OAuthProvider.credentialFromResult(t);default:(0,i.default)(e)}},"getAuthInstance",0,()=>g,"getRecaptchaToken",0,A,"handlePotentialOAuthRedirect",0,E,"hasCurrentUser",0,()=>null!==g.currentUser,"linkProvider",0,b,"onTokenUpdate",0,e=>(0,n.onIdTokenChanged)(g,e),"popupBlockedErrorMessage",0,"Pop-up was blocked. Please allow pop-ups for this site and try again.","popupClosedErrorMessage",0,"Authentication was cancelled. Please try again.","setUserFromApiResponse",0,P,"shouldRefreshCookie",0,_,"signInAnonymousUser",0,C,"signInWithProvider",0,I,"signInWithProviderErrorMessage",0,"Something went wrong, please try again. If you continue to experience issues, you may have a browser setting or extension installed that is interfering with the redirect.","signInWithProviderPopup",0,y,"signOut",0,v,"unlinkProvider",0,T,"useEmailVerificationTabListener",0,e=>{(0,t.useEffect)(()=>{let t=h.default.addEventListener(h.BroadcastChannelType.EMAIL_VERIFICATION,h.EmailVerificationMessageType.POLLING,t=>{"waitingVerification"===t.status&&e()});return()=>t?.()},[e])}])}]);

//# debugId=48e48b05-4d2f-6046-3677-9f1f83bba5c8
//# sourceMappingURL=cd6b3cbeac83860d.js.map